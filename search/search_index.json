{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"GeoGuessr API Documentation","text":"<p>Unofficial, community-maintained documentation for the GeoGuessr API</p> <p>This is a comprehensive guide to the undocumented GeoGuessr API based on reverse engineering and community research. GeoGuessr does not officially support or guarantee these endpoints.</p>"},{"location":"#disclaimer","title":"Disclaimer","text":"<p>This API is not officially documented or supported by GeoGuessr. Use at your own risk and always respect: - Rate limits - Terms of Service - Fair use policies - User privacy</p> <p>The API can change at any time without notice.</p>"},{"location":"#table-of-contents","title":"Table of Contents","text":"<ul> <li>Repository Structure</li> <li>Getting Started</li> <li>Authentication</li> <li>API Basics</li> <li>Quick Start Examples</li> <li>API Reference by Category</li> <li>Best Practices</li> <li>Contributing</li> </ul>"},{"location":"#repository-structure","title":"Repository Structure","text":"<pre><code>.\n\u251c\u2500\u2500 README.md                  # This file - Getting started guide\n\u251c\u2500\u2500 authentication.md          # Authentication &amp; account endpoints\n\u251c\u2500\u2500 challenges.md              # Challenge creation and results\n\u251c\u2500\u2500 duels.md                   # Duels game state and replays (game-server API)\n\u251c\u2500\u2500 feed.md                    # Activity feeds and social streams\n\u251c\u2500\u2500 games.md                   # Game sessions and gameplay modes\n\u251c\u2500\u2500 maps.md                    # Map browsing and searching\n\u251c\u2500\u2500 profiles.md                # User profiles and search\n\u251c\u2500\u2500 social.md                  # Friends, badges, and social features\n\u251c\u2500\u2500 subscriptions.md           # Subscription plans and management\n\u251c\u2500\u2500 websocket.md               # WebSocket API for live notifications\n\u251c\u2500\u2500 examples/                  # \ud83d\udd25 Ready-to-use code examples\n\u2502   \u251c\u2500\u2500 README.md              # Examples guide and usage\n\u2502   \u251c\u2500\u2500 javascript/            # Browser console examples\n\u2502   \u2502   \u251c\u2500\u2500 challenges/        # Challenge leaderboards, performance analysis\n\u2502   \u2502   \u251c\u2500\u2500 profiles/          # Profile viewing, user search, comparison\n\u2502   \u2502   \u251c\u2500\u2500 social/            # Friends list and statistics\n\u2502   \u2502   \u251c\u2500\u2500 maps/              # Browse and discover maps\n\u2502   \u2502   \u251c\u2500\u2500 feed/              # Activity feeds and tracking\n\u2502   \u2502   \u251c\u2500\u2500 games/             # Game state, streak creation\n\u2502   \u2502   \u251c\u2500\u2500 duels/             # Duels state and replay analysis\n\u2502   \u2502   \u2514\u2500\u2500 subscriptions/     # Subscription status, plan comparison\n\u2502   \u2514\u2500\u2500 python/                # Python script examples\n\u2502       \u251c\u2500\u2500 challenges/        # Challenge leaderboards, performance analysis\n\u2502       \u251c\u2500\u2500 profiles/          # Profile viewing, user search\n\u2502       \u251c\u2500\u2500 social/            # Friends list and statistics\n\u2502       \u251c\u2500\u2500 maps/              # Browse and search maps\n\u2502       \u251c\u2500\u2500 feed/              # Activity feeds and tracking\n\u2502       \u251c\u2500\u2500 games/             # Game state, streak creation\n\u2502       \u251c\u2500\u2500 duels/             # Duels state and replay analysis\n\u2502       \u2514\u2500\u2500 subscriptions/     # Subscription status, plan comparison\n\u2514\u2500\u2500 tests/                     # Testing files (not for public use)\n    \u251c\u2500\u2500 *-testing.md           # Test scripts for each endpoint\n    \u2514\u2500\u2500 *-testing-results.md   # Raw test results\n</code></pre> <p>Note: The <code>tests/</code> directory contains internal testing files used to verify API endpoints and is excluded from the main documentation.</p>"},{"location":"#quick-start-with-examples","title":"\ud83d\ude80 Quick Start with Examples","text":"<p>New to the API? Start with the examples directory:</p> <ul> <li>JavaScript Examples - Run directly in your browser console (no setup required!)</li> <li>Python Examples - Complete scripts ready to use (<code>pip install requests</code>)</li> </ul> <p>Popular examples:</p> <p>View all examples \u2192</p> <p>Challenges &amp; Competition: - Get Challenge Leaderboard - View top players and scores - Analyze Your Performance - See how you rank against the leaderboard</p> <p>User &amp; Social: - Get Your Profile - View your stats, level, and progress - Compare Users - Head-to-head player comparison - Friends Activity Feed - Track what friends are playing</p> <p>Gameplay: - Create Streak Game - Start custom streak games with presets - Get Game State - Monitor game progress and round details</p> <p>Duels &amp; Competitive: - Get Duel State - View live duel health, damage, and results - Analyze Duel Replay - Study player strategies and behavior patterns</p> <p>Maps &amp; Content: - Browse Popular Maps - Discover popular community maps - Search Maps - Find maps by name or keywords</p> <p>Subscriptions: - Check Subscription Status - View your Pro subscription details - Compare Plans - Find the best subscription value</p> <p>See examples/README.md for the complete list and usage instructions.</p>"},{"location":"#getting-started","title":"Getting Started","text":""},{"location":"#base-urls","title":"Base URLs","text":"<p>GeoGuessr has two API domains:</p> <p>Main API: <pre><code>https://www.geoguessr.com/api\n</code></pre> Used for most endpoints (profiles, challenges, maps, etc.)</p> <p>Game Server API: <pre><code>https://game-server.geoguessr.com/api\n</code></pre> Used for game data (duels, replays)</p>"},{"location":"#api-versions","title":"API Versions","text":"<p>GeoGuessr has multiple API versions: - v3: Legacy endpoints, still widely used - v4: Newer endpoints with enhanced features</p> <p>Most endpoints are in v3, with newer features migrating to v4. The game server API does not use versioning.</p>"},{"location":"#response-format","title":"Response Format","text":"<p>All endpoints return JSON responses with standard HTTP status codes.</p>"},{"location":"#authentication","title":"Authentication","text":""},{"location":"#cookie-based-authentication","title":"Cookie-Based Authentication","text":"<p>GeoGuessr uses cookie-based session authentication with a cookie named <code>_ncfa</code>.</p>"},{"location":"#how-to-obtain-your-cookie","title":"How to Obtain Your Cookie","text":"<ol> <li>Log in to GeoGuessr in your browser</li> <li>Open Developer Tools (F12)</li> <li>Go to Application/Storage \u2192 Cookies</li> <li>Find the <code>_ncfa</code> cookie</li> <li>Copy its value</li> </ol> <p>The cookie typically lasts several months but will expire if you log out or after extended inactivity.</p>"},{"location":"#javascript-usage-browser","title":"JavaScript Usage (Browser)","text":"<p>When making requests from the browser, cookies are automatically included:</p> <pre><code>// Fetch API\nconst response = await fetch('https://www.geoguessr.com/api/v3/profiles', {\n    credentials: 'include'  // Include cookies automatically\n});\nconst data = await response.json();\nconsole.log(data);\n\n// XMLHttpRequest\nconst xhr = new XMLHttpRequest();\nxhr.withCredentials = true;\nxhr.open('GET', 'https://www.geoguessr.com/api/v3/profiles');\nxhr.send();\n</code></pre> <p>Important: The <code>credentials: 'include'</code> option is required for authenticated endpoints.</p>"},{"location":"#javascript-usage-nodejs","title":"JavaScript Usage (Node.js)","text":"<p>When making requests from Node.js, you need to manually provide the cookie:</p> <pre><code>// Using fetch (node-fetch or native fetch in Node 18+)\nconst response = await fetch('https://www.geoguessr.com/api/v3/profiles', {\n    headers: {\n        'Cookie': '_ncfa=YOUR_NCFA_COOKIE_VALUE'\n    }\n});\nconst data = await response.json();\n\n// Using axios\nconst axios = require('axios');\nconst response = await axios.get('https://www.geoguessr.com/api/v3/profiles', {\n    headers: {\n        'Cookie': '_ncfa=YOUR_NCFA_COOKIE_VALUE'\n    }\n});\nconsole.log(response.data);\n</code></pre>"},{"location":"#python-usage","title":"Python Usage","text":"<pre><code>import requests\n\n# Set up cookies\ncookies = {\n    '_ncfa': 'YOUR_NCFA_COOKIE_VALUE'\n}\n\n# Make request\nresponse = requests.get(\n    'https://www.geoguessr.com/api/v3/profiles',\n    cookies=cookies\n)\n\n# Parse JSON response\ndata = response.json()\nprint(data)\n</code></pre> <p>With requests Session (recommended for multiple requests):</p> <pre><code>import requests\n\n# Create a session\nsession = requests.Session()\nsession.cookies.set('_ncfa', 'YOUR_NCFA_COOKIE_VALUE')\n\n# Make requests\nresponse = session.get('https://www.geoguessr.com/api/v3/profiles')\ndata = response.json()\n\n# All subsequent requests will use the same cookie\nresponse2 = session.get('https://www.geoguessr.com/api/v3/social/friends')\nfriends = response2.json()\n</code></pre>"},{"location":"#curl-usage","title":"cURL Usage","text":"<pre><code>curl 'https://www.geoguessr.com/api/v3/profiles' \\\n  -H 'Cookie: _ncfa=YOUR_NCFA_COOKIE_VALUE'\n</code></pre>"},{"location":"#security-best-practices","title":"Security Best Practices","text":"<ul> <li>Never share your <code>_ncfa</code> cookie publicly</li> <li>Don't commit cookies to version control</li> <li>Use environment variables for sensitive data:</li> </ul> <pre><code>// JavaScript\nconst NCFA_COOKIE = process.env.GEOGUESSR_COOKIE;\n\n// Python\nimport os\nNCFA_COOKIE = os.getenv('GEOGUESSR_COOKIE')\n</code></pre>"},{"location":"#api-basics","title":"API Basics","text":""},{"location":"#http-methods","title":"HTTP Methods","text":"<p>The API uses standard HTTP methods: - GET: Retrieve data - POST: Create new resources - PUT: Update existing resources - DELETE: Delete resources</p>"},{"location":"#status-codes","title":"Status Codes","text":"Code Meaning Description 200 OK Request successful 201 Created Resource created successfully 400 Bad Request Invalid request format 401 Unauthorized Invalid or missing authentication 403 Forbidden Access denied (e.g., haven't played challenge) 404 Not Found Resource doesn't exist 429 Too Many Requests Rate limit exceeded 500 Internal Server Error Server error 503 Service Unavailable Temporary server issue"},{"location":"#error-handling","title":"Error Handling","text":"<p>Always check for errors in your code:</p> <p>JavaScript: <pre><code>async function fetchAPI(url) {\n    try {\n        const response = await fetch(url, { credentials: 'include' });\n\n        if (!response.ok) {\n            throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        }\n\n        return await response.json();\n    } catch (error) {\n        console.error('API Error:', error);\n        return null;\n    }\n}\n</code></pre></p> <p>Python: <pre><code>def fetch_api(url, cookies):\n    try:\n        response = requests.get(url, cookies=cookies)\n        response.raise_for_status()  # Raises HTTPError for bad status\n        return response.json()\n    except requests.exceptions.HTTPError as e:\n        print(f\"HTTP Error: {e}\")\n        return None\n    except requests.exceptions.RequestException as e:\n        print(f\"Request Error: {e}\")\n        return None\n</code></pre></p>"},{"location":"#rate-limiting","title":"Rate Limiting","text":"<p>While official rate limits aren't documented, follow these guidelines: - Don't exceed 10 requests per second - Add delays between requests (100-500ms recommended) - Implement exponential backoff on errors - Cache responses when possible</p> <p>JavaScript Rate Limiting: <pre><code>function sleep(ms) {\n    return new Promise(resolve =&gt; setTimeout(resolve, ms));\n}\n\nasync function fetchWithRateLimit(urls) {\n    const results = [];\n    for (const url of urls) {\n        const data = await fetchAPI(url);\n        results.push(data);\n        await sleep(100);  // 100ms delay between requests\n    }\n    return results;\n}\n</code></pre></p> <p>Python Rate Limiting: <pre><code>import time\n\ndef fetch_with_rate_limit(urls, cookies):\n    results = []\n    for url in urls:\n        data = fetch_api(url, cookies)\n        results.append(data)\n        time.sleep(0.1)  # 100ms delay\n    return results\n</code></pre></p>"},{"location":"#quick-start-examples","title":"Quick Start Examples","text":"<p>\ud83d\udca1 Want more examples? Check out the examples directory for ready-to-use scripts including leaderboard analysis, user comparison, activity feeds, and more!</p>"},{"location":"#example-1-get-your-profile","title":"Example 1: Get Your Profile","text":"<p>JavaScript: <pre><code>async function getMyProfile() {\n    const response = await fetch('https://www.geoguessr.com/api/v3/profiles', {\n        credentials: 'include'\n    });\n    const profile = await response.json();\n    console.log(`Welcome, ${profile.user.nick}!`);\n    console.log(`Level: ${profile.user.progress.level}`);\n    return profile;\n}\n\ngetMyProfile();\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_my_profile(cookie):\n    response = requests.get(\n        'https://www.geoguessr.com/api/v3/profiles',\n        cookies={'_ncfa': cookie}\n    )\n    profile = response.json()\n    print(f\"Welcome, {profile['user']['nick']}!\")\n    print(f\"Level: {profile['user']['progress']['level']}\")\n    return profile\n\n# Usage\ncookie = 'YOUR_NCFA_COOKIE'\nprofile = get_my_profile(cookie)\n</code></pre></p>"},{"location":"#example-2-get-challenge-results","title":"Example 2: Get Challenge Results","text":"<p>JavaScript: <pre><code>async function getChallengeResults(challengeToken) {\n    const url = `https://www.geoguessr.com/api/v3/results/highscores/${challengeToken}`;\n    const response = await fetch(url, { credentials: 'include' });\n    const data = await response.json();\n\n    // Process results\n    const leaderboard = data.items.map((item, index) =&gt; ({\n        rank: index + 1,\n        player: item.game.player.nick,\n        score: parseInt(item.game.player.totalScore.amount)\n    }));\n\n    console.table(leaderboard);\n    return leaderboard;\n}\n\n// Usage\ngetChallengeResults('6G9h2UPctmUmUtaa');\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_challenge_results(challenge_token, cookie):\n    url = f'https://www.geoguessr.com/api/v3/results/highscores/{challenge_token}'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    data = response.json()\n\n    # Process results\n    leaderboard = []\n    for index, item in enumerate(data['items']):\n        player_data = item['game']['player']\n        leaderboard.append({\n            'rank': index + 1,\n            'player': player_data['nick'],\n            'score': int(player_data['totalScore']['amount'])\n        })\n\n    for entry in leaderboard:\n        print(f\"{entry['rank']}. {entry['player']}: {entry['score']} points\")\n\n    return leaderboard\n\n# Usage\ncookie = 'YOUR_NCFA_COOKIE'\nresults = get_challenge_results('6G9h2UPctmUmUtaa', cookie)\n</code></pre></p>"},{"location":"#example-3-search-for-a-user","title":"Example 3: Search for a User","text":"<p>JavaScript: <pre><code>async function searchUser(username) {\n    const url = `https://www.geoguessr.com/api/v3/search/user?q=${encodeURIComponent(username)}`;\n    const response = await fetch(url, { credentials: 'include' });\n    const results = await response.json();\n\n    results.forEach(user =&gt; {\n        console.log(`${user.nick} (${user.id})`);\n    });\n\n    return results;\n}\n\n// Usage\nsearchUser('brbw');\n</code></pre></p> <p>Python: <pre><code>import requests\nfrom urllib.parse import quote\n\ndef search_user(username, cookie):\n    url = f'https://www.geoguessr.com/api/v3/search/user?q={quote(username)}'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    results = response.json()\n\n    for user in results:\n        print(f\"{user['nick']} ({user['id']})\")\n\n    return results\n\n# Usage\ncookie = 'YOUR_NCFA_COOKIE'\nusers = search_user('brbw', cookie)\n</code></pre></p>"},{"location":"#api-reference-by-category","title":"API Reference by Category","text":"<p>The API endpoints are organized into the following categories:</p>"},{"location":"#challenges","title":"Challenges","text":"<p>Challenge creation, results, and information - Get challenge results and leaderboards - Get challenge information - Create new challenges</p>"},{"location":"#authentication-accounts","title":"Authentication &amp; Accounts","text":"<p>Login, signup, and account management - Sign in with various providers - Account deletion - Password management</p>"},{"location":"#user-profiles","title":"User Profiles","text":"<p>User profile data and management - Get user profiles - Search for users - Profile customization</p>"},{"location":"#games-gameplay","title":"Games &amp; Gameplay","text":"<p>Game sessions and gameplay modes - Standard games - Streak mode - Infinity mode</p>"},{"location":"#duels","title":"Duels","text":"<p>Competitive duels and replay data (game-server API) - Get duel game state and results - Team duels with multiple players - Replay data with player actions - Health, damage, and multiplier systems</p>"},{"location":"#social-friends","title":"Social &amp; Friends","text":"<p>Friends, badges, and social features - Friends list management - Badges and achievements - Social events</p>"},{"location":"#maps","title":"Maps","text":"<p>Map browsing, searching, and scores - Browse featured and popular maps - Search for maps - Map scores and statistics</p>"},{"location":"#subscriptions","title":"Subscriptions","text":"<p>Subscription plans and management - Get subscription status - Available plans - Payment methods</p>"},{"location":"#feed-activity","title":"Feed &amp; Activity","text":"<p>User feeds and activity streams - Friends activity - Private feed - Recent games</p>"},{"location":"#websocket","title":"WebSocket","text":"<p>Live notifications and social updates - Friend presence (online/offline) - Chat messages - Account updates and missions - Status activity changes</p>"},{"location":"#best-practices","title":"Best Practices","text":""},{"location":"#1-respect-rate-limits","title":"1. Respect Rate Limits","text":"<ul> <li>Add delays between requests</li> <li>Use exponential backoff on errors</li> <li>Cache responses when appropriate</li> </ul>"},{"location":"#2-handle-errors-gracefully","title":"2. Handle Errors Gracefully","text":"<ul> <li>Always check HTTP status codes</li> <li>Implement retry logic</li> <li>Log errors for debugging</li> </ul>"},{"location":"#3-validate-data","title":"3. Validate Data","text":"<ul> <li>Check for null/undefined values</li> <li>Verify array lengths</li> <li>Handle missing fields</li> </ul>"},{"location":"#4-security","title":"4. Security","text":"<ul> <li>Store cookies securely</li> <li>Use environment variables</li> <li>Never expose cookies in logs or version control</li> </ul>"},{"location":"#5-be-a-good-citizen","title":"5. Be a Good Citizen","text":"<ul> <li>Don't abuse the API</li> <li>Respect the platform</li> <li>Consider the impact on GeoGuessr's servers</li> </ul>"},{"location":"#common-patterns","title":"Common Patterns","text":""},{"location":"#pagination","title":"Pagination","text":"<p>Some endpoints support pagination: <pre><code>let allItems = [];\nlet paginationToken = null;\n\ndo {\n    const url = paginationToken\n        ? `${baseUrl}?token=${paginationToken}`\n        : baseUrl;\n\n    const response = await fetch(url, { credentials: 'include' });\n    const data = await response.json();\n\n    allItems = allItems.concat(data.items);\n    paginationToken = data.paginationToken;\n\n} while (paginationToken);\n</code></pre></p>"},{"location":"#extracting-ids-from-urls","title":"Extracting IDs from URLs","text":"<p>Challenge Token: <pre><code>const url = \"https://www.geoguessr.com/challenge/6G9h2UPctmUmUtaa\";\nconst token = url.split('/').pop();  // \"6G9h2UPctmUmUtaa\"\n</code></pre></p> <p>User ID from Profile URL: <pre><code>const url = \"https://www.geoguessr.com/user/59c55f9656b1c23bc81cb742\";\nconst userId = url.split('/').pop();  // \"59c55f9656b1c23bc81cb742\"\n</code></pre></p>"},{"location":"#troubleshooting","title":"Troubleshooting","text":""},{"location":"#401-unauthorized","title":"401 Unauthorized","text":"<ul> <li>Your <code>_ncfa</code> cookie is invalid or expired</li> <li>Log in again and get a fresh cookie</li> </ul>"},{"location":"#403-forbidden","title":"403 Forbidden","text":"<ul> <li>You don't have permission to access this resource</li> <li>For challenges: you must have played the challenge first</li> </ul>"},{"location":"#404-not-found","title":"404 Not Found","text":"<ul> <li>The resource doesn't exist</li> <li>Check that IDs/tokens are correct</li> </ul>"},{"location":"#429-too-many-requests","title":"429 Too Many Requests","text":"<ul> <li>You're making requests too quickly</li> <li>Implement rate limiting and backoff</li> </ul>"},{"location":"#500503-server-errors","title":"500/503 Server Errors","text":"<ul> <li>GeoGuessr server is experiencing issues</li> <li>Retry with exponential backoff</li> <li>Check GeoGuessr's status</li> </ul>"},{"location":"#contributing","title":"Contributing","text":"<p>This documentation is community-maintained and welcomes contributions! We need help with:</p> <ul> <li>\ud83d\udc1b Bug Reports - Found incorrect information? Let us know!</li> <li>\ud83d\udcdd Documentation - Improve explanations, fix typos, update outdated content</li> <li>\ud83d\udcbb Code Examples - Add more examples or improve existing ones</li> <li>\ud83e\uddea Testing - Verify endpoints still work, test new features</li> <li>\ud83c\udd95 New Content - Document new endpoints or API features</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<ol> <li>Fork the repository</li> <li>Make your changes following our Contributing Guidelines</li> <li>Test your changes thoroughly</li> <li>Submit a pull request</li> </ol>"},{"location":"#standards","title":"Standards","text":"<p>All contributions must: - \u2705 Be verified with real API testing (no assumptions!) - \u2705 Include complete data structures with TypeScript interfaces - \u2705 Provide working code examples in both JavaScript and Python - \u2705 Document authentication requirements and error cases - \u2705 Follow the existing file structure and formatting</p> <p>See CONTRIBUTING.md for detailed guidelines, testing procedures, and submission process.</p>"},{"location":"#resources","title":"Resources","text":"<ul> <li>GeoGuessr Website</li> <li>Community Discord Servers</li> <li>GitHub Projects</li> </ul>"},{"location":"#license","title":"License","text":"<p>This documentation is provided as-is for educational purposes. Always respect GeoGuessr's Terms of Service.</p> <p>Last Updated: January 2026</p> <p>Maintained by: Community Contributors</p>"},{"location":"CONTRIBUTING/","title":"Contributing to GeoGuessr API Documentation","text":"<p>Thank you for your interest in contributing! This documentation is community-maintained and benefits from real-world testing and feedback.</p>"},{"location":"CONTRIBUTING/#ways-to-contribute","title":"\ud83c\udfaf Ways to Contribute","text":""},{"location":"CONTRIBUTING/#1-report-issues","title":"1. Report Issues","text":"<ul> <li>Found incorrect information? Open an issue!</li> <li>Discovered a new endpoint? Let us know!</li> <li>Noticed outdated documentation? Tell us!</li> </ul>"},{"location":"CONTRIBUTING/#2-submit-corrections","title":"2. Submit Corrections","text":"<ul> <li>Fix typos or formatting</li> <li>Update outdated information</li> <li>Correct field names or data structures</li> </ul>"},{"location":"CONTRIBUTING/#3-add-new-content","title":"3. Add New Content","text":"<ul> <li>Document new endpoints</li> <li>Add more code examples</li> <li>Create tutorials or guides</li> <li>Improve existing examples</li> </ul>"},{"location":"CONTRIBUTING/#4-test-and-verify","title":"4. Test and Verify","text":"<ul> <li>Verify existing endpoints still work</li> <li>Test examples and report issues</li> <li>Share API testing results</li> </ul>"},{"location":"CONTRIBUTING/#contribution-guidelines","title":"\ud83d\udccb Contribution Guidelines","text":""},{"location":"CONTRIBUTING/#documentation-standards","title":"Documentation Standards","text":"<p>All contributions should follow these standards:</p>"},{"location":"CONTRIBUTING/#1-verify-with-real-api-testing","title":"1. Verify with Real API Testing","text":"<ul> <li>Never assume endpoint behavior</li> <li>Always test endpoints with real API calls</li> <li>Document exact request/response structures</li> <li>Include actual response examples from testing</li> </ul>"},{"location":"CONTRIBUTING/#2-include-complete-structures","title":"2. Include Complete Structures","text":"<ul> <li>Use TypeScript interfaces for all data structures</li> <li>Document all fields (even if unused)</li> <li>Note field types accurately (string, number, boolean, object)</li> <li>Include nested structures completely</li> </ul>"},{"location":"CONTRIBUTING/#3-provide-working-examples","title":"3. Provide Working Examples","text":"<ul> <li>Include both JavaScript and Python examples when possible</li> <li>Test examples before submitting</li> <li>Use clear, descriptive variable names</li> <li>Add comments explaining complex logic</li> </ul>"},{"location":"CONTRIBUTING/#4-document-edge-cases","title":"4. Document Edge Cases","text":"<ul> <li>Note authentication requirements</li> <li>Document error responses (401, 403, 404, etc.)</li> <li>Mention deprecated or broken endpoints</li> <li>Include rate limiting information if known</li> </ul>"},{"location":"CONTRIBUTING/#5-follow-file-structure","title":"5. Follow File Structure","text":"<pre><code># Endpoint Documentation Format\n\n## Overview\nBrief description and key concepts\n\n## Endpoints\n\n### Endpoint Name\n**Endpoint:** `METHOD /vX/path`\n**Authentication:** Required/Not required\n**Response:** Description\n\n**Example Request:**\n```language\ncode here\n</code></pre> <p>Example Response: <pre><code>{\n  \"field\": \"value\"\n}\n</code></pre></p> <p>Important Notes: - Note 1 - Note 2 <pre><code>### Code Style\n\n**JavaScript:**\n- Use async/await (not promises)\n- Use `fetch` API\n- Include `credentials: 'include'` for authenticated requests\n- Use descriptive function names\n- Add JSDoc comments\n\n**Python:**\n- Use `requests` library\n- Use `os.getenv()` for environment variables\n- Include error handling\n- Add docstrings\n- Follow PEP 8\n\n## \ud83d\udd2c Testing Guidelines\n\nBefore submitting documentation for an endpoint:\n\n1. **Test the endpoint** yourself using:\n   - Browser developer console\n   - Python script\n   - Postman or similar tool\n\n2. **Document what you find:**\n   - Exact URL and HTTP method\n   - Required headers\n   - Request body structure\n   - Response body structure\n   - Status codes returned\n\n3. **Test edge cases:**\n   - What happens without authentication?\n   - What happens with invalid parameters?\n   - What happens when the resource doesn't exist?\n\n4. **Save test results:**\n   - Keep testing scripts for future verification\n   - Note the date of testing\n   - Document API version if available\n\n## \ud83d\udcdd Pull Request Process\n\n### 1. Before You Start\n- Check existing issues and PRs to avoid duplicates\n- Open an issue to discuss major changes\n- Fork the repository\n\n### 2. Making Changes\n- Create a new branch: `git checkout -b feature/your-feature-name`\n- Make your changes following our guidelines\n- Test your changes thoroughly\n- Update relevant documentation\n\n### 3. Submitting\n- Write clear commit messages\n- Reference related issues\n- Submit a pull request with:\n  - Clear description of changes\n  - Testing methodology\n  - Screenshots/output if applicable\n\n### 4. PR Review\n- Address reviewer feedback\n- Make requested changes\n- Keep the PR up to date with main branch\n\n## \u2705 Checklist for New Endpoints\n\nWhen documenting a new endpoint:\n\n- [ ] Tested endpoint with real API calls\n- [ ] Documented full request structure\n- [ ] Documented full response structure\n- [ ] Created TypeScript interfaces for data structures\n- [ ] Added JavaScript example (browser console)\n- [ ] Added Python example (script)\n- [ ] Documented authentication requirements\n- [ ] Tested error cases (401, 403, 404)\n- [ ] Added notes about quirks or special behavior\n- [ ] Updated relevant category file\n- [ ] Added example to examples/ directory\n- [ ] Updated examples/README.md\n\n## \ud83d\udd12 Security Considerations\n\n### What NOT to Include\n- **Never** commit real cookies or authentication tokens\n- **Never** include real email addresses or passwords\n- **Never** share personal user data\n- **Never** include API keys or secrets\n\n### What TO Include\n- Placeholder values (e.g., `YOUR_COOKIE_VALUE`)\n- Example data structures\n- Anonymized response examples\n- Security warnings where appropriate\n\n## \ud83d\udcda Documentation Structure\n\nOur repository is organized as:\n.\n|-- README.md              # Main documentation\n|-- authentication.md      # Auth endpoints\n|-- challenges.md          # Challenge endpoints\n|-- duels.md               # Duels endpoints (game-server API)\n|-- feed.md                # Feed endpoints\n|-- games.md               # Game endpoints\n|-- maps.md                # Map endpoints\n|-- profiles.md            # Profile endpoints\n|-- social.md              # Social endpoints\n|-- subscriptions.md       # Subscription endpoints\n|-- websocket.md           # WebSocket API\n|-- examples/\n|   |-- README.md          # Examples guide\n|   |-- javascript/        # JS examples by category\n|   +-- python/            # Python examples by category\n+-- tests/                 # Internal testing files\n</code></pre></p>"},{"location":"CONTRIBUTING/#writing-style","title":"\ud83c\udfa8 Writing Style","text":"<ul> <li>Use clear, concise language</li> <li>Write in present tense</li> <li>Use active voice</li> <li>Be specific and technical</li> <li>Avoid assumptions</li> <li>Include context when needed</li> </ul> <p>Good: \"Returns an array of friend objects with userId field\" Bad: \"Gets friends\"</p>"},{"location":"CONTRIBUTING/#reporting-bugs-in-documentation","title":"\ud83d\udc1b Reporting Bugs in Documentation","text":"<p>When reporting documentation issues:</p> <ol> <li>Be specific: Quote the incorrect information</li> <li>Provide correct info: Include verified API behavior</li> <li>Show your testing: Share request/response examples</li> <li>Suggest a fix: Propose updated documentation</li> </ol>"},{"location":"CONTRIBUTING/#suggesting-enhancements","title":"\ud83d\udca1 Suggesting Enhancements","text":"<p>We welcome suggestions for: - New example types - Additional documentation sections - Improved organization - Better explanations - More use cases</p> <p>Open an issue with: - Clear description of enhancement - Why it would be valuable - Proposed implementation (if applicable)</p>"},{"location":"CONTRIBUTING/#code-of-conduct","title":"\ud83e\udd1d Code of Conduct","text":""},{"location":"CONTRIBUTING/#our-standards","title":"Our Standards","text":"<ul> <li>Be respectful and inclusive</li> <li>Provide constructive feedback</li> <li>Focus on the documentation quality</li> <li>Help others learn</li> <li>Give credit where due</li> </ul>"},{"location":"CONTRIBUTING/#unacceptable-behavior","title":"Unacceptable Behavior","text":"<ul> <li>Harassment or discriminatory language</li> <li>Trolling or insulting comments</li> <li>Publishing others' private information</li> <li>Unprofessional conduct</li> </ul>"},{"location":"CONTRIBUTING/#getting-help","title":"\ud83d\udcde Getting Help","text":"<ul> <li>Questions: Open a GitHub issue</li> <li>Discussions: Use GitHub Discussions</li> <li>Quick questions: Check existing issues first</li> </ul>"},{"location":"CONTRIBUTING/#recognition","title":"\ud83d\ude4f Recognition","text":"<p>Contributors will be: - Listed in commit history - Mentioned in release notes (for significant contributions) - Appreciated by the community!</p>"},{"location":"CONTRIBUTING/#license","title":"\ud83d\udcc4 License","text":"<p>By contributing, you agree that your contributions will be licensed under the same license as the project (provided for educational purposes, respecting GeoGuessr's Terms of Service).</p>"},{"location":"CONTRIBUTING/#quick-start-for-contributors","title":"Quick Start for Contributors","text":"<ol> <li>Fork the repository</li> <li>Create a branch: <code>git checkout -b feature/my-contribution</code></li> <li>Make your changes following guidelines above</li> <li>Test thoroughly</li> <li>Commit: <code>git commit -m \"Add: description of changes\"</code></li> <li>Push: <code>git push origin feature/my-contribution</code></li> <li>Create a Pull Request</li> </ol> <p>Thank you for contributing to the GeoGuessr API documentation! Your efforts help the entire community. \ud83c\udf89</p>"},{"location":"authentication/","title":"Authentication &amp; Accounts API","text":"<p>Endpoints for authentication, account creation, and account management.</p>"},{"location":"authentication/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Endpoints</li> <li>Sign In</li> <li>Social Sign In</li> <li>Account Management</li> <li>Password Management</li> <li>Data Structures</li> <li>Implementation Examples</li> </ul>"},{"location":"authentication/#overview","title":"Overview","text":"<p>GeoGuessr supports multiple authentication methods: - Email/Password - Traditional account creation - Google - Google account sign-in - Facebook - Facebook account sign-in - Apple - Apple account sign-in</p> <p>All authentication endpoints use the <code>_ncfa</code> cookie for session management after successful login.</p> <p>\ud83d\ude80 Ready to use? Check out the authentication examples for ready-to-use scripts: - Check Auth Status - Verify you're logged in - Sign In Example - Educational sign-in demonstration</p> <p>\u26a0\ufe0f  Important: These endpoints are primarily used by the GeoGuessr client application. Programmatic authentication may violate Terms of Service. Examples are provided for educational purposes only.</p>"},{"location":"authentication/#endpoints","title":"Endpoints","text":""},{"location":"authentication/#sign-in","title":"Sign In","text":"<p>Standard email/password authentication.</p> <p>Endpoint: <pre><code>POST /v3/accounts/signin\n</code></pre></p> <p>Authentication: Not required (this endpoint creates authentication)</p> <p>Request Body: <pre><code>{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}\n</code></pre></p> <p>Response: Complete user object (same structure as GET /v3/profiles response)</p> <p>Example Response: <pre><code>{\n  \"nick\": \"Sirey\",\n  \"created\": \"2019-10-30T20:19:35.6820000Z\",\n  \"isProUser\": true,\n  \"type\": \"Unlimited\",\n  \"isVerified\": false,\n  \"pin\": {\n    \"url\": \"pin/7dd941395a4ce096339065fc766a9482.png\",\n    \"anchor\": \"center-center\",\n    \"isDefault\": false\n  },\n  \"id\": \"5db9f057dfa5102130eaf747\",\n  \"countryCode\": \"gb\",\n  \"progress\": {\n    \"xp\": 1456894,\n    \"level\": 158\n  },\n  \"competitive\": {\n    \"elo\": 766,\n    \"rating\": 1267\n  }\n}\n</code></pre></p> <p>Important Notes: - Returns user object directly (not wrapped in <code>user</code> property) - Sets <code>session</code> cookie and <code>_ncfa</code> cookie (HttpOnly, not visible to JavaScript) - Sets <code>devicetoken</code> cookie - Response body is the full user object sent in request (visible in Network tab) - After successful login, use <code>GET /v3/profiles</code> to check authentication status</p>"},{"location":"authentication/#social-sign-in","title":"Social Sign In","text":""},{"location":"authentication/#google-sign-in","title":"Google Sign In","text":"<p>Endpoint: <pre><code>POST /v3/googleplus/signin\n</code></pre></p> <p>Authentication: Not required</p> <p>Request Body: (Structure needs verification) Likely contains Google OAuth token or authorization code.</p> <p>Note: This endpoint needs testing to verify exact request/response format.</p>"},{"location":"authentication/#facebook-sign-in","title":"Facebook Sign In","text":"<p>Endpoint: <pre><code>POST /v3/facebook/signin\n</code></pre></p> <p>Authentication: Not required</p> <p>Request Body: (Structure needs verification) Likely contains Facebook OAuth token or authorization code.</p> <p>Note: This endpoint needs testing to verify exact request/response format.</p>"},{"location":"authentication/#apple-sign-in","title":"Apple Sign In","text":"<p>Endpoint: <pre><code>POST /v3/apple/signin\n</code></pre></p> <p>Authentication: Not required</p> <p>Request Body: (Structure needs verification) Likely contains Apple ID token or authorization code.</p> <p>Note: This endpoint needs testing to verify exact request/response format.</p>"},{"location":"authentication/#account-management","title":"Account Management","text":""},{"location":"authentication/#delete-account","title":"Delete Account","text":"<p>Permanently deletes a user account.</p> <p>Endpoint: <pre><code>DELETE /v3/accounts/delete\n</code></pre></p> <p>Authentication: Required</p> <p>Request Body: (Structure needs verification) May require password confirmation or other verification.</p> <p>Expected Response: (Structure needs verification)</p> <p>Warning: This action is likely irreversible. Use with extreme caution.</p> <p>Note: This endpoint needs testing to verify exact request/response format.</p>"},{"location":"authentication/#password-management","title":"Password Management","text":""},{"location":"authentication/#set-password","title":"Set Password","text":"<p>Sets a password for an account (possibly for accounts created via social login).</p> <p>Endpoint: <pre><code>POST /v3/profiles/setpassword\n</code></pre></p> <p>Authentication: Required</p> <p>Request Body: (Structure needs verification) <pre><code>{\n  \"password\": \"newpassword123\"\n}\n</code></pre></p> <p>Note: This endpoint needs testing to verify exact request/response format.</p>"},{"location":"authentication/#reset-password","title":"Reset Password","text":"<p>Initiates password reset flow by sending a reset email to the user.</p> <p>Endpoint: <pre><code>POST /v3/profiles/resetpassword\n</code></pre></p> <p>Authentication: Not required (this is for forgotten passwords)</p> <p>Request Body: <pre><code>{\n  \"email\": \"user@example.com\"\n}\n</code></pre></p> <p>Response: Returns 200 OK with user object</p> <p>Example Response: <pre><code>{\n  \"nick\": \"Sirey\",\n  \"created\": \"2019-10-30T20:19:35.6820000Z\",\n  \"isProUser\": true,\n  \"type\": \"Unlimited\",\n  \"isVerified\": false,\n  \"id\": \"5db9f057dfa5102130eaf747\",\n  \"countryCode\": \"gb\"\n}\n</code></pre></p> <p>Important Notes: - Returns 200 OK and user object if email exists - Sends password reset email to the specified address - Email contains a reset link to complete the password change - Does not reveal whether the email exists (returns user object regardless)</p>"},{"location":"authentication/#check-authentication-status","title":"Check Authentication Status","text":"<p>To verify if a user is authenticated, use the profiles endpoint.</p> <p>Endpoint: <pre><code>GET /v3/profiles\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Full profile object if authenticated, 401 if not</p> <p>Usage: <pre><code>async function isAuthenticated() {\n    try {\n        const response = await fetch('https://www.geoguessr.com/api/v3/profiles', {\n            credentials: 'include'\n        });\n        return response.ok;\n    } catch {\n        return false;\n    }\n}\n</code></pre></p> <p>Important Notes: - Use this endpoint to check if the user has a valid session - Returns 401 Unauthorized if not authenticated - Returns full profile object (with <code>user</code> nested inside) if authenticated - The <code>_ncfa</code> cookie is HttpOnly and cannot be accessed from JavaScript</p>"},{"location":"authentication/#data-structures","title":"Data Structures","text":""},{"location":"authentication/#sign-in-response","title":"Sign In Response","text":"<p>The sign-in endpoint returns a complete user object:</p> <pre><code>interface SignInResponse {\n  nick: string;                  // Username\n  created: string;               // Account creation date (ISO 8601)\n  isProUser: boolean;            // Pro subscription status\n  type: string;                  // Account type (\"Unlimited\", \"Pro\", etc.)\n  isVerified: boolean;           // Verified account status\n  pin: {\n    url: string;\n    anchor: string;\n    isDefault: boolean;\n  };\n  id: string;                    // User ID (24-character hex)\n  countryCode: string;           // 2-letter country code\n  progress: {\n    xp: number;\n    level: number;\n    levelXp: number;\n    nextLevel: number;\n    nextLevelXp: number;\n  };\n  competitive: {\n    elo: number;\n    rating: number;\n    lastRatingChange: number;\n    division: {\n      type: number;\n      startRating: number;\n      endRating: number;\n    };\n    onLeaderboard: boolean;\n  };\n  // ... additional user fields (33+ fields total)\n}\n</code></pre> <p>Important: The response is the user object directly, NOT wrapped in a parent object.</p>"},{"location":"authentication/#session-cookies","title":"Session Cookies","text":"<p>After successful authentication, the following cookies are set:</p> <ul> <li><code>_ncfa</code> - Main authentication cookie (HttpOnly, not accessible from JavaScript)</li> <li><code>session</code> - Session information (Base64 encoded, contains SessionId and Expires)</li> <li><code>devicetoken</code> - Device identifier</li> <li><code>g_state</code> - Google state information</li> </ul> <p>Note: The <code>_ncfa</code> cookie is HttpOnly for security and cannot be read by JavaScript.</p>"},{"location":"authentication/#implementation-examples","title":"Implementation Examples","text":""},{"location":"authentication/#example-1-sign-in","title":"Example 1: Sign In","text":"<p>JavaScript: <pre><code>async function signIn(email, password) {\n    const response = await fetch('https://www.geoguessr.com/api/v3/accounts/signin', {\n        method: 'POST',\n        credentials: 'include',  // Important: to receive cookies\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            email: email,\n            password: password\n        })\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    const user = await response.json();\n    console.log(`Signed in as ${user.nick} (Level ${user.progress.level})`);\n    console.log(`Pro user: ${user.isProUser}`);\n\n    // The _ncfa cookie is now set (HttpOnly)\n    // The session cookie is now set\n    return user;\n}\n\n// Usage\n// await signIn('user@example.com', 'password123');\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef sign_in(email, password):\n    url = 'https://www.geoguessr.com/api/v3/accounts/signin'\n\n    payload = {\n        'email': email,\n        'password': password\n    }\n\n    session = requests.Session()\n    response = session.post(url, json=payload)\n    response.raise_for_status()\n\n    user = response.json()\n    print(f\"Signed in as {user['nick']} (Level {user['progress']['level']})\")\n    print(f\"Pro user: {user['isProUser']}\")\n\n    # The session now has the authentication cookies\n    # Use this session for subsequent authenticated requests\n    return session, user\n\n# Usage\n# session, user = sign_in('user@example.com', 'password123')\n</code></pre></p>"},{"location":"authentication/#example-2-check-current-authentication","title":"Example 2: Check Current Authentication","text":"<p>You can verify if you're currently authenticated by fetching your profile:</p> <p>JavaScript: <pre><code>async function checkAuthentication() {\n    try {\n        const response = await fetch('https://www.geoguessr.com/api/v3/profiles', {\n            credentials: 'include'\n        });\n\n        if (response.status === 401) {\n            console.log('Not authenticated');\n            return false;\n        }\n\n        if (response.ok) {\n            const profile = await response.json();\n            console.log('Authenticated as:', profile.user.nick);\n            return true;\n        }\n\n        return false;\n\n    } catch (error) {\n        console.error('Error checking authentication:', error);\n        return false;\n    }\n}\n\n// Usage\ncheckAuthentication();\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef check_authentication(cookie):\n    url = 'https://www.geoguessr.com/api/v3/profiles'\n\n    try:\n        response = requests.get(url, cookies={'_ncfa': cookie})\n\n        if response.status_code == 401:\n            print('Not authenticated')\n            return False\n\n        if response.status_code == 200:\n            profile = response.json()\n            print(f'Authenticated as: {profile[\"user\"][\"nick\"]}')\n            return True\n\n        return False\n\n    except requests.exceptions.RequestException as e:\n        print(f'Error: {e}')\n        return False\n\n# Usage\n# check_authentication('YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"authentication/#common-use-cases","title":"Common Use Cases","text":""},{"location":"authentication/#1-programmatic-login","title":"1. Programmatic Login","text":"<p>For automated scripts that need to authenticate:</p> <pre><code>async function loginAndGetCookie(email, password) {\n    // Sign in\n    const authData = await signIn(email, password);\n\n    // Extract cookie from browser's cookie store\n    const cookies = document.cookie.split(';');\n    const ncfaCookie = cookies.find(c =&gt; c.trim().startsWith('_ncfa='));\n\n    if (ncfaCookie) {\n        const cookieValue = ncfaCookie.split('=')[1];\n        console.log('Authentication cookie:', cookieValue);\n        return cookieValue;\n    }\n\n    throw new Error('Cookie not found after login');\n}\n</code></pre> <p>Warning: Programmatic login may violate GeoGuessr's Terms of Service. This is for educational purposes only.</p>"},{"location":"authentication/#2-session-management","title":"2. Session Management","text":"<p>For long-running applications:</p> <pre><code>class GeoGuessrSession {\n    constructor() {\n        this.authenticated = false;\n    }\n\n    async login(email, password) {\n        await signIn(email, password);\n        this.authenticated = await this.checkAuth();\n        return this.authenticated;\n    }\n\n    async checkAuth() {\n        const response = await fetch('https://www.geoguessr.com/api/v3/profiles', {\n            credentials: 'include'\n        });\n        return response.ok;\n    }\n\n    async makeRequest(url) {\n        if (!this.authenticated) {\n            throw new Error('Not authenticated');\n        }\n\n        return fetch(url, { credentials: 'include' });\n    }\n}\n\n// Usage\n// const session = new GeoGuessrSession();\n// await session.login('user@example.com', 'password123');\n// const response = await session.makeRequest('https://www.geoguessr.com/api/v3/...');\n</code></pre>"},{"location":"authentication/#security-considerations","title":"Security Considerations","text":""},{"location":"authentication/#1-cookie-security","title":"1. Cookie Security","text":"<p>The <code>_ncfa</code> cookie is your session credential: - Never share it publicly - Don't commit it to version control - Treat it like a password - Rotate it regularly by logging out and back in</p>"},{"location":"authentication/#2-password-handling","title":"2. Password Handling","text":"<p>If implementing authentication: - Never log passwords - Use HTTPS only - Don't store passwords in plaintext - Implement rate limiting to prevent brute force</p>"},{"location":"authentication/#3-social-login","title":"3. Social Login","text":"<p>Social login endpoints require OAuth tokens: - Follow OAuth best practices - Validate tokens server-side - Handle token expiration</p>"},{"location":"authentication/#error-handling","title":"Error Handling","text":""},{"location":"authentication/#common-errors","title":"Common Errors","text":"<p>401 Unauthorized - Invalid Credentials: <pre><code>if (response.status === 401) {\n    console.error('Invalid email or password');\n    // Show error to user\n}\n</code></pre></p> <p>429 Too Many Requests - Rate Limited: <pre><code>if (response.status === 429) {\n    console.error('Too many login attempts. Please wait and try again.');\n    // Implement exponential backoff\n}\n</code></pre></p> <p>400 Bad Request - Invalid Format: <pre><code>if (response.status === 400) {\n    console.error('Invalid request format');\n    // Check request body structure\n}\n</code></pre></p>"},{"location":"authentication/#best-practices","title":"Best Practices","text":""},{"location":"authentication/#1-use-environment-variables","title":"1. Use Environment Variables","text":"<p>Never hardcode credentials:</p> <pre><code>// JavaScript\nconst email = process.env.GEOGUESSR_EMAIL;\nconst password = process.env.GEOGUESSR_PASSWORD;\n\n// Python\nimport os\nemail = os.getenv('GEOGUESSR_EMAIL')\npassword = os.getenv('GEOGUESSR_PASSWORD')\n</code></pre>"},{"location":"authentication/#2-implement-retry-logic","title":"2. Implement Retry Logic","text":"<p>Authentication can fail due to network issues:</p> <pre><code>async function signInWithRetry(email, password, maxRetries = 3) {\n    for (let i = 0; i &lt; maxRetries; i++) {\n        try {\n            return await signIn(email, password);\n        } catch (error) {\n            if (i === maxRetries - 1) throw error;\n            console.log(`Retry ${i + 1}/${maxRetries}...`);\n            await sleep(1000 * (i + 1)); // Exponential backoff\n        }\n    }\n}\n</code></pre>"},{"location":"authentication/#3-validate-before-sending","title":"3. Validate Before Sending","text":"<p>Validate inputs before making requests:</p> <pre><code>function validateCredentials(email, password) {\n    if (!email || !email.includes('@')) {\n        throw new Error('Invalid email address');\n    }\n    if (!password || password.length &lt; 6) {\n        throw new Error('Password must be at least 6 characters');\n    }\n}\n</code></pre>"},{"location":"authentication/#testing","title":"Testing","text":"<p>See authentication-testing.md for console commands to test these endpoints.</p> <p>Important: Many of these endpoints cannot be easily tested without potentially logging out or creating test accounts. Exercise caution when testing authentication endpoints.</p>"},{"location":"authentication/#notes-for-documentation-contributors","title":"Notes for Documentation Contributors","text":"<p>The following aspects need verification through testing:</p> <ul> <li>[ ] Exact request body structure for <code>/v3/accounts/signin</code></li> <li>[ ] Response structure for successful sign in</li> <li>[ ] Social login request/response formats</li> <li>[ ] Account deletion confirmation requirements</li> <li>[ ] Password reset flow and response</li> <li>[ ] Set password requirements (minimum length, special characters, etc.)</li> <li>[ ] Error messages and status codes</li> <li>[ ] Rate limiting thresholds</li> <li>[ ] Cookie attributes (_ncfa cookie flags, expiration, etc.)</li> </ul> <p>If you test these endpoints, please document: 1. Complete request structure (headers, body) 2. Complete response structure 3. Error responses for different scenarios 4. Any special behaviors or requirements</p>"},{"location":"challenges/","title":"Challenges API","text":"<p>Endpoints for creating, viewing, and interacting with GeoGuessr challenges.</p>"},{"location":"challenges/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Endpoints</li> <li>Get Challenge Results</li> <li>Get Challenge Info</li> <li>Data Structures</li> <li>Implementation Examples</li> <li>Common Use Cases</li> </ul>"},{"location":"challenges/#overview","title":"Overview","text":"<p>Challenges are custom games that can be shared with other players. Each challenge has a unique token and can contain multiple rounds.</p> <p>\ud83d\ude80 Ready to use? Check out the challenge examples for ready-to-use scripts: - Get Leaderboard - View top players and statistics - Analyze Performance - Compare your score to others - Get Challenge Info - View challenge settings</p> <p>Key Concepts: - Challenge Token: 16-character alphanumeric identifier (e.g., <code>6G9h2UPctmUmUtaa</code>) - Rounds: Typically 5 rounds per challenge - Results: Detailed player-by-player scoring data - Access Restriction: You must have played a challenge to view its detailed results</p>"},{"location":"challenges/#endpoints","title":"Endpoints","text":""},{"location":"challenges/#get-challenge-results","title":"Get Challenge Results","text":"<p>Returns detailed results for all players who completed a challenge, including round-by-round data.</p> <p>Endpoint: <pre><code>GET /v3/results/highscores/{challengeToken}\n</code></pre></p> <p>Parameters: - <code>{challengeToken}</code> (path) - The unique identifier for the challenge</p> <p>Authentication: Required (must have played the challenge)</p> <p>Example Request: <pre><code>fetch('https://www.geoguessr.com/api/v3/results/highscores/6G9h2UPctmUmUtaa', {\n    credentials: 'include'\n})\n</code></pre></p> <p>Response Structure: <pre><code>{\n  \"items\": [\n    {\n      \"game\": {\n        \"token\": \"nZ2NT4HDJW01n4Hd\",\n        \"type\": \"challenge\",\n        \"mode\": \"standard\",\n        \"state\": \"finished\",\n        \"roundCount\": 5,\n        \"timeLimit\": 0,\n        \"forbidMoving\": true,\n        \"forbidZooming\": true,\n        \"forbidRotating\": true,\n        \"streakType\": \"countrystreak\",\n        \"map\": \"6089bfcff6a0770001f645dd\",\n        \"mapName\": \"An Arbitrary World\",\n        \"round\": 5,\n        \"rounds\": [\n          {\n            \"lat\": -6.555895114892618,\n            \"lng\": -78.44216538640902,\n            \"panoId\": \"445842434D466D5773373974514E67575A634A337077\",\n            \"heading\": 224,\n            \"pitch\": 2,\n            \"zoom\": 0,\n            \"streakLocationCode\": \"pe\",\n            \"startTime\": \"2026-01-10T18:11:42.5090000Z\"\n          }\n        ],\n        \"player\": {\n          \"id\": \"59c55f9656b1c23bc81cb742\",\n          \"nick\": \"brbw\",\n          \"isVerified\": false,\n          \"flair\": 0,\n          \"countryCode\": \"us\",\n          \"totalScore\": {\n            \"amount\": \"19570\",\n            \"unit\": \"points\",\n            \"percentage\": 78.28\n          },\n          \"totalDistance\": {\n            \"meters\": {\n              \"amount\": \"2498.6\",\n              \"unit\": \"km\"\n            }\n          },\n          \"totalDistanceInMeters\": 2498561.458729427,\n          \"totalTime\": 96,\n          \"guesses\": [\n            {\n              \"lat\": -12.692075399442235,\n              \"lng\": -75.26799581445442,\n              \"timedOut\": false,\n              \"roundScore\": {\n                \"amount\": \"3305\",\n                \"unit\": \"points\",\n                \"percentage\": 66.1\n              },\n              \"roundScoreInPoints\": 3305,\n              \"distance\": {\n                \"meters\": {\n                  \"amount\": \"765.8\",\n                  \"unit\": \"km\"\n                }\n              },\n              \"distanceInMeters\": 765843.4375052782,\n              \"time\": 34\n            }\n          ]\n        }\n      }\n    }\n  ],\n  \"paginationToken\": null\n}\n</code></pre></p> <p>Important Notes:</p> <ul> <li>Scores are in <code>player.guesses[]</code>, NOT in <code>rounds[]</code></li> <li><code>rounds[]</code> contains only location data</li> <li><code>guesses[]</code> contains player performance (scores, distances, times)</li> <li><code>player.id</code> is the unique player identifier (use this, not nick)</li> <li>Must have played the challenge to access this endpoint</li> </ul>"},{"location":"challenges/#get-challenge-info","title":"Get Challenge Info","text":"<p>Returns basic information about a challenge without player results.</p> <p>Endpoint: <pre><code>GET /v3/challenges/{challengeToken}\n</code></pre></p> <p>Parameters: - <code>{challengeToken}</code> (path) - The unique identifier for the challenge</p> <p>Authentication: Not required for public challenges</p> <p>Example Request: <pre><code>fetch('https://www.geoguessr.com/api/v3/challenges/6G9h2UPctmUmUtaa', {\n    credentials: 'include'\n})\n</code></pre></p> <p>Response Structure: <pre><code>{\n  \"token\": \"6G9h2UPctmUmUtaa\",\n  \"name\": \"Challenge Name\",\n  \"map\": \"6089bfcff6a0770001f645dd\",\n  \"mapName\": \"An Arbitrary World\",\n  \"mode\": \"standard\",\n  \"timeLimit\": 0,\n  \"forbidMoving\": true,\n  \"forbidZooming\": true,\n  \"forbidRotating\": true,\n  \"rounds\": 5,\n  \"creator\": {\n    \"id\": \"5f98ae9e94816c000199aee4\",\n    \"nick\": \"Username\"\n  }\n}\n</code></pre></p> <p>Response Fields: - <code>token</code> - Challenge token - <code>name</code> - Challenge name (if set by creator) - <code>map</code> - Map ID - <code>mapName</code> - Human-readable map name - <code>mode</code> - Game mode (e.g., \"standard\") - <code>timeLimit</code> - Time limit per round in seconds (0 = no limit) - <code>forbidMoving</code> - NMPZ (No Moving) restriction - <code>forbidZooming</code> - NZ (No Zooming) restriction - <code>forbidRotating</code> - NR (No Rotating) restriction - <code>rounds</code> - Number of rounds - <code>creator</code> - Challenge creator information</p>"},{"location":"challenges/#data-structures","title":"Data Structures","text":""},{"location":"challenges/#player-result-object","title":"Player Result Object","text":"<pre><code>interface PlayerResult {\n  game: {\n    token: string;              // Unique game session token\n    type: \"challenge\";\n    mode: string;               // \"standard\", \"moving\", etc.\n    state: \"finished\";\n    roundCount: number;         // Number of rounds (usually 5)\n    timeLimit: number;          // Seconds per round (0 = no limit)\n    forbidMoving: boolean;      // NMPZ restriction\n    forbidZooming: boolean;     // NZ restriction\n    forbidRotating: boolean;    // NR restriction\n    streakType: string;         // e.g., \"countrystreak\"\n    map: string;                // Map ID\n    mapName: string;            // Map name\n    round: number;              // Last round played\n\n    rounds: Round[];            // Location data for each round\n\n    player: {\n      id: string;               // Player UserID (unique identifier)\n      nick: string;             // Display name\n      isVerified: boolean;\n      flair: number;\n      countryCode: string;      // 2-letter ISO country code\n\n      totalScore: {\n        amount: string;         // Total points as string\n        unit: \"points\";\n        percentage: number;     // 0-100\n      };\n\n      totalDistance: {\n        meters: {\n          amount: string;\n          unit: \"km\";\n        };\n      };\n\n      totalDistanceInMeters: number;\n      totalTime: number;        // Total seconds\n\n      guesses: Guess[];         // Array of guesses (scores here!)\n    };\n  };\n}\n\ninterface Round {\n  lat: number;                  // Location latitude\n  lng: number;                  // Location longitude\n  panoId: string;               // Street View panorama ID\n  heading: number;              // Camera heading (0-360)\n  pitch: number;                // Camera pitch\n  zoom: number;                 // Camera zoom level\n  streakLocationCode: string;   // Country code\n  startTime: string;            // ISO 8601 timestamp\n}\n\ninterface Guess {\n  lat: number;                  // Guess latitude\n  lng: number;                  // Guess longitude\n  timedOut: boolean;\n\n  roundScore: {\n    amount: string;\n    unit: \"points\";\n    percentage: number;\n  };\n\n  roundScoreInPoints: number;   // USE THIS for scoring!\n\n  distance: {\n    meters: {\n      amount: string;\n      unit: \"km\";\n    };\n  };\n\n  distanceInMeters: number;     // Distance in meters\n  time: number;                 // Seconds taken\n  stepsCount: number;           // Number of moves\n}\n</code></pre>"},{"location":"challenges/#challenge-token","title":"Challenge Token","text":"<p>Challenge tokens are extracted from challenge URLs:</p> <pre><code>https://www.geoguessr.com/challenge/6G9h2UPctmUmUtaa\n                                    ^^^^^^^^^^^^^^^^\n                                    Challenge Token\n</code></pre> <p>Characteristics: - 16 characters long - Alphanumeric (a-z, A-Z, 0-9) - Case-sensitive - May contain hyphens or underscores</p> <p>Extracting from URL (JavaScript): <pre><code>const url = \"https://www.geoguessr.com/challenge/6G9h2UPctmUmUtaa\";\nconst token = url.split('/').pop();  // \"6G9h2UPctmUmUtaa\"\n\n// Or with regex:\nconst token = url.match(/challenge\\/([a-zA-Z0-9_-]+)/)[1];\n</code></pre></p> <p>Extracting from URL (Python): <pre><code>url = \"https://www.geoguessr.com/challenge/6G9h2UPctmUmUtaa\"\ntoken = url.split('/')[-1]  # \"6G9h2UPctmUmUtaa\"\n\n# Or with regex:\nimport re\nmatch = re.search(r'challenge/([a-zA-Z0-9_-]+)', url)\ntoken = match.group(1) if match else None\n</code></pre></p>"},{"location":"challenges/#implementation-examples","title":"Implementation Examples","text":""},{"location":"challenges/#example-1-get-leaderboard","title":"Example 1: Get Leaderboard","text":"<p>JavaScript: <pre><code>async function getChallengeLeaderboard(challengeToken) {\n    const url = `https://www.geoguessr.com/api/v3/results/highscores/${challengeToken}`;\n\n    const response = await fetch(url, { credentials: 'include' });\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    const data = await response.json();\n\n    // Extract and sort players by total score\n    const leaderboard = data.items.map(item =&gt; {\n        const player = item.game.player;\n        return {\n            userId: player.id,\n            username: player.nick,\n            country: player.countryCode,\n            totalScore: parseInt(player.totalScore.amount),\n            totalTime: player.totalTime,\n            totalDistance: player.totalDistanceInMeters\n        };\n    });\n\n    // Sort by score descending\n    leaderboard.sort((a, b) =&gt; b.totalScore - a.totalScore);\n\n    // Add rank\n    leaderboard.forEach((player, index) =&gt; {\n        player.rank = index + 1;\n    });\n\n    return leaderboard;\n}\n\n// Usage\nconst leaderboard = await getChallengeLeaderboard('6G9h2UPctmUmUtaa');\nconsole.table(leaderboard);\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_challenge_leaderboard(challenge_token, cookie):\n    url = f'https://www.geoguessr.com/api/v3/results/highscores/{challenge_token}'\n\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    response.raise_for_status()\n\n    data = response.json()\n\n    # Extract and process players\n    leaderboard = []\n    for item in data['items']:\n        player = item['game']['player']\n        leaderboard.append({\n            'userId': player['id'],\n            'username': player['nick'],\n            'country': player['countryCode'],\n            'totalScore': int(player['totalScore']['amount']),\n            'totalTime': player['totalTime'],\n            'totalDistance': player['totalDistanceInMeters']\n        })\n\n    # Sort by score descending\n    leaderboard.sort(key=lambda x: x['totalScore'], reverse=True)\n\n    # Add rank\n    for index, player in enumerate(leaderboard):\n        player['rank'] = index + 1\n\n    return leaderboard\n\n# Usage\ncookie = 'YOUR_NCFA_COOKIE'\nleaderboard = get_challenge_leaderboard('6G9h2UPctmUmUtaa', cookie)\nfor player in leaderboard:\n    print(f\"{player['rank']}. {player['username']}: {player['totalScore']} points\")\n</code></pre></p>"},{"location":"challenges/#example-2-calculate-round-winners","title":"Example 2: Calculate Round Winners","text":"<p>JavaScript: <pre><code>async function getRoundWinners(challengeToken) {\n    const url = `https://www.geoguessr.com/api/v3/results/highscores/${challengeToken}`;\n    const response = await fetch(url, { credentials: 'include' });\n    const data = await response.json();\n\n    const roundCount = data.items[0]?.game.roundCount || 5;\n    const roundWinners = [];\n\n    for (let roundIndex = 0; roundIndex &lt; roundCount; roundIndex++) {\n        // Get all scores for this round\n        const roundScores = data.items.map(item =&gt; ({\n            userId: item.game.player.id,\n            username: item.game.player.nick,\n            score: item.game.player.guesses[roundIndex]?.roundScoreInPoints || 0,\n            distance: item.game.player.guesses[roundIndex]?.distanceInMeters || 0,\n            time: item.game.player.guesses[roundIndex]?.time || 0\n        }));\n\n        // Sort by score descending\n        roundScores.sort((a, b) =&gt; b.score - a.score);\n\n        roundWinners.push({\n            round: roundIndex + 1,\n            winner: roundScores[0],\n            top3: roundScores.slice(0, 3)\n        });\n    }\n\n    return roundWinners;\n}\n\n// Usage\nconst roundWinners = await getRoundWinners('6G9h2UPctmUmUtaa');\nroundWinners.forEach(round =&gt; {\n    console.log(`Round ${round.round}: ${round.winner.username} (${round.winner.score} pts)`);\n});\n</code></pre></p> <p>Python: <pre><code>def get_round_winners(challenge_token, cookie):\n    url = f'https://www.geoguessr.com/api/v3/results/highscores/{challenge_token}'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    data = response.json()\n\n    round_count = data['items'][0]['game']['roundCount'] if data['items'] else 5\n    round_winners = []\n\n    for round_index in range(round_count):\n        # Get all scores for this round\n        round_scores = []\n        for item in data['items']:\n            player = item['game']['player']\n            guess = player['guesses'][round_index] if round_index &lt; len(player['guesses']) else None\n\n            round_scores.append({\n                'userId': player['id'],\n                'username': player['nick'],\n                'score': guess['roundScoreInPoints'] if guess else 0,\n                'distance': guess['distanceInMeters'] if guess else 0,\n                'time': guess['time'] if guess else 0\n            })\n\n        # Sort by score descending\n        round_scores.sort(key=lambda x: x['score'], reverse=True)\n\n        round_winners.append({\n            'round': round_index + 1,\n            'winner': round_scores[0],\n            'top3': round_scores[:3]\n        })\n\n    return round_winners\n\n# Usage\nwinners = get_round_winners('6G9h2UPctmUmUtaa', cookie)\nfor round_data in winners:\n    winner = round_data['winner']\n    print(f\"Round {round_data['round']}: {winner['username']} ({winner['score']} pts)\")\n</code></pre></p>"},{"location":"challenges/#example-3-get-player-statistics","title":"Example 3: Get Player Statistics","text":"<p>JavaScript: <pre><code>async function getPlayerStats(challengeToken, userId) {\n    const url = `https://www.geoguessr.com/api/v3/results/highscores/${challengeToken}`;\n    const response = await fetch(url, { credentials: 'include' });\n    const data = await response.json();\n\n    const playerData = data.items.find(item =&gt; item.game.player.id === userId);\n\n    if (!playerData) {\n        throw new Error('Player not found in challenge results');\n    }\n\n    const player = playerData.game.player;\n    const guesses = player.guesses;\n\n    return {\n        username: player.nick,\n        country: player.countryCode,\n        totalScore: parseInt(player.totalScore.amount),\n        totalTime: player.totalTime,\n        totalDistance: player.totalDistanceInMeters,\n\n        // Round-by-round data\n        rounds: guesses.map((guess, index) =&gt; ({\n            round: index + 1,\n            score: guess.roundScoreInPoints,\n            distance: guess.distanceInMeters,\n            time: guess.time,\n            moves: guess.stepsCount || 0\n        })),\n\n        // Statistics\n        averageScore: guesses.reduce((sum, g) =&gt; sum + g.roundScoreInPoints, 0) / guesses.length,\n        bestRound: Math.max(...guesses.map(g =&gt; g.roundScoreInPoints)),\n        worstRound: Math.min(...guesses.map(g =&gt; g.roundScoreInPoints)),\n        perfectGuesses: guesses.filter(g =&gt; g.roundScoreInPoints === 5000).length\n    };\n}\n\n// Usage\nconst stats = await getPlayerStats('6G9h2UPctmUmUtaa', '59c55f9656b1c23bc81cb742');\nconsole.log(`${stats.username}: ${stats.totalScore} points (avg: ${stats.averageScore.toFixed(0)})`);\n</code></pre></p>"},{"location":"challenges/#common-use-cases","title":"Common Use Cases","text":""},{"location":"challenges/#1-building-a-leaderboard-widget","title":"1. Building a Leaderboard Widget","text":"<p>Display real-time challenge leaderboards:</p> <pre><code>async function displayLeaderboard(challengeToken, elementId) {\n    const leaderboard = await getChallengeLeaderboard(challengeToken);\n\n    const html = `\n        &lt;table&gt;\n            &lt;thead&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;Rank&lt;/th&gt;\n                    &lt;th&gt;Player&lt;/th&gt;\n                    &lt;th&gt;Score&lt;/th&gt;\n                    &lt;th&gt;Time&lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n                ${leaderboard.map(player =&gt; `\n                    &lt;tr&gt;\n                        &lt;td&gt;${player.rank}&lt;/td&gt;\n                        &lt;td&gt;${player.username}&lt;/td&gt;\n                        &lt;td&gt;${player.totalScore.toLocaleString()}&lt;/td&gt;\n                        &lt;td&gt;${player.totalTime}s&lt;/td&gt;\n                    &lt;/tr&gt;\n                `).join('')}\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    `;\n\n    document.getElementById(elementId).innerHTML = html;\n}\n</code></pre>"},{"location":"challenges/#2-challenge-comparison","title":"2. Challenge Comparison","text":"<p>Compare performance across multiple challenges:</p> <pre><code>async function comparePlayerAcrossChallenges(userId, challengeTokens) {\n    const results = [];\n\n    for (const token of challengeTokens) {\n        try {\n            const stats = await getPlayerStats(token, userId);\n            results.push({\n                challenge: token,\n                score: stats.totalScore,\n                average: stats.averageScore\n            });\n        } catch (error) {\n            console.error(`Failed to get stats for ${token}:`, error);\n        }\n    }\n\n    return results;\n}\n</code></pre>"},{"location":"challenges/#3-round-by-round-analysis","title":"3. Round-by-Round Analysis","text":"<p>Analyze performance trends across rounds:</p> <pre><code>async function analyzeRoundPerformance(challengeToken, userId) {\n    const url = `https://www.geoguessr.com/api/v3/results/highscores/${challengeToken}`;\n    const response = await fetch(url, { credentials: 'include' });\n    const data = await response.json();\n\n    const playerData = data.items.find(item =&gt; item.game.player.id === userId);\n    const guesses = playerData.game.player.guesses;\n\n    // Calculate performance metrics per round\n    return guesses.map((guess, index) =&gt; ({\n        round: index + 1,\n        score: guess.roundScoreInPoints,\n        scorePercentage: guess.roundScoreInPercentage,\n        distance: (guess.distanceInMeters / 1000).toFixed(1) + ' km',\n        time: guess.time + 's',\n        efficiency: (guess.roundScoreInPoints / guess.time).toFixed(2) // points per second\n    }));\n}\n</code></pre>"},{"location":"challenges/#error-handling","title":"Error Handling","text":""},{"location":"challenges/#common-errors","title":"Common Errors","text":"<p>403 Forbidden - Haven't Played Challenge: <pre><code>if (response.status === 403) {\n    console.error('You must play this challenge before viewing results');\n    // Redirect user to play the challenge\n    window.location.href = `https://www.geoguessr.com/challenge/${challengeToken}`;\n}\n</code></pre></p> <p>404 Not Found - Invalid Token: <pre><code>if (response.status === 404) {\n    console.error('Challenge not found. The token may be invalid or the challenge may have been deleted.');\n}\n</code></pre></p>"},{"location":"challenges/#robust-error-handling-example","title":"Robust Error Handling Example","text":"<pre><code>async function fetchChallengeResultsSafely(challengeToken) {\n    try {\n        const url = `https://www.geoguessr.com/api/v3/results/highscores/${challengeToken}`;\n        const response = await fetch(url, { credentials: 'include' });\n\n        if (response.status === 401) {\n            throw new Error('Authentication failed. Please log in to GeoGuessr.');\n        }\n\n        if (response.status === 403) {\n            throw new Error('You must play this challenge before viewing results.');\n        }\n\n        if (response.status === 404) {\n            throw new Error('Challenge not found.');\n        }\n\n        if (!response.ok) {\n            throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        }\n\n        return await response.json();\n\n    } catch (error) {\n        console.error('Error fetching challenge results:', error);\n        return null;\n    }\n}\n</code></pre>"},{"location":"challenges/#testing","title":"Testing","text":"<p>See challenges-testing.md for console commands to test these endpoints.</p>"},{"location":"duels/","title":"GeoGuessr Duels API","text":"<p>The duels endpoints are hosted on a separate API domain: <code>https://game-server.geoguessr.com/api</code></p> <p>This API provides game state and replay data for both standard duels (1v1) and team duels (2v2).</p> <p>\ud83d\ude80 Ready to use? Check out the duels examples: - JavaScript examples - Browser console - Python examples - Scripts with analysis tools</p>"},{"location":"duels/#overview","title":"Overview","text":"<p>Duels is a competitive game mode where players (or teams) compete head-to-head with a health-based system. Players deal damage to opponents based on score differences, with multipliers increasing as the game progresses. The game ends when one team's health reaches zero.</p>"},{"location":"duels/#key-concepts","title":"Key Concepts","text":"<ul> <li>Health System: Each team starts with a configurable amount of health (typically 6000). Damage is dealt based on score differences.</li> <li>Multipliers: Damage multipliers increase as rounds progress (1x, 1x, 1.5x, 2x, 2.5x, 3x, 3.5x, 4x, etc.), making later rounds more impactful.</li> <li>Teams: Standard duels have 1 player per team, team duels can have multiple players per team.</li> <li>Rounds: Games consist of multiple rounds. The best guess from each team is used to calculate damage.</li> <li>Replay System: Complete player action tracking including camera movements, map interactions, and guess placements.</li> </ul>"},{"location":"duels/#authentication","title":"Authentication","text":"<p>All duels endpoints require authentication via the <code>_ncfa</code> cookie.</p>"},{"location":"duels/#endpoints","title":"Endpoints","text":""},{"location":"duels/#get-duel-game-state","title":"Get Duel Game State","text":"<p>Endpoint: <code>GET /api/duels/{gameId}</code> Base URL: <code>https://game-server.geoguessr.com</code> Authentication: Required Response: Complete game state including teams, players, rounds, and results</p> <p>This endpoint returns the complete state of a duel game, including all player guesses, health changes, round results, and final outcome. Works for both standard duels and team duels.</p> <p>Example Request (JavaScript): <pre><code>/**\n * Fetch complete duel game state\n * @param {string} gameId - The duel game ID\n * @returns {Promise&lt;DuelGame&gt;} Complete game data\n */\nasync function getDuelGameState(gameId) {\n    const url = `https://game-server.geoguessr.com/api/duels/${gameId}`;\n\n    const response = await fetch(url, {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const gameData = await response.json();\n\n    console.log('Game Status:', gameData.status);\n    console.log('Current Round:', gameData.currentRoundNumber);\n    console.log('Winner:', gameData.result.winningTeamId);\n\n    // Display team health\n    gameData.teams.forEach(team =&gt; {\n        console.log(`Team ${team.name}: ${team.health} HP`);\n    });\n\n    return gameData;\n}\n\n// Usage\ngetDuelGameState('6963ff12ec85cd5824375992')\n    .then(data =&gt; console.log('Game data:', data))\n    .catch(err =&gt; console.error('Error:', err));\n</code></pre></p> <p>Example Request (Python): <pre><code>import os\nimport requests\n\ndef get_duel_game_state(game_id: str) -&gt; dict:\n    \"\"\"\n    Fetch complete duel game state.\n\n    Args:\n        game_id: The duel game ID\n\n    Returns:\n        dict: Complete game data\n    \"\"\"\n    url = f\"https://game-server.geoguessr.com/api/duels/{game_id}\"\n\n    cookies = {\n        '_ncfa': os.getenv('GEOGUESSR_COOKIE')\n    }\n\n    response = requests.get(url, cookies=cookies)\n    response.raise_for_status()\n\n    game_data = response.json()\n\n    print(f\"Game Status: {game_data['status']}\")\n    print(f\"Current Round: {game_data['currentRoundNumber']}\")\n    print(f\"Winner: {game_data['result']['winningTeamId']}\")\n\n    # Display team health\n    for team in game_data['teams']:\n        print(f\"Team {team['name']}: {team['health']} HP\")\n\n    return game_data\n\n# Usage\nif __name__ == \"__main__\":\n    game_data = get_duel_game_state('6963ff12ec85cd5824375992')\n    print('Game data retrieved successfully')\n</code></pre></p> <p>Example Response: <pre><code>{\n  \"gameId\": \"6963ff12ec85cd5824375992\",\n  \"status\": \"Finished\",\n  \"currentRoundNumber\": 8,\n  \"teams\": [\n    {\n      \"id\": \"2d25a0c4-5df8-4b7c-93c7-a3a98daa2172\",\n      \"name\": \"blue\",\n      \"health\": 0,\n      \"players\": [...],\n      \"roundResults\": [...],\n      \"isMultiplierActive\": true,\n      \"currentMultiplier\": 3\n    },\n    {\n      \"id\": \"bb08d9e1-d4c7-4287-bf21-4959afd12ca1\",\n      \"name\": \"red\",\n      \"health\": 105,\n      \"players\": [...],\n      \"roundResults\": [...],\n      \"isMultiplierActive\": true,\n      \"currentMultiplier\": 3\n    }\n  ],\n  \"rounds\": [...],\n  \"result\": {\n    \"isDraw\": false,\n    \"winningTeamId\": \"bb08d9e1-d4c7-4287-bf21-4959afd12ca1\",\n    \"winnerStyle\": \"Victory\"\n  },\n  \"options\": {...},\n  \"movementOptions\": {\n    \"forbidMoving\": true,\n    \"forbidZooming\": false,\n    \"forbidRotating\": false\n  },\n  \"mapBounds\": {...},\n  \"initialHealth\": 6000,\n  \"maxNumberOfRounds\": 0,\n  \"isPaused\": false,\n  \"version\": 102\n}\n</code></pre></p> <p>Important Notes: - The same endpoint structure is used for both standard duels and team duels - Team duels have multiple players per team with <code>isTeamDuels: true</code> in options - The <code>version</code> field increments with each game state update - <code>maxNumberOfRounds: 0</code> means unlimited rounds until one team's health reaches zero - Winner style can be \"Victory\", \"ComebackVictory\", or check for \"isDraw\"</p>"},{"location":"duels/#get-duel-replay","title":"Get Duel Replay","text":"<p>Endpoint: <code>GET /api/replays/{playerId}/{duelId}/{roundNumber}</code> Base URL: <code>https://game-server.geoguessr.com</code> Authentication: Required Response: Array of replay events with timestamps</p> <p>Returns a complete replay of a specific player's actions during a round, including camera movements, map interactions, and guess placement. Useful for analyzing player behavior or creating replay visualizations.</p> <p>Example Request (JavaScript): <pre><code>/**\n * Fetch replay data for a specific player and round\n * @param {string} playerId - The player's user ID\n * @param {string} duelId - The duel game ID\n * @param {number} roundNumber - The round number (1-indexed)\n * @returns {Promise&lt;ReplayEvent[]&gt;} Array of replay events\n */\nasync function getDuelReplay(playerId, duelId, roundNumber) {\n    const url = `https://game-server.geoguessr.com/api/replays/${playerId}/${duelId}/${roundNumber}`;\n\n    const response = await fetch(url, {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const replayEvents = await response.json();\n\n    console.log(`Total events: ${replayEvents.length}`);\n\n    // Analyze event types\n    const eventTypes = {};\n    replayEvents.forEach(event =&gt; {\n        eventTypes[event.type] = (eventTypes[event.type] || 0) + 1;\n    });\n\n    console.log('Event types:', eventTypes);\n\n    // Find the final guess\n    const guessEvent = replayEvents.find(e =&gt; e.type === 'GuessWithLatLng');\n    if (guessEvent) {\n        console.log('Final guess:', guessEvent.payload);\n    }\n\n    return replayEvents;\n}\n\n// Usage\ngetDuelReplay('5b68bcc7f438a60f64005817', '6963ff12ec85cd5824375992', 1)\n    .then(events =&gt; console.log('Replay events:', events))\n    .catch(err =&gt; console.error('Error:', err));\n</code></pre></p> <p>Example Request (Python): <pre><code>import os\nimport requests\nfrom typing import List, Dict\n\ndef get_duel_replay(player_id: str, duel_id: str, round_number: int) -&gt; List[Dict]:\n    \"\"\"\n    Fetch replay data for a specific player and round.\n\n    Args:\n        player_id: The player's user ID\n        duel_id: The duel game ID\n        round_number: The round number (1-indexed)\n\n    Returns:\n        list: Array of replay events with timestamps\n    \"\"\"\n    url = f\"https://game-server.geoguessr.com/api/replays/{player_id}/{duel_id}/{round_number}\"\n\n    cookies = {\n        '_ncfa': os.getenv('GEOGUESSR_COOKIE')\n    }\n\n    response = requests.get(url, cookies=cookies)\n    response.raise_for_status()\n\n    replay_events = response.json()\n\n    print(f\"Total events: {len(replay_events)}\")\n\n    # Analyze event types\n    event_types = {}\n    for event in replay_events:\n        event_type = event['type']\n        event_types[event_type] = event_types.get(event_type, 0) + 1\n\n    print('Event types:', event_types)\n\n    # Find the final guess\n    guess_events = [e for e in replay_events if e['type'] == 'GuessWithLatLng']\n    if guess_events:\n        print('Final guess:', guess_events[0]['payload'])\n\n    return replay_events\n\n# Usage\nif __name__ == \"__main__\":\n    events = get_duel_replay('5b68bcc7f438a60f64005817', '6963ff12ec85cd5824375992', 1)\n    print(f'Retrieved {len(events)} replay events')\n</code></pre></p> <p>Example Response: <pre><code>[\n  {\n    \"time\": 1768161047513,\n    \"type\": \"PanoPosition\",\n    \"payload\": {\n      \"lat\": -37.70238286995826,\n      \"lng\": 142.48918578117917,\n      \"panoId\": \"nyfpaD0EKB_tBJbCAy7acA\"\n    }\n  },\n  {\n    \"time\": 1768161047513,\n    \"type\": \"PanoPov\",\n    \"payload\": {\n      \"heading\": 164.00824,\n      \"pitch\": 0.5\n    }\n  },\n  {\n    \"time\": 1768161047513,\n    \"type\": \"PanoZoom\",\n    \"payload\": {\n      \"zoom\": 0.16992569\n    }\n  },\n  {\n    \"time\": 1768161054395,\n    \"type\": \"MapDisplay\",\n    \"payload\": {\n      \"isActive\": true,\n      \"isSticky\": false,\n      \"size\": 3\n    }\n  },\n  {\n    \"time\": 1768161056606,\n    \"type\": \"PinPosition\",\n    \"payload\": {\n      \"lat\": -37.59225,\n      \"lng\": 142.953\n    }\n  },\n  {\n    \"time\": 1768161065112,\n    \"type\": \"GuessWithLatLng\",\n    \"payload\": {\n      \"lat\": -37.95357,\n      \"lng\": 142.85567\n    }\n  }\n]\n</code></pre></p> <p>Replay Event Types: - <code>PanoPosition</code> - Panorama location change (with panoId, lat, lng) - <code>PanoPov</code> - Camera heading/pitch change - <code>PanoZoom</code> - Panorama zoom level change - <code>MapDisplay</code> - Map opened/closed (with size and sticky state) - <code>MapPosition</code> - Map panning (lat/lng change) - <code>MapZoom</code> - Map zoom level change - <code>PinPosition</code> - Guess pin placement/movement - <code>GuessWithLatLng</code> - Final guess submission</p> <p>Important Notes: - All times are Unix timestamps in milliseconds - Events are ordered chronologically - The round number is 1-indexed (first round is 1, not 0) - Works for both standard duels and team duels - Not all players may have replay data if they timed out or disconnected</p>"},{"location":"duels/#data-structures","title":"Data Structures","text":""},{"location":"duels/#duelgame","title":"DuelGame","text":"<p>Complete duel game state.</p> <pre><code>interface DuelGame {\n  gameId: string;\n  teams: DuelTeam[];\n  rounds: DuelRound[];\n  currentRoundNumber: number;\n  status: \"InProgress\" | \"Finished\" | \"Paused\";\n  version: number;\n  options: DuelOptions;\n  movementOptions: MovementOptions;\n  mapBounds: MapBounds;\n  initialHealth: number;\n  maxNumberOfRounds: number;\n  result: DuelResult;\n  isPaused: boolean;\n  gameServerNodeId: string | null;\n  tournamentId: string;\n}\n</code></pre>"},{"location":"duels/#duelteam","title":"DuelTeam","text":"<p>Team data including players and round results.</p> <pre><code>interface DuelTeam {\n  id: string;\n  name: \"blue\" | \"red\";\n  health: number;\n  players: DuelPlayer[];\n  roundResults: TeamRoundResult[];\n  isMultiplierActive: boolean;\n  currentMultiplier: number;\n}\n</code></pre>"},{"location":"duels/#duelplayer","title":"DuelPlayer","text":"<p>Player data within a duel.</p> <pre><code>interface DuelPlayer {\n  playerId: string;\n  guesses: DuelGuess[];\n  rating: number;\n  countryCode: string;\n  progressChange: ProgressChange;\n  pin: {\n    lat: number;\n    lng: number;\n  };\n  helpRequested: boolean;\n  isSteam: boolean;\n}\n</code></pre>"},{"location":"duels/#duelguess","title":"DuelGuess","text":"<p>Individual guess in a duel round.</p> <pre><code>interface DuelGuess {\n  roundNumber: number;\n  lat: number;\n  lng: number;\n  distance: number;\n  created: string; // ISO 8601 timestamp\n  isTeamsBestGuessOnRound: boolean;\n  score: number | null; // null if not the team's best guess\n}\n</code></pre>"},{"location":"duels/#teamroundresult","title":"TeamRoundResult","text":"<p>Team's result for a specific round.</p> <pre><code>interface TeamRoundResult {\n  roundNumber: number;\n  score: number;\n  healthBefore: number;\n  healthAfter: number;\n  bestGuess: DuelGuess;\n  activeMultiplier: boolean;\n  damageDealt: number;\n  multiplier: number;\n}\n</code></pre>"},{"location":"duels/#duelround","title":"DuelRound","text":"<p>Round configuration and timing.</p> <pre><code>interface DuelRound {\n  roundNumber: number;\n  panorama: {\n    panoId: string;\n    lat: number;\n    lng: number;\n    countryCode: string;\n    heading: number;\n    pitch: number;\n    zoom: number;\n  };\n  hasProcessedRoundTimeout: boolean;\n  isHealingRound: boolean;\n  multiplier: number;\n  damageMultiplier: number;\n  startTime: string | null; // ISO 8601 timestamp\n  endTime: string | null; // ISO 8601 timestamp\n  timerStartTime: string | null; // ISO 8601 timestamp\n}\n</code></pre>"},{"location":"duels/#dueloptions","title":"DuelOptions","text":"<p>Game configuration options.</p> <pre><code>interface DuelOptions {\n  initialHealth: number;\n  individualInitialHealth: boolean;\n  initialHealthTeamOne: number;\n  initialHealthTeamTwo: number;\n  roundTime: number; // seconds per round\n  maxRoundTime: number;\n  gracePeriodTime: number;\n  gameTimeOut: number;\n  maxNumberOfRounds: number; // 0 = unlimited\n  healingRounds: number[]; // array of round numbers\n  movementOptions: MovementOptions;\n  mapSlug: string;\n  isRated: boolean;\n  map: {\n    name: string;\n    slug: string;\n    bounds: MapBounds;\n    maxErrorDistance: number;\n  };\n  duelRoundOptions: any[];\n  roundsWithoutDamageMultiplier: number;\n  disableMultipliers: boolean;\n  multiplierIncrement: number;\n  disableHealing: boolean;\n  isTeamDuels: boolean;\n  gameContext: {\n    type: string;\n    id: string;\n  } | null;\n  roundStartingBehavior: string;\n  flashbackRounds: number[];\n  competitiveGameMode: \"NoMoveDuels\" | \"MoveDuels\" | \"None\";\n  countAllGuesses: boolean;\n  masterControlAutoStartRounds: boolean;\n  consumedLocationsIdentifier: string;\n  useCuratedLocations: boolean;\n  extraWaitTimeBetweenRounds: number;\n  roundCountdownDelay: number;\n  guessMapType: string;\n  botBehaviors: any | null;\n  activeMultiplier: boolean;\n}\n</code></pre>"},{"location":"duels/#movementoptions","title":"MovementOptions","text":"<p>Movement restrictions for the game.</p> <pre><code>interface MovementOptions {\n  forbidMoving: boolean;    // NMPZ (No Move, Pan, Zoom)\n  forbidZooming: boolean;    // NZ (No Zoom)\n  forbidRotating: boolean;   // NR (No Rotate)\n}\n</code></pre>"},{"location":"duels/#duelresult","title":"DuelResult","text":"<p>Game outcome.</p> <pre><code>interface DuelResult {\n  isDraw: boolean;\n  winningTeamId: string;\n  winnerStyle: \"Victory\" | \"ComebackVictory\";\n}\n</code></pre>"},{"location":"duels/#progresschange","title":"ProgressChange","text":"<p>Player progression data (XP, rating, etc.).</p> <pre><code>interface ProgressChange {\n  xpProgressions: Array&lt;{\n    xp: number;\n    currentLevel: {\n      level: number;\n      xpStart: number;\n    };\n    nextLevel: {\n      level: number;\n      xpStart: number;\n    };\n    currentTitle: {\n      id: number;\n      tierId: number;\n    };\n  }&gt;;\n  awardedXp: {\n    totalAwardedXp: number;\n    xpAwards: Array&lt;{\n      xp: number;\n      reason: \"DuelCompleted\" | \"Marathon\" | \"HpBonus\";\n      count: number;\n    }&gt;;\n  };\n  medal: \"None\" | string;\n  competitiveProgress: any | null;\n  rankedSystemProgress: RankedProgress | null;\n  rankedTeamDuelsProgress: any | null;\n  quickplayDuelsProgress: any | null;\n}\n</code></pre>"},{"location":"duels/#rankedprogress","title":"RankedProgress","text":"<p>Ranked duel progression data.</p> <pre><code>interface RankedProgress {\n  points: Record&lt;string, any&gt;;\n  totalWeeklyPoints: number;\n  weeklyCap: number;\n  gamesPlayedWithinWeeklyCap: number;\n  positionBefore: number;\n  positionAfter: number;\n  ratingBefore: number;\n  ratingAfter: number;\n  winStreak: number;\n  bucketSortedBy: \"Rating\";\n  gameMode: \"NoMoveDuels\" | \"MoveDuels\";\n  gameModeRatingBefore: number;\n  gameModeRatingAfter: number;\n  gameModeGamesPlayed: number;\n  gameModeGamesRequired: number;\n  placementGamesPlayed: number;\n  placementGamesRequired: number;\n}\n</code></pre>"},{"location":"duels/#mapbounds","title":"MapBounds","text":"<p>Map boundary coordinates.</p> <pre><code>interface MapBounds {\n  min: {\n    lat: number;\n    lng: number;\n  };\n  max: {\n    lat: number;\n    lng: number;\n  };\n}\n</code></pre>"},{"location":"duels/#replayevent","title":"ReplayEvent","text":"<p>Replay event with timestamp and payload.</p> <pre><code>interface ReplayEvent {\n  time: number; // Unix timestamp in milliseconds\n  type: ReplayEventType;\n  payload: any; // Structure varies by event type\n}\n\ntype ReplayEventType =\n  | \"PanoPosition\"\n  | \"PanoPov\"\n  | \"PanoZoom\"\n  | \"MapDisplay\"\n  | \"MapPosition\"\n  | \"MapZoom\"\n  | \"PinPosition\"\n  | \"GuessWithLatLng\";\n</code></pre>"},{"location":"duels/#replay-event-payloads","title":"Replay Event Payloads","text":"<p>PanoPosition: <pre><code>{\n  lat: number;\n  lng: number;\n  panoId: string;\n}\n</code></pre></p> <p>PanoPov: <pre><code>{\n  heading: number;\n  pitch: number;\n}\n</code></pre></p> <p>PanoZoom: <pre><code>{\n  zoom: number;\n}\n</code></pre></p> <p>MapDisplay: <pre><code>{\n  isActive: boolean;\n  isSticky: boolean;\n  size: number;\n}\n</code></pre></p> <p>MapPosition: <pre><code>{\n  lat: number;\n  lng: number;\n}\n</code></pre></p> <p>MapZoom: <pre><code>{\n  zoom: number;\n}\n</code></pre></p> <p>PinPosition: <pre><code>{\n  lat: number;\n  lng: number;\n}\n</code></pre></p> <p>GuessWithLatLng: <pre><code>{\n  lat: number;\n  lng: number;\n}\n</code></pre></p>"},{"location":"duels/#error-responses","title":"Error Responses","text":""},{"location":"duels/#401-unauthorized","title":"401 Unauthorized","text":"<p><pre><code>{\n  \"error\": \"Unauthorized\"\n}\n</code></pre> Authentication required. Ensure <code>_ncfa</code> cookie is valid and included.</p>"},{"location":"duels/#404-not-found","title":"404 Not Found","text":"<p><pre><code>{\n  \"error\": \"Game not found\"\n}\n</code></pre> The game ID doesn't exist or you don't have permission to view it.</p>"},{"location":"duels/#notes","title":"Notes","text":"<ul> <li>Separate API Domain: Duels API is on <code>game-server.geoguessr.com</code>, not <code>www.geoguessr.com</code></li> <li>Game IDs: Can be found in duel game URLs or from the main GeoGuessr API endpoints</li> <li>Team Colors: Always \"blue\" and \"red\"</li> <li>Health System: Damage calculation is based on score differences and active multipliers</li> <li>Multipliers: Increase with specific rounds (typically every few rounds), making late-game rounds critical</li> <li>Healing Rounds: Some game modes have designated healing rounds (e.g., round 5) where teams can recover health</li> <li>Movement Options: NMPZ (No Move, Pan, Zoom) is common in competitive duels</li> <li>Replay Data: Complete action history allows for detailed analysis and replay visualization</li> <li>Team Duels: Use <code>isTeamDuels: true</code> in options, with multiple players per team</li> <li>Rating Changes: Included in <code>progressChange.rankedSystemProgress</code> for ranked games</li> <li>Game Versions: The <code>version</code> field increments with each state update</li> </ul>"},{"location":"duels/#related-endpoints","title":"Related Endpoints","text":"<p>For creating duels and finding games, see: - Games Endpoints - Creating and managing games - Profiles Endpoints - Getting player IDs for replay data - Maps Endpoints - Getting map slugs for game options</p>"},{"location":"feed/","title":"Feed &amp; Activity API","text":"<p>Endpoints for viewing activity feeds and recent games.</p>"},{"location":"feed/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Endpoints</li> <li>Implementation Examples</li> </ul>"},{"location":"feed/#overview","title":"Overview","text":"<p>Feed endpoints provide activity streams showing recent games, achievements, and social interactions.</p> <p>\ud83d\ude80 Ready to use? Check out the feed examples for ready-to-use scripts: - Get Friends Activity - View recent games and activities from friends</p>"},{"location":"feed/#endpoints","title":"Endpoints","text":""},{"location":"feed/#friends-feed","title":"Friends Feed","text":"<p>Returns paginated activity feed showing recent games and activities from friends.</p> <p>Endpoint: <pre><code>GET /v4/feed/friends\n</code></pre></p> <p>Parameters: - <code>paginationToken</code> (optional) - Token for next page of results</p> <p>Authentication: Required</p> <p>Response: Object with entries array and pagination token</p> <p>Example Response: <pre><code>{\n  \"entries\": [\n    {\n      \"type\": 6,\n      \"time\": \"2026-01-10T23:54:38.8070000Z\",\n      \"user\": {\n        \"id\": \"62eed3439a1387b217f5832d\",\n        \"nick\": \"Baumi_geo\",\n        \"isVerified\": false,\n        \"flair\": 1,\n        \"avatar\": {\n          \"url\": \"pin/48fe421b7cd6be62178d5473e8ce9303.png\",\n          \"anchor\": \"center-center\",\n          \"isDefault\": false\n        }\n      },\n      \"payload\": \"{\\\"gameId\\\":\\\"6962e5f93137693efd1a1934\\\",\\\"gameMode\\\":\\\"Duels\\\",\\\"competitiveGameMode\\\":\\\"NmpzDuels\\\"}\"\n    },\n    {\n      \"type\": 2,\n      \"time\": \"2026-01-10T23:52:29.8430000Z\",\n      \"user\": {\n        \"id\": \"68cb3fdf6f672817f40cf951\",\n        \"nick\": \"xxfeetluver69 \ud83e\udd24\ud83d\udc45\ud83e\uddb6\",\n        \"isVerified\": false,\n        \"flair\": 0,\n        \"avatar\": {\n          \"url\": \"pin/0129cf1d31e8148ad599d34a1547a586.png\",\n          \"anchor\": \"center-center\",\n          \"isDefault\": false\n        }\n      },\n      \"payload\": \"{\\\"mapSlug\\\":\\\"world\\\",\\\"mapName\\\":\\\"World\\\",\\\"points\\\":462,\\\"challengeToken\\\":\\\"EtWujm3fioJMP5d0\\\",\\\"gameMode\\\":\\\"Standard\\\",\\\"isDailyChallenge\\\":false}\"\n    }\n  ],\n  \"paginationToken\": \"eyJDcmVhdGVkIjp7IlMiOiIyMDI2LTAxLTEwVDIyOjQ4OjUyLjkwNloifSwiSGFzaEtleSI6eyJTIjoiNWRiOWYwNTdkZmE1MTAyMTMwZWFmNzQ3X2ZyaWVuZHMifX0=\"\n}\n</code></pre></p> <p>Important Notes: - Returns ~31 entries per page - Use <code>paginationToken</code> for next page: <code>/v4/feed/friends?paginationToken=...</code> - <code>type</code> is numeric (see Activity Types section) - <code>payload</code> is a JSON string that needs parsing - Results ordered by most recent first</p>"},{"location":"feed/#private-feed","title":"Private Feed","text":"<p>Get the authenticated user's private activity feed.</p> <p>Endpoint: <pre><code>GET /v4/feed/private\n</code></pre></p> <p>Authentication: Required</p> <p>Expected Response: (Structure needs verification) Similar to friends feed but includes personal activities and notifications.</p> <p>Example Request: <pre><code>fetch('https://www.geoguessr.com/api/v4/feed/private', {\n    credentials: 'include'\n})\n</code></pre></p>"},{"location":"feed/#likes","title":"Likes","text":"<p>Get or manage likes on maps and content.</p> <p>Endpoint: <pre><code>GET /v3/likes\n</code></pre></p> <p>Authentication: Required</p> <p>Expected Response: (Structure needs verification) List of maps or content the user has liked.</p> <p>Example Request: <pre><code>fetch('https://www.geoguessr.com/api/v3/likes', {\n    credentials: 'include'\n})\n</code></pre></p>"},{"location":"feed/#data-structures","title":"Data Structures","text":""},{"location":"feed/#feed-response-object","title":"Feed Response Object","text":"<pre><code>interface FeedResponse {\n  entries: FeedEntry[];         // Array of feed entries\n  paginationToken: string;      // Token for next page (base64 encoded)\n}\n</code></pre>"},{"location":"feed/#feed-entry-object","title":"Feed Entry Object","text":"<p>Complete feed entry structure:</p> <pre><code>interface FeedEntry {\n  type: number;                 // Activity type (numeric: 2, 6, 7, 9, 11, etc.)\n  time: string;                 // ISO 8601 timestamp\n  user: {\n    id: string;                 // User ID (24-character hex)\n    nick: string;               // Username\n    isVerified: boolean;        // Verified status\n    flair: number;              // Flair level\n    avatar: {\n      url: string;              // Avatar image URL\n      anchor: string;           // \"center-center\"\n      isDefault: boolean;       // Whether using default avatar\n    };\n  };\n  payload: string;              // JSON string containing activity data (needs parsing)\n}\n</code></pre>"},{"location":"feed/#payload-structures","title":"Payload Structures","text":"<p>The <code>payload</code> field is a JSON string that varies by activity type. Parse it with <code>JSON.parse()</code>.</p> <p>Type 2 - Standard Game Completed: <pre><code>interface Type2Payload {\n  mapSlug: string;              // Map identifier\n  mapName: string;              // Map display name\n  points: number;               // Score achieved\n  challengeToken: string;       // Challenge token\n  gameMode: string;             // \"Standard\"\n  isDailyChallenge: boolean;    // Whether daily challenge\n}\n</code></pre></p> <p>Type 6 - Competitive Game (Duels): <pre><code>interface Type6Payload {\n  gameId: string;               // Game identifier\n  gameMode: string;             // \"Duels\"\n  competitiveGameMode: string;  // \"NmpzDuels\", \"NoMoveDuels\", \"StandardDuels\"\n}\n</code></pre></p> <p>Type 9 - Party Game: <pre><code>interface Type9Payload {\n  gameId: string;               // Game UUID\n  partyId: string;              // Party UUID\n  gameMode: string;             // \"Bullseye\", \"Duels\", etc.\n}\n</code></pre></p> <p>Type 11 - Competitive Game Result: <pre><code>interface Type11Payload {\n  gameId: string;               // Game identifier\n  gameMode: string;             // \"Duels\"\n  competitiveGameMode: string;  // Duel mode type\n}\n</code></pre></p> <p>Type 7 - Batch Activity: <pre><code>// Payload is an array of activities (JSON string of array)\ntype Type7Payload = Array&lt;{\n  type: number;\n  time: string;\n  payload: object;\n}&gt;;\n</code></pre></p>"},{"location":"feed/#implementation-examples","title":"Implementation Examples","text":""},{"location":"feed/#example-1-get-friends-feed","title":"Example 1: Get Friends Feed","text":"<p>JavaScript: <pre><code>async function getFriendsFeed(paginationToken = null) {\n    const url = paginationToken\n        ? `https://www.geoguessr.com/api/v4/feed/friends?paginationToken=${encodeURIComponent(paginationToken)}`\n        : 'https://www.geoguessr.com/api/v4/feed/friends';\n\n    const response = await fetch(url, {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const data = await response.json();\n    console.log(`Found ${data.entries.length} activities from friends`);\n\n    data.entries.forEach(entry =&gt; {\n        console.log(`[${entry.time}] ${entry.user.nick}: Type ${entry.type}`);\n\n        // Parse payload for more details\n        const payload = JSON.parse(entry.payload);\n        if (entry.type === 2) {\n            console.log(`  \u2192 Scored ${payload.points} on ${payload.mapName}`);\n        } else if (entry.type === 6 || entry.type === 11) {\n            console.log(`  \u2192 Played ${payload.competitiveGameMode}`);\n        }\n    });\n\n    return data;\n}\n\n// Usage\nconst feed = await getFriendsFeed();\n\n// Get next page\nif (feed.paginationToken) {\n    const nextPage = await getFriendsFeed(feed.paginationToken);\n}\n</code></pre></p> <p>Python: <pre><code>import requests\nimport json\n\ndef get_friends_feed(cookie, pagination_token=None):\n    url = 'https://www.geoguessr.com/api/v4/feed/friends'\n    params = {}\n    if pagination_token:\n        params['paginationToken'] = pagination_token\n\n    response = requests.get(url, cookies={'_ncfa': cookie}, params=params)\n    response.raise_for_status()\n\n    data = response.json()\n    print(f\"Found {len(data['entries'])} activities from friends\")\n\n    for entry in data['entries']:\n        user = entry['user']['nick']\n        activity_type = entry['type']\n        timestamp = entry['time']\n        print(f\"[{timestamp}] {user}: Type {activity_type}\")\n\n        # Parse payload for more details\n        payload = json.loads(entry['payload'])\n        if activity_type == 2:\n            print(f\"  \u2192 Scored {payload['points']} on {payload['mapName']}\")\n        elif activity_type in [6, 11]:\n            print(f\"  \u2192 Played {payload['competitiveGameMode']}\")\n\n    return data\n\n# Usage\n# feed = get_friends_feed('YOUR_NCFA_COOKIE')\n\n# Get next page\n# if 'paginationToken' in feed:\n#     next_page = get_friends_feed('YOUR_NCFA_COOKIE', feed['paginationToken'])\n</code></pre></p>"},{"location":"feed/#example-2-get-private-feed","title":"Example 2: Get Private Feed","text":"<p>JavaScript: <pre><code>async function getPrivateFeed() {\n    const response = await fetch('https://www.geoguessr.com/api/v4/feed/private', {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const feed = await response.json();\n    console.log(`You have ${feed.length} activities`);\n    return feed;\n}\n\n// Usage\nconst myActivity = await getPrivateFeed();\n</code></pre></p>"},{"location":"feed/#example-3-display-activity-feed","title":"Example 3: Display Activity Feed","text":"<p>JavaScript: <pre><code>async function displayActivityFeed() {\n    const feedData = await getFriendsFeed();\n\n    const html = feedData.entries.map(entry =&gt; {\n        const date = new Date(entry.time).toLocaleString();\n        const payload = JSON.parse(entry.payload);\n\n        switch (entry.type) {\n            case 2: // Standard game completed\n                return `\n                    &lt;div class=\"feed-item\"&gt;\n                        &lt;strong&gt;${entry.user.nick}&lt;/strong&gt; scored ${payload.points} points on ${payload.mapName}\n                        &lt;span class=\"time\"&gt;${date}&lt;/span&gt;\n                    &lt;/div&gt;\n                `;\n            case 6: // Competitive game\n                return `\n                    &lt;div class=\"feed-item\"&gt;\n                        &lt;strong&gt;${entry.user.nick}&lt;/strong&gt; started a ${payload.competitiveGameMode} game\n                        &lt;span class=\"time\"&gt;${date}&lt;/span&gt;\n                    &lt;/div&gt;\n                `;\n            case 9: // Party game\n                return `\n                    &lt;div class=\"feed-item\"&gt;\n                        &lt;strong&gt;${entry.user.nick}&lt;/strong&gt; is playing ${payload.gameMode}\n                        &lt;span class=\"time\"&gt;${date}&lt;/span&gt;\n                    &lt;/div&gt;\n                `;\n            case 11: // Competitive game result\n                return `\n                    &lt;div class=\"feed-item\"&gt;\n                        &lt;strong&gt;${entry.user.nick}&lt;/strong&gt; finished a ${payload.competitiveGameMode} game\n                        &lt;span class=\"time\"&gt;${date}&lt;/span&gt;\n                    &lt;/div&gt;\n                `;\n            default:\n                return `\n                    &lt;div class=\"feed-item\"&gt;\n                        &lt;strong&gt;${entry.user.nick}&lt;/strong&gt; - Activity type ${entry.type}\n                        &lt;span class=\"time\"&gt;${date}&lt;/span&gt;\n                    &lt;/div&gt;\n                `;\n        }\n    }).join('');\n\n    return html;\n}\n</code></pre></p>"},{"location":"feed/#common-use-cases","title":"Common Use Cases","text":""},{"location":"feed/#1-activity-dashboard","title":"1. Activity Dashboard","text":"<pre><code>async function getActivityDashboard() {\n    const friendsFeed = await getFriendsFeed();\n\n    return {\n        friends: friendsFeed.entries.slice(0, 10), // Latest 10 from friends\n        total: friendsFeed.entries.length,\n        hasMore: !!friendsFeed.paginationToken\n    };\n}\n\n// Usage\n// const dashboard = await getActivityDashboard();\n</code></pre>"},{"location":"feed/#2-get-all-feed-pages","title":"2. Get All Feed Pages","text":"<pre><code>async function getAllFeedEntries(maxPages = 5) {\n    let allEntries = [];\n    let paginationToken = null;\n    let page = 0;\n\n    while (page &lt; maxPages) {\n        const feedData = await getFriendsFeed(paginationToken);\n        allEntries.push(...feedData.entries);\n\n        if (!feedData.paginationToken) {\n            break; // No more pages\n        }\n\n        paginationToken = feedData.paginationToken;\n        page++;\n    }\n\n    console.log(`Fetched ${allEntries.length} entries across ${page + 1} pages`);\n    return allEntries;\n}\n\n// Usage\n// const allActivities = await getAllFeedEntries(5);\n</code></pre>"},{"location":"feed/#3-filter-feed-by-activity-type","title":"3. Filter Feed by Activity Type","text":"<pre><code>function filterFeedByType(entries, activityType) {\n    return entries.filter(entry =&gt; entry.type === activityType);\n}\n\n// Usage\n// const feedData = await getFriendsFeed();\n// const standardGames = filterFeedByType(feedData.entries, 2); // Type 2 = standard games\n// const duels = filterFeedByType(feedData.entries, 6); // Type 6 = competitive games\n// const partyGames = filterFeedByType(feedData.entries, 9); // Type 9 = party games\n</code></pre>"},{"location":"feed/#testing","title":"Testing","text":"<p>See feed-testing.md for console commands to test these endpoints.</p>"},{"location":"feed/#notes-for-documentation-contributors","title":"Notes for Documentation Contributors","text":"<p>Verified: - [x] Complete feed response structure (entries array + paginationToken) - [x] Feed entry structure (type, time, user, payload) - [x] Pagination support (~31 entries per page) - [x] Activity types 2, 6, 7, 9, 11 documented - [x] Payload structure varies by type (JSON string needs parsing) - [x] User object structure in feed entries - [x] Payload structures for types 2, 6, 9, 11</p> <p>Still needs verification: - [ ] Private feed endpoint structure (/v4/feed/private) - [ ] All activity types (only 2, 6, 7, 9, 11 verified) - [ ] Time range filtering capabilities - [ ] Feed refresh rate limits - [ ] Notification preferences endpoints - [ ] Like/unlike endpoints structure - [ ] Comment functionality (if exists) - [ ] Share functionality endpoints</p>"},{"location":"feed/#activity-types","title":"Activity Types","text":"<p>Activity types are represented as numeric values:</p> <p>Verified Types: - <code>2</code> - Standard game completed (contains: mapSlug, mapName, points, challengeToken, gameMode, isDailyChallenge) - <code>6</code> - Competitive game started/in progress (contains: gameId, gameMode \"Duels\", competitiveGameMode) - <code>7</code> - Batch activity (payload is array of multiple activities) - <code>9</code> - Party game activity (contains: gameId, partyId, gameMode like \"Bullseye\") - <code>11</code> - Competitive game result/completed (contains: gameId, gameMode, competitiveGameMode)</p> <p>Competitive Game Modes (seen in Type 6/11): - <code>NmpzDuels</code> - No move, pan, zoom duels - <code>NoMoveDuels</code> - No movement duels - <code>StandardDuels</code> - Standard duels</p> <p>Note: Additional activity types may exist. The <code>payload</code> structure varies by type and should be parsed as JSON.</p>"},{"location":"games/","title":"Games &amp; Gameplay API","text":"<p>Endpoints for creating and managing game sessions across different game modes.</p>"},{"location":"games/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Endpoints</li> <li>Game Modes</li> <li>Implementation Examples</li> </ul>"},{"location":"games/#overview","title":"Overview","text":"<p>GeoGuessr offers multiple game modes: - Standard Games - Classic 5-round games - Streak Mode - Country/region streak challenges - Infinity Mode - Asynchronous competitive gameplay with friends</p> <p>\ud83d\ude80 Ready to use? Check out the games examples for ready-to-use scripts: - Get Game State - View current game progress and statistics - Create Streak Game - Start custom streak games with presets</p>"},{"location":"games/#endpoints","title":"Endpoints","text":""},{"location":"games/#standard-games","title":"Standard Games","text":""},{"location":"games/#get-game-state","title":"Get Game State","text":"<p>Retrieves the current state of a game including rounds, player progress, and game settings.</p> <p>Endpoint: <pre><code>GET /v3/games/{token}?client=web\n</code></pre></p> <p>Parameters: - <code>token</code> - Game token (16-character string) - <code>client</code> - Client type (usually \"web\")</p> <p>Authentication: Required</p> <p>Response: Complete game state object</p> <p>Example Response: <pre><code>{\n  \"token\": \"XB9wycuZvDrhl7cB\",\n  \"type\": \"standard\",\n  \"mode\": \"standard\",\n  \"state\": \"started\",\n  \"roundCount\": 5,\n  \"timeLimit\": 0,\n  \"forbidMoving\": true,\n  \"forbidZooming\": true,\n  \"forbidRotating\": true,\n  \"guessMapType\": \"roadmap\",\n  \"streakType\": \"countrystreak\",\n  \"map\": \"famous-places\",\n  \"mapName\": \"Famous Places\",\n  \"panoramaProvider\": 1,\n  \"bounds\": {\n    \"min\": {\n      \"lat\": -54.846696,\n      \"lng\": -123.115017286215\n    },\n    \"max\": {\n      \"lat\": 71.1709290207909,\n      \"lng\": 175.6810699\n    }\n  },\n  \"round\": 1,\n  \"rounds\": [\n    {\n      \"lat\": 48.693670964233526,\n      \"lng\": 6.1832995180016415,\n      \"panoId\": \"483030557379774F46576E634D514451657355714A51\",\n      \"heading\": 173.3570098876953,\n      \"pitch\": 1.9483630657196045,\n      \"zoom\": 0,\n      \"streakLocationCode\": null,\n      \"startTime\": \"2026-01-11T00:10:51.0315710+00:00\"\n    }\n  ],\n  \"player\": {\n    \"totalScore\": {\n      \"amount\": \"0\",\n      \"unit\": \"points\",\n      \"percentage\": 0\n    },\n    \"totalDistance\": {\n      \"meters\": {\n        \"amount\": \"0\",\n        \"unit\": \"m\"\n      },\n      \"miles\": {\n        \"amount\": \"0\",\n        \"unit\": \"yd\"\n      }\n    },\n    \"totalDistanceInMeters\": 0,\n    \"totalStepsCount\": 0,\n    \"totalTime\": 0,\n    \"totalStreak\": 0,\n    \"guesses\": [],\n    \"isLeader\": false,\n    \"currentPosition\": 0,\n    \"pin\": {\n      \"url\": \"pin/7dd941395a4ce096339065fc766a9482.png\",\n      \"anchor\": \"center-center\",\n      \"isDefault\": false\n    },\n    \"newBadges\": [],\n    \"explorer\": null,\n    \"id\": \"5db9f057dfa5102130eaf747\",\n    \"nick\": \"Sirey\",\n    \"isVerified\": false,\n    \"flair\": 0,\n    \"countryCode\": \"gb\"\n  },\n  \"progressChange\": null\n}\n</code></pre></p> <p>Important Notes: - Use this endpoint to resume games or check current game state - Player guesses are in <code>player.guesses</code> array - Round information in <code>rounds</code> array</p>"},{"location":"games/#streak-mode","title":"Streak Mode","text":""},{"location":"games/#create-streak-game","title":"Create Streak Game","text":"<p>Creates a new country/region streak game.</p> <p>Endpoint: <pre><code>POST /v3/games/streak\n</code></pre></p> <p>Authentication: Required</p> <p>Request Body: <pre><code>{\n  \"forbidMoving\": false,\n  \"forbidRotating\": false,\n  \"forbidZooming\": false,\n  \"streakType\": \"CountryStreak\",\n  \"timeLimit\": 120\n}\n</code></pre></p> <p>Request Body Fields: - <code>forbidMoving</code> - Disable movement (true/false) - <code>forbidRotating</code> - Disable camera rotation (true/false) - <code>forbidZooming</code> - Disable zoom (true/false) - <code>streakType</code> - Streak type (\"CountryStreak\", etc.) - <code>timeLimit</code> - Time limit in seconds (0 = no limit)</p> <p>Response: Complete game state object (same structure as GET /v3/games/{token})</p> <p>Example Response: <pre><code>{\n  \"token\": \"WQmUfbY87ikn2TNx\",\n  \"type\": \"standard\",\n  \"mode\": \"streak\",\n  \"state\": \"started\",\n  \"roundCount\": 1,\n  \"timeLimit\": 120,\n  \"forbidMoving\": false,\n  \"forbidZooming\": false,\n  \"forbidRotating\": false,\n  \"guessMapType\": \"roadmap\",\n  \"streakType\": \"countrystreak\",\n  \"map\": \"country-streak\",\n  \"mapName\": \"Country Streak\",\n  \"panoramaProvider\": 1,\n  \"bounds\": {\n    \"min\": {\n      \"lat\": 90,\n      \"lng\": 180\n    },\n    \"max\": {\n      \"lat\": -90,\n      \"lng\": -180\n    }\n  },\n  \"round\": 1,\n  \"rounds\": [\n    {\n      \"lat\": 53.79796600341797,\n      \"lng\": -1.8176765441894531,\n      \"panoId\": \"757A756C527A676150782D34465944487A6D46377251\",\n      \"heading\": 0,\n      \"pitch\": 0,\n      \"zoom\": 0,\n      \"streakLocationCode\": \"gb\",\n      \"startTime\": \"2026-01-11T00:13:59.8249055+00:00\"\n    }\n  ],\n  \"player\": {\n    \"totalScore\": {\n      \"amount\": \"0\",\n      \"unit\": \"points\",\n      \"percentage\": 0\n    },\n    \"totalDistance\": {\n      \"meters\": {\n        \"amount\": \"0\",\n        \"unit\": \"m\"\n      },\n      \"miles\": {\n        \"amount\": \"0\",\n        \"unit\": \"yd\"\n      }\n    },\n    \"totalDistanceInMeters\": 0,\n    \"totalStepsCount\": 0,\n    \"totalTime\": 0,\n    \"totalStreak\": 0,\n    \"guesses\": [],\n    \"isLeader\": false,\n    \"currentPosition\": 0,\n    \"pin\": {\n      \"url\": \"pin/7dd941395a4ce096339065fc766a9482.png\",\n      \"anchor\": \"center-center\",\n      \"isDefault\": false\n    },\n    \"newBadges\": [],\n    \"explorer\": null,\n    \"id\": \"5db9f057dfa5102130eaf747\",\n    \"nick\": \"Sirey\",\n    \"isVerified\": false,\n    \"flair\": 0,\n    \"countryCode\": \"gb\"\n  },\n  \"progressChange\": null\n}\n</code></pre></p> <p>Important Notes: - Returns full game state immediately - <code>mode</code> is \"streak\" - <code>streakLocationCode</code> contains the country code for streak games - GET requests return 400 - endpoint is POST-only</p>"},{"location":"games/#infinity-mode","title":"Infinity Mode","text":"<p>IMPORTANT: Most Infinity Mode endpoints have been deprecated and return HTTP 404.</p>"},{"location":"games/#get-infinity-challenges-list","title":"Get Infinity Challenges List","text":"<p>The only working Infinity Mode endpoint. Returns list of active infinity challenges.</p> <p>Endpoint: <pre><code>GET /v4/games/infinity/challenges\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Object with challenges array</p> <p>Example Response: <pre><code>{\n  \"challenges\": []\n}\n</code></pre></p> <p>Important Notes: - Returns empty array if no active challenges - This is the ONLY infinity endpoint that works - All other infinity endpoints return 404</p>"},{"location":"games/#deprecated-infinity-endpoints","title":"Deprecated Infinity Endpoints","text":"<p>The following Infinity Mode endpoints no longer exist and return HTTP 404:</p> <ul> <li><code>GET /v4/games/infinity</code> - Main infinity game state (404)</li> <li><code>GET /v4/games/infinity/inbox</code> - Inbox of challenges (404)</li> <li><code>GET /v4/games/infinity/outbox</code> - Outbox of sent challenges (404)</li> <li><code>GET /v4/games/infinity/history</code> - Game history (404)</li> <li><code>GET /v4/games/infinity/next</code> - Next location (404)</li> <li><code>GET /v4/games/infinity/location-overview</code> - Location overview (404)</li> <li><code>POST /v4/games/infinity/guess</code> - Submit guess (likely 404)</li> <li><code>POST /v4/games/infinity/challenge/new</code> - Create challenge (likely 404)</li> <li><code>GET /v4/games/infinity/challenge/random</code> - Random challenge (likely 404)</li> </ul> <p>Note: Infinity Mode appears to have been removed or significantly redesigned. Only the challenges list endpoint remains functional.</p>"},{"location":"games/#data-structures","title":"Data Structures","text":""},{"location":"games/#game-state-object","title":"Game State Object","text":"<p>Complete game state object structure:</p> <pre><code>interface GameState {\n  token: string;                 // Game token (16 characters)\n  type: string;                  // \"standard\"\n  mode: string;                  // \"standard\", \"streak\", etc.\n  state: string;                 // \"started\", \"finished\"\n  roundCount: number;            // Total number of rounds\n  timeLimit: number;             // Time limit in seconds (0 = no limit)\n  forbidMoving: boolean;         // Movement disabled (NMPZ)\n  forbidZooming: boolean;        // Zoom disabled (NZ)\n  forbidRotating: boolean;       // Rotation disabled (NR)\n  guessMapType: string;          // \"roadmap\"\n  streakType: string;            // \"countrystreak\", etc.\n  map: string;                   // Map slug\n  mapName: string;               // Map display name\n  panoramaProvider: number;      // 1 = Google Street View\n  bounds: {\n    min: {\n      lat: number;\n      lng: number;\n    };\n    max: {\n      lat: number;\n      lng: number;\n    };\n  };\n  round: number;                 // Current round number\n  rounds: Round[];               // Array of round objects\n  player: PlayerState;           // Player state\n  progressChange: any | null;    // Progress changes\n}\n\ninterface Round {\n  lat: number;                   // Location latitude\n  lng: number;                   // Location longitude\n  panoId: string;                // Street View panorama ID (hex encoded)\n  heading: number;               // Camera heading\n  pitch: number;                 // Camera pitch\n  zoom: number;                  // Camera zoom level\n  streakLocationCode: string | null; // Country code for streak mode\n  startTime: string;             // Round start time (ISO 8601)\n}\n\ninterface PlayerState {\n  totalScore: {\n    amount: string;              // Score as string\n    unit: \"points\";\n    percentage: number;          // Score percentage\n  };\n  totalDistance: {\n    meters: {\n      amount: string;\n      unit: \"m\" | \"km\";\n    };\n    miles: {\n      amount: string;\n      unit: \"yd\" | \"miles\";\n    };\n  };\n  totalDistanceInMeters: number; // Total distance in meters\n  totalStepsCount: number;       // Total movement steps\n  totalTime: number;             // Total time in milliseconds\n  totalStreak: number;           // Current streak count\n  guesses: Guess[];              // Array of guesses\n  isLeader: boolean;             // Whether player is leading\n  currentPosition: number;       // Current position/rank\n  pin: {\n    url: string;\n    anchor: string;\n    isDefault: boolean;\n  };\n  newBadges: any[];              // Newly earned badges\n  explorer: any | null;          // Explorer mode data\n  id: string;                    // Player user ID\n  nick: string;                  // Player username\n  isVerified: boolean;           // Verified status\n  flair: number;                 // Flair level\n  countryCode: string;           // Player country code\n}\n\ninterface Guess {\n  lat: number;                   // Guessed latitude\n  lng: number;                   // Guessed longitude\n  // Additional guess fields documented in challenges.md\n}\n</code></pre>"},{"location":"games/#game-modes","title":"Game Modes","text":""},{"location":"games/#standard-mode","title":"Standard Mode","text":"<ul> <li>Classic GeoGuessr gameplay</li> <li>5 rounds per game</li> <li>Configurable time limits and movement restrictions</li> <li>Access via: <code>GET /v3/games/{token}</code></li> </ul>"},{"location":"games/#streak-mode_1","title":"Streak Mode","text":"<ul> <li>Guess until you get one wrong</li> <li>Country or region-based</li> <li>Tracks longest streaks</li> <li>Create via: <code>POST /v3/games/streak</code></li> </ul>"},{"location":"games/#infinity-mode-deprecated","title":"Infinity Mode (Deprecated)","text":"<ul> <li>DEPRECATED: Most endpoints return 404</li> <li>Only <code>/v4/games/infinity/challenges</code> remains functional</li> <li>Feature appears to have been removed or significantly redesigned</li> </ul>"},{"location":"games/#implementation-examples","title":"Implementation Examples","text":""},{"location":"games/#example-1-get-game-state","title":"Example 1: Get Game State","text":"<p>JavaScript: <pre><code>async function getGameState(gameToken) {\n    const response = await fetch(`https://www.geoguessr.com/api/v3/games/${gameToken}?client=web`, {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const game = await response.json();\n    console.log(`Game: ${game.mapName}`);\n    console.log(`Round ${game.round}/${game.roundCount}`);\n    console.log(`Score: ${game.player.totalScore.amount} points`);\n\n    return game;\n}\n\n// Usage\nconst game = await getGameState('XB9wycuZvDrhl7cB');\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_game_state(game_token, cookie):\n    url = f'https://www.geoguessr.com/api/v3/games/{game_token}?client=web'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    response.raise_for_status()\n\n    game = response.json()\n    print(f\"Game: {game['mapName']}\")\n    print(f\"Round {game['round']}/{game['roundCount']}\")\n    print(f\"Score: {game['player']['totalScore']['amount']} points\")\n\n    return game\n\n# Usage\n# game = get_game_state('XB9wycuZvDrhl7cB', 'YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"games/#example-2-create-streak-game","title":"Example 2: Create Streak Game","text":"<p>JavaScript: <pre><code>async function createStreakGame(settings = {}) {\n    const response = await fetch('https://www.geoguessr.com/api/v3/games/streak', {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            forbidMoving: settings.nmpz || false,\n            forbidRotating: settings.nr || false,\n            forbidZooming: settings.nz || false,\n            streakType: settings.type || 'CountryStreak',\n            timeLimit: settings.timeLimit || 120\n        })\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const game = await response.json();\n    console.log('Streak game created:', game.token);\n    console.log('First location:', game.rounds[0].streakLocationCode);\n    return game;\n}\n\n// Usage\nconst streakGame = await createStreakGame({\n    type: 'CountryStreak',\n    timeLimit: 120\n});\n</code></pre></p> <p>Python: <pre><code>import requests\nimport json\n\ndef create_streak_game(cookie, settings=None):\n    url = 'https://www.geoguessr.com/api/v3/games/streak'\n\n    if settings is None:\n        settings = {}\n\n    body = {\n        'forbidMoving': settings.get('nmpz', False),\n        'forbidRotating': settings.get('nr', False),\n        'forbidZooming': settings.get('nz', False),\n        'streakType': settings.get('type', 'CountryStreak'),\n        'timeLimit': settings.get('timeLimit', 120)\n    }\n\n    response = requests.post(\n        url,\n        cookies={'_ncfa': cookie},\n        headers={'Content-Type': 'application/json'},\n        data=json.dumps(body)\n    )\n    response.raise_for_status()\n\n    game = response.json()\n    print(f\"Streak game created: {game['token']}\")\n    print(f\"First location: {game['rounds'][0]['streakLocationCode']}\")\n    return game\n\n# Usage\n# streak_game = create_streak_game('YOUR_NCFA_COOKIE', {'type': 'CountryStreak', 'timeLimit': 120})\n</code></pre></p>"},{"location":"games/#common-use-cases","title":"Common Use Cases","text":""},{"location":"games/#1-track-game-progress","title":"1. Track Game Progress","text":"<pre><code>async function trackGameProgress(gameToken) {\n    const game = await getGameState(gameToken);\n\n    const progress = {\n        currentRound: game.round,\n        totalRounds: game.roundCount,\n        score: game.player.totalScore.amount,\n        scorePercentage: game.player.totalScore.percentage,\n        streak: game.player.totalStreak,\n        guessesCount: game.player.guesses.length\n    };\n\n    console.log(`Round ${progress.currentRound}/${progress.totalRounds}`);\n    console.log(`Score: ${progress.score} (${progress.scorePercentage}%)`);\n\n    return progress;\n}\n\n// Usage\n// const progress = await trackGameProgress('XB9wycuZvDrhl7cB');\n</code></pre>"},{"location":"games/#2-start-custom-streak-challenge","title":"2. Start Custom Streak Challenge","text":"<pre><code>async function startCustomStreak(difficulty = 'normal') {\n    const settings = {\n        type: 'CountryStreak',\n        timeLimit: difficulty === 'hard' ? 60 : 120,\n        nmpz: difficulty === 'hard',\n        nr: difficulty === 'hard',\n        nz: difficulty === 'hard'\n    };\n\n    const game = await createStreakGame(settings);\n\n    console.log(`Streak started: ${game.token}`);\n    console.log(`Difficulty: ${difficulty}`);\n    console.log(`Time limit: ${settings.timeLimit}s`);\n\n    return game;\n}\n\n// Usage\n// const hardStreak = await startCustomStreak('hard');\n</code></pre>"},{"location":"games/#3-resume-unfinished-game","title":"3. Resume Unfinished Game","text":"<pre><code>async function resumeGame(gameToken) {\n    const game = await getGameState(gameToken);\n\n    if (game.state === 'finished') {\n        console.log('Game already finished');\n        return null;\n    }\n\n    console.log(`Resuming: ${game.mapName}`);\n    console.log(`Round ${game.round}/${game.roundCount}`);\n    console.log(`Current score: ${game.player.totalScore.amount}`);\n\n    return game;\n}\n\n// Usage\n// const game = await resumeGame('XB9wycuZvDrhl7cB');\n</code></pre>"},{"location":"games/#testing","title":"Testing","text":"<p>See games-testing.md for console commands to test these endpoints.</p>"},{"location":"games/#notes-for-documentation-contributors","title":"Notes for Documentation Contributors","text":"<p>Verified: - [x] Game state structure (GET /v3/games/{token}) - [x] Streak game creation (POST /v3/games/streak) - [x] Infinity mode deprecated (most endpoints return 404) - [x] Only /v4/games/infinity/challenges works - [x] Complete game state object with 30+ fields - [x] Round structure with location data - [x] Player state with score, distance, streak tracking</p> <p>Still needs verification: - [ ] Standard game creation endpoint (POST /v3/games) - [ ] Guess submission format and endpoint - [ ] Game completion/finish endpoint - [ ] Multiplayer/party game endpoints - [ ] Daily challenge game structure - [ ] Battle Royale game endpoints</p>"},{"location":"maps/","title":"Maps API","text":"<p>Endpoints for browsing, searching, and managing maps.</p>"},{"location":"maps/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Endpoints</li> <li>Implementation Examples</li> </ul>"},{"location":"maps/#overview","title":"Overview","text":"<p>Maps are collections of locations used to create games. Users can create custom maps or play official/community maps.</p> <p>\ud83d\ude80 Ready to use? Check out the maps examples for ready-to-use scripts: - Browse Popular Maps - Discover popular community maps with statistics</p>"},{"location":"maps/#endpoints","title":"Endpoints","text":""},{"location":"maps/#browse-maps","title":"Browse Maps","text":""},{"location":"maps/#browse-featured-maps","title":"Browse Featured Maps","text":"<p>Returns 10 featured maps curated by GeoGuessr.</p> <p>Endpoint: <pre><code>GET /v3/social/maps/browse/featured\n</code></pre></p> <p>Authentication: Not required</p> <p>Response: Array of 10 map objects (see Data Structures section for complete object)</p>"},{"location":"maps/#browse-popular-maps-all","title":"Browse Popular Maps (All)","text":"<p>Returns 10 popular community maps sorted by popularity.</p> <p>Endpoint: <pre><code>GET /v3/social/maps/browse/popular/all\n</code></pre></p> <p>Authentication: Not required</p> <p>Response: Array of 10 map objects sorted by likes/popularity</p>"},{"location":"maps/#browse-popular-official-maps","title":"Browse Popular Official Maps","text":"<p>Returns 10 popular official GeoGuessr maps.</p> <p>Endpoint: <pre><code>GET /v3/social/maps/browse/popular/official\n</code></pre></p> <p>Authentication: Not required</p> <p>Response: Array of 10 official map objects</p>"},{"location":"maps/#search-maps","title":"Search Maps","text":""},{"location":"maps/#search-for-maps","title":"Search for Maps","text":"<p>Search for maps by name. Returns up to 10 results.</p> <p>Endpoint: <pre><code>GET /v4/search/map?q={query}\n</code></pre></p> <p>Parameters: - <code>q</code> (query) - Search query (map name, can be empty for default results)</p> <p>Authentication: Required</p> <p>Example Request: <pre><code>const query = 'world';\nfetch(`https://www.geoguessr.com/api/v4/search/map?q=${encodeURIComponent(query)}`, {\n    credentials: 'include'\n})\n</code></pre></p> <p>Response: Array of up to 10 map objects matching the search query</p> <p>Important Notes: - Empty query string returns default popular maps (still returns 200) - Search is case-insensitive - Partial matching is supported - Returns same structure as browse endpoints</p>"},{"location":"maps/#map-scores","title":"Map Scores","text":""},{"location":"maps/#get-map-scores","title":"Get Map Scores","text":"<p>This endpoint currently returns HTTP 500 error.</p> <p>Endpoint: <pre><code>GET /v3/scores/maps\n</code></pre></p> <p>Authentication: Required</p> <p>Status: Returns 500 Internal Server Error (endpoint may be deprecated or experiencing issues)</p>"},{"location":"maps/#data-structures","title":"Data Structures","text":""},{"location":"maps/#map-object","title":"Map Object","text":"<p>Complete map object structure with all 36 fields:</p> <pre><code>interface MapObject {\n  id: string;                    // Unique map ID (24-character hex)\n  name: string;                  // Map name\n  slug: string;                  // URL slug (usually same as ID)\n  description: string | null;    // Map description\n  url: string;                   // Map page URL path\n  playUrl: string;               // Play URL path\n  published: boolean;            // Whether map is published\n  banned: boolean;               // Whether map is banned\n\n  images: {\n    backgroundLarge: string | null;\n    incomplete: boolean;\n  };\n\n  bounds: {                      // Geographic bounds\n    min: {\n      lat: number;\n      lng: number;\n    };\n    max: {\n      lat: number;\n      lng: number;\n    };\n  };\n\n  customCoordinates: any | null;\n  coordinateCount: string;       // Formatted string: \"10K+\", \"100K+\", \"1M+\"\n  regions: any | null;\n\n  creator: {                     // Map creator (full user object)\n    nick: string;\n    id: string;\n    countryCode: string;\n    isProUser: boolean;\n    type: string;\n    isVerified: boolean;\n    pin: {\n      url: string;\n      anchor: string;\n      isDefault: boolean;\n    };\n    customImage: string | null;\n    fullBodyPin: string;\n    borderUrl: string;\n    color: number;\n    url: string;\n    br: {\n      level: number;\n      division: number;\n    };\n    streakProgress: any | null;\n    explorerProgress: any | null;\n    dailyChallengeProgress: number;\n    lastClaimedLevel: number;\n    progress: {\n      xp: number;\n      level: number;\n      levelXp: number;\n      nextLevel: number;\n      nextLevelXp: number;\n      title: {\n        id: number;\n        tierId: number;\n      };\n      competitionMedals: {\n        bronze: number;\n        silver: number;\n        gold: number;\n        platinum: number;\n      };\n    };\n    competitive: {\n      elo: number;\n      rating: number;\n      lastRatingChange: number;\n      division: {\n        type: number;\n        startRating: number;\n        endRating: number;\n      };\n      onLeaderboard: boolean;\n    };\n    lastNameChange: string;\n    lastNickOrCountryChange: string;\n    isBanned: boolean;\n    chatBan: boolean;\n    nameChangeAvailableAt: string | null;\n    avatar: {\n      fullBodyPath: string;\n    };\n    isBotUser: boolean;\n    suspendedUntil: string | null;\n    wallet: any | null;\n    flair: number;\n    isCreator: boolean;\n    isAppAnonymous: boolean;\n    club: {\n      tag: string;\n      clubId: string;\n      level: number;\n    } | null;\n  };\n\n  createdAt: string;             // ISO 8601 timestamp\n  updatedAt: string;             // ISO 8601 timestamp\n  numFinishedGames: number;      // Number of completed games\n  likedByUser: boolean | null;   // Whether current user liked it\n  averageScore: number;          // Average score across all games\n\n  avatar: {                      // Map avatar/thumbnail\n    background: string;\n    decoration: string;\n    ground: string;\n    landscape: string;\n  };\n\n  difficulty: string;            // \"EASY\", \"MEDIUM\", \"HARD\"\n  difficultyLevel: number;       // Numeric difficulty (1-5)\n  highscore: any | null;         // User's high score on this map\n  isUserMap: boolean;            // Whether it's user-created\n  highlighted: boolean;          // Whether map is highlighted\n  deleted: boolean;              // Whether map is deleted\n  free: boolean;                 // Whether map is free to play\n  panoramaProvider: string;      // \"StreetView\" or other providers\n  inExplorerMode: boolean;\n  maxErrorDistance: number;      // Maximum distance error in meters\n  likes: number;                 // Number of likes\n  locationSelectionMode: number; // Location selection mode\n  tags: string[];                // Map tags (e.g., \"Global\", \"Hand-picked\")\n  collaborators: any | null;     // Map collaborators\n  flair: number;                 // Map flair level\n  mapSize: any | null;           // Map size metadata\n}\n</code></pre> <p>Key Fields: - <code>coordinateCount</code>: Formatted as \"250+\", \"1000+\", \"10K+\", \"50K+\", \"100K+\", \"1M+\" - <code>creator</code>: Full user object with all profile information - <code>difficulty</code>: String values \"EASY\", \"MEDIUM\", \"HARD\" - <code>difficultyLevel</code>: Numeric 1-5 - <code>tags</code>: Array of strings like \"Global\", \"Hand-picked\", \"Official Cov.\"</p>"},{"location":"maps/#implementation-examples","title":"Implementation Examples","text":""},{"location":"maps/#example-1-browse-featured-maps","title":"Example 1: Browse Featured Maps","text":"<p>JavaScript: <pre><code>async function getFeaturedMaps() {\n    const response = await fetch('https://www.geoguessr.com/api/v3/social/maps/browse/featured', {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const maps = await response.json();\n    console.log(`Found ${maps.length} featured maps`);\n\n    maps.forEach(map =&gt; {\n        console.log(`- ${map.name} (${map.numLocations || 'unknown'} locations)`);\n    });\n\n    return maps;\n}\n\n// Usage\nconst featured = await getFeaturedMaps();\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_featured_maps(cookie=None):\n    url = 'https://www.geoguessr.com/api/v3/social/maps/browse/featured'\n\n    cookies = {'_ncfa': cookie} if cookie else None\n    response = requests.get(url, cookies=cookies)\n    response.raise_for_status()\n\n    maps = response.json()\n    print(f'Found {len(maps)} featured maps')\n\n    for map_data in maps:\n        locations = map_data.get('numLocations', 'unknown')\n        print(f\"- {map_data['name']} ({locations} locations)\")\n\n    return maps\n\n# Usage\n# featured = get_featured_maps('YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"maps/#example-2-search-for-maps","title":"Example 2: Search for Maps","text":"<p>JavaScript: <pre><code>async function searchMaps(query) {\n    const url = `https://www.geoguessr.com/api/v4/search/map?q=${encodeURIComponent(query)}`;\n\n    const response = await fetch(url, { credentials: 'include' });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const results = await response.json();\n    console.log(`Found ${results.length} maps matching \"${query}\"`);\n\n    results.forEach(map =&gt; {\n        console.log(`- ${map.name} by ${map.creator?.nick || 'Unknown'}`);\n    });\n\n    return results;\n}\n\n// Usage\nconst results = await searchMaps('europe');\n</code></pre></p> <p>Python: <pre><code>import requests\nfrom urllib.parse import quote\n\ndef search_maps(query, cookie):\n    url = f'https://www.geoguessr.com/api/v4/search/map?q={quote(query)}'\n\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    response.raise_for_status()\n\n    results = response.json()\n    print(f'Found {len(results)} maps matching \"{query}\"')\n\n    for map_data in results:\n        creator = map_data.get('creator', {}).get('nick', 'Unknown')\n        print(f\"- {map_data['name']} by {creator}\")\n\n    return results\n\n# Usage\n# results = search_maps('europe', 'YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"maps/#example-3-get-popular-maps","title":"Example 3: Get Popular Maps","text":"<p>JavaScript: <pre><code>async function getPopularMaps(official = false) {\n    const endpoint = official ? 'popular/official' : 'popular/all';\n    const url = `https://www.geoguessr.com/api/v3/social/maps/browse/${endpoint}`;\n\n    const response = await fetch(url, { credentials: 'include' });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const maps = await response.json();\n    const type = official ? 'official' : 'community';\n    console.log(`Found ${maps.length} popular ${type} maps`);\n\n    return maps;\n}\n\n// Usage\nconst officialMaps = await getPopularMaps(true);\nconst communityMaps = await getPopularMaps(false);\n</code></pre></p>"},{"location":"maps/#common-use-cases","title":"Common Use Cases","text":""},{"location":"maps/#1-map-browser-ui","title":"1. Map Browser UI","text":"<pre><code>async function buildMapBrowser() {\n    const [featured, popular] = await Promise.all([\n        getFeaturedMaps(),\n        getPopularMaps()\n    ]);\n\n    return {\n        featured: featured,\n        popular: popular,\n        categories: ['Featured', 'Popular', 'Official']\n    };\n}\n\n// Usage\n// const mapData = await buildMapBrowser();\n</code></pre>"},{"location":"maps/#2-map-search-with-autocomplete","title":"2. Map Search with Autocomplete","text":"<pre><code>async function autocompleteMapSearch(query, limit = 5) {\n    if (query.length &lt; 2) return [];\n\n    const results = await searchMaps(query);\n\n    return results.slice(0, limit).map(map =&gt; ({\n        label: map.name,\n        value: map.id,\n        creator: map.creator?.nick\n    }));\n}\n\n// Usage\n// const suggestions = await autocompleteMapSearch('world');\n</code></pre>"},{"location":"maps/#3-fetch-map-by-id","title":"3. Fetch Map by ID","text":"<pre><code>async function getMapById(mapId) {\n    // Note: Exact endpoint TBD, might be /v3/maps/{mapId}\n    const response = await fetch(\n        `https://www.geoguessr.com/api/v3/maps/${mapId}`,\n        { credentials: 'include' }\n    );\n\n    if (!response.ok) {\n        throw new Error(`Map not found: ${mapId}`);\n    }\n\n    return await response.json();\n}\n</code></pre>"},{"location":"maps/#testing","title":"Testing","text":"<p>See maps-testing.md for console commands to test these endpoints.</p>"},{"location":"maps/#notes-for-documentation-contributors","title":"Notes for Documentation Contributors","text":"<p>The following aspects need verification:</p> <ul> <li>[ ] Complete map object structure</li> <li>[ ] Pagination for browse endpoints</li> <li>[ ] Search result format</li> <li>[ ] Map creation endpoint</li> <li>[ ] Map editing/deletion endpoints</li> <li>[ ] Map likes/favorites endpoint</li> <li>[ ] Map statistics structure</li> <li>[ ] Individual map details endpoint</li> </ul>"},{"location":"profiles/","title":"User Profiles API","text":"<p>Endpoints for retrieving and managing user profile information.</p>"},{"location":"profiles/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Endpoints</li> <li>Data Structures</li> <li>Implementation Examples</li> </ul>"},{"location":"profiles/#overview","title":"Overview","text":"<p>Profile endpoints provide access to user information including stats, customization, and public data.</p> <p>\ud83d\ude80 Ready to use? Check out the profile examples for ready-to-use scripts: - Get Your Profile - View your complete profile and stats - Search Users - Find players by username - Compare Users - Compare two players' statistics</p>"},{"location":"profiles/#endpoints","title":"Endpoints","text":""},{"location":"profiles/#get-current-user-profile","title":"Get Current User Profile","text":"<p>Get the authenticated user's profile including detailed user information, settings, and restrictions.</p> <p>Endpoint: <pre><code>GET /v3/profiles\n</code></pre></p> <p>Authentication: Required</p> <p>Example Request: <pre><code>fetch('https://www.geoguessr.com/api/v3/profiles', {\n    credentials: 'include'\n})\n</code></pre></p> <p>Response Structure: <pre><code>{\n  \"user\": {\n    \"nick\": \"username\",\n    \"created\": \"2019-10-30T20:19:35.6820000Z\",\n    \"isProUser\": true,\n    \"type\": \"Unlimited\",\n    \"isVerified\": false,\n    \"pin\": {\n      \"url\": \"pin/7dd941395a4ce096339065fc766a9482.png\",\n      \"anchor\": \"center-center\",\n      \"isDefault\": false\n    },\n    \"customImage\": \"pin/...\",\n    \"fullBodyPin\": \"pin/...\",\n    \"borderUrl\": \"avatarasseticon/...\",\n    \"color\": 0,\n    \"url\": \"/user/5db9f057dfa5102130eaf747\",\n    \"id\": \"5db9f057dfa5102130eaf747\",\n    \"countryCode\": \"gb\",\n    \"br\": {\n      \"level\": 158,\n      \"division\": 50\n    },\n    \"streakProgress\": {\n      \"bronze\": 2,\n      \"silver\": 1,\n      \"gold\": 1,\n      \"platinum\": 0\n    },\n    \"explorerProgress\": {\n      \"bronze\": 1,\n      \"silver\": 55,\n      \"gold\": 46,\n      \"platinum\": 6\n    },\n    \"dailyChallengeProgress\": 0,\n    \"lastClaimedLevel\": 158,\n    \"progress\": {\n      \"xp\": 1456894,\n      \"level\": 158,\n      \"levelXp\": 1448070,\n      \"nextLevel\": 159,\n      \"nextLevelXp\": 1473400,\n      \"title\": {\n        \"id\": 360,\n        \"tierId\": 160\n      },\n      \"competitionMedals\": {\n        \"bronze\": 0,\n        \"silver\": 0,\n        \"gold\": 0,\n        \"platinum\": 0\n      }\n    },\n    \"competitive\": {\n      \"elo\": 766,\n      \"rating\": 1267,\n      \"lastRatingChange\": -10,\n      \"division\": {\n        \"type\": 50,\n        \"startRating\": 1100,\n        \"endRating\": 1500\n      },\n      \"onLeaderboard\": true\n    },\n    \"flair\": 0,\n    \"isCreator\": false,\n    \"club\": {\n      \"tag\": \"SLPH\",\n      \"clubId\": \"d33bfc7d-c57e-4db5-8293-af6f91a45d6f\",\n      \"level\": 10\n    }\n  },\n  \"playingRestriction\": {\n    \"restriction\": 0,\n    \"canPlayGame\": true,\n    \"canHostParty\": true,\n    \"description\": \"You can play as many games as you want.\"\n  },\n  \"email\": \"user@example.com\",\n  \"isEmailChangeable\": false,\n  \"isEmailVerified\": true,\n  \"emailNotificationSettings\": {\n    \"sendDailyChallengeNotifications\": true,\n    \"sendDailyGameNotifications\": true,\n    \"sendChallengeNotifications\": true,\n    \"sendNewsNotifications\": true,\n    \"sendPromotionalNotifications\": true,\n    \"sendSocialNotifications\": true,\n    \"sendCompetitiveNotifications\": true\n  },\n  \"isBanned\": false,\n  \"chatBan\": false,\n  \"distanceUnit\": 0,\n  \"dateFormat\": 0,\n  \"hideCustomAvatars\": false,\n  \"shareActivities\": true\n}\n</code></pre></p> <p>Important Notes: - User information is nested within the <code>user</code> object - User ID is at <code>user.id</code>, not at top level - Username is at <code>user.nick</code> - Pro status is at <code>user.isProUser</code></p>"},{"location":"profiles/#get-user-profile-by-id","title":"Get User Profile by ID","text":"<p>This endpoint does not exist. Returns 404 Not Found.</p> <p>To get information about other users: - Use the Search Users endpoint below - Information about users appears in challenge results, friend lists, and other endpoints</p>"},{"location":"profiles/#search-users","title":"Search Users","text":"<p>Search for users by username. Returns up to 10 results.</p> <p>Endpoint: <pre><code>GET /v3/search/user?q={query}\n</code></pre></p> <p>Parameters: - <code>q</code> (query) - Search query (username to search for, minimum 1 character)</p> <p>Authentication: Required</p> <p>Example Request: <pre><code>const username = 'brbw';\nfetch(`https://www.geoguessr.com/api/v3/search/user?q=${encodeURIComponent(username)}`, {\n    credentials: 'include'\n})\n</code></pre></p> <p>Response Structure: <pre><code>[\n  {\n    \"nick\": \"brbw\",\n    \"created\": \"2017-09-22T17:15:02.2400000Z\",\n    \"isProUser\": true,\n    \"type\": \"Pro\",\n    \"isVerified\": false,\n    \"pin\": {\n      \"url\": \"pin/1447b93700d85076e0dcddbbd081e1de.png\",\n      \"anchor\": \"center-center\",\n      \"isDefault\": false\n    },\n    \"customImage\": \"pin/1447b93700d85076e0dcddbbd081e1de.png\",\n    \"fullBodyPin\": \"pin/...\",\n    \"borderUrl\": \"avatarasseticon/...\",\n    \"color\": 0,\n    \"url\": \"/user/59c55f9656b1c23bc81cb742\",\n    \"id\": \"59c55f9656b1c23bc81cb742\",\n    \"countryCode\": \"us\",\n    \"flair\": 0\n  }\n]\n</code></pre></p> <p>Important Notes: - Returns array of user objects (up to 10 results) - Empty query string returns HTTP 400 - Search is case-insensitive - Partial matching is supported</p>"},{"location":"profiles/#get-user-maps","title":"Get User Maps","text":"<p>Get maps created by the authenticated user.</p> <p>Endpoint: <pre><code>GET /v3/profiles/maps\n</code></pre></p> <p>Authentication: Required</p> <p>Response Structure: <pre><code>[\n  {\n    \"id\": \"6636a36a5054eeed5ecf8e7a\",\n    \"name\": \"My Custom Map\",\n    \"slug\": \"6636a36a5054eeed5ecf8e7a\",\n    \"description\": \"Map description...\",\n    \"published\": true,\n    \"coordinateCount\": \"1000+\",\n    \"likes\": 42\n  }\n]\n</code></pre></p> <p>Returns: Array of map objects created by the user</p>"},{"location":"profiles/#update-profile-pin","title":"Update Profile Pin","text":"<p>Customize the user's map pin.</p> <p>Endpoint: <pre><code>POST /v3/profiles/pin\n</code></pre></p> <p>Authentication: Required</p> <p>Request Body: (Structure needs verification) <pre><code>{\n  \"pinUrl\": \"...\"\n}\n</code></pre></p> <p>Expected Response: (Structure needs verification)</p>"},{"location":"profiles/#data-structures","title":"Data Structures","text":""},{"location":"profiles/#profile-response-object","title":"Profile Response Object","text":"<pre><code>interface ProfileResponse {\n  user: UserObject;\n  playingRestriction: PlayingRestriction;\n  email: string;\n  isEmailChangeable: boolean;\n  isEmailVerified: boolean;\n  emailNotificationSettings: EmailNotifications;\n  isBanned: boolean;\n  chatBan: boolean;\n  distanceUnit: number;          // 0 = km, 1 = miles\n  dateFormat: number;            // Date format preference\n  hideCustomAvatars: boolean;\n  shareActivities: boolean;\n  deviceToken?: string;\n}\n\ninterface UserObject {\n  nick: string;                  // Username\n  created: string;               // ISO 8601 creation date\n  isProUser: boolean;            // Has Pro subscription\n  type: string;                  // \"Unlimited\", \"Pro\", \"Elite\", etc.\n  isVerified: boolean;           // Verified account\n  pin: {\n    url: string;\n    anchor: string;\n    isDefault: boolean;\n  };\n  customImage: string;\n  fullBodyPin: string;\n  borderUrl: string;\n  color: number;\n  url: string;                   // Profile URL path\n  id: string;                    // User ID (24-character hex string)\n  countryCode: string;           // 2-letter ISO country code\n  br: {                          // Battle Royale stats\n    level: number;\n    division: number;\n  };\n  streakProgress: {\n    bronze: number;\n    silver: number;\n    gold: number;\n    platinum: number;\n  } | null;\n  explorerProgress: {\n    bronze: number;\n    silver: number;\n    gold: number;\n    platinum: number;\n  } | null;\n  dailyChallengeProgress: number;\n  lastClaimedLevel: number;\n  progress: {\n    xp: number;\n    level: number;\n    levelXp: number;             // XP at current level\n    nextLevel: number;\n    nextLevelXp: number;         // XP needed for next level\n    title: {\n      id: number;\n      tierId: number;\n    };\n    competitionMedals: {\n      bronze: number;\n      silver: number;\n      gold: number;\n      platinum: number;\n    };\n  };\n  competitive: {\n    elo: number;\n    rating: number;\n    lastRatingChange: number;\n    division: {\n      type: number;\n      startRating: number;\n      endRating: number;\n    };\n    onLeaderboard: boolean;\n  };\n  lastNameChange: string;        // ISO 8601 timestamp\n  lastNickOrCountryChange: string;\n  isBanned: boolean;\n  chatBan: boolean;\n  nameChangeAvailableAt: string | null;\n  avatar: {\n    fullBodyPath: string;\n  };\n  isBotUser: boolean;\n  suspendedUntil: string | null;\n  wallet: any | null;\n  flair: number;\n  isCreator: boolean;\n  isAppAnonymous: boolean;\n  club: {\n    tag: string;\n    clubId: string;\n    level: number;\n  } | null;\n}\n\ninterface PlayingRestriction {\n  restriction: number;\n  canPlayGame: boolean;\n  canHostParty: boolean;\n  description: string;\n  ticket: any | null;\n  periodicAllowanceMetadata: any | null;\n  noRestrictionEndsAt: string | null;\n}\n\ninterface EmailNotifications {\n  sendDailyChallengeNotifications: boolean;\n  sendDailyGameNotifications: boolean;\n  sendChallengeNotifications: boolean;\n  sendNewsNotifications: boolean;\n  sendPromotionalNotifications: boolean;\n  sendSocialNotifications: boolean;\n  sendCompetitiveNotifications: boolean;\n  unsubscribeToken?: string;\n}\n</code></pre>"},{"location":"profiles/#implementation-examples","title":"Implementation Examples","text":""},{"location":"profiles/#example-1-get-my-profile","title":"Example 1: Get My Profile","text":"<p>JavaScript: <pre><code>async function getMyProfile() {\n    const response = await fetch('https://www.geoguessr.com/api/v3/profiles', {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const profile = await response.json();\n    const user = profile.user;\n\n    console.log(`User: ${user.nick} (Level ${user.progress.level})`);\n    console.log(`User ID: ${user.id}`);\n    console.log(`Pro User: ${user.isProUser}`);\n    console.log(`Country: ${user.countryCode}`);\n    console.log(`Email: ${profile.email}`);\n\n    return profile;\n}\n\n// Usage\nconst profile = await getMyProfile();\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_my_profile(cookie):\n    url = 'https://www.geoguessr.com/api/v3/profiles'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    response.raise_for_status()\n\n    profile = response.json()\n    user = profile['user']\n\n    print(f\"User: {user['nick']} (Level {user['progress']['level']})\")\n    print(f\"User ID: {user['id']}\")\n    print(f\"Pro User: {user['isProUser']}\")\n    print(f\"Country: {user['countryCode']}\")\n    print(f\"Email: {profile['email']}\")\n\n    return profile\n\n# Usage\n# profile = get_my_profile('YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"profiles/#example-2-search-for-users","title":"Example 2: Search for Users","text":"<p>JavaScript: <pre><code>async function searchUsers(query) {\n    const url = `https://www.geoguessr.com/api/v3/search/user?q=${encodeURIComponent(query)}`;\n    const response = await fetch(url, { credentials: 'include' });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const users = await response.json();\n    console.log(`Found ${users.length} users matching \"${query}\"`);\n\n    users.forEach(user =&gt; {\n        console.log(`- ${user.nick} (${user.id})`);\n    });\n\n    return users;\n}\n\n// Usage\nconst results = await searchUsers('brbw');\n</code></pre></p> <p>Python: <pre><code>import requests\nfrom urllib.parse import quote\n\ndef search_users(query, cookie):\n    url = f'https://www.geoguessr.com/api/v3/search/user?q={quote(query)}'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    response.raise_for_status()\n\n    users = response.json()\n    print(f'Found {len(users)} users matching \"{query}\"')\n\n    for user in users:\n        print(f\"- {user['nick']} ({user['id']})\")\n\n    return users\n\n# Usage\n# results = search_users('brbw', 'YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"profiles/#example-3-get-another-users-profile","title":"Example 3: Get Another User's Profile","text":"<p>JavaScript: <pre><code>async function getUserProfile(userId) {\n    const url = `https://www.geoguessr.com/api/v3/profiles/${userId}`;\n    const response = await fetch(url, { credentials: 'include' });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const profile = await response.json();\n    return profile;\n}\n\n// Usage\nconst userProfile = await getUserProfile('59c55f9656b1c23bc81cb742');\nconsole.log(userProfile);\n</code></pre></p>"},{"location":"profiles/#common-use-cases","title":"Common Use Cases","text":""},{"location":"profiles/#1-display-user-card","title":"1. Display User Card","text":"<pre><code>async function displayUserCard(userId) {\n    const profile = await getUserProfile(userId);\n\n    return `\n        &lt;div class=\"user-card\"&gt;\n            &lt;img src=\"${profile.pin?.url || 'default-pin.png'}\" alt=\"Pin\"&gt;\n            &lt;h3&gt;${profile.nick}&lt;/h3&gt;\n            &lt;p&gt;Level: ${profile.levelProgress?.level || 'N/A'}&lt;/p&gt;\n            &lt;p&gt;Country: ${profile.countryCode.toUpperCase()}&lt;/p&gt;\n            ${profile.isVerified ? '&lt;span class=\"verified\"&gt;\u2713 Verified&lt;/span&gt;' : ''}\n        &lt;/div&gt;\n    `;\n}\n</code></pre>"},{"location":"profiles/#2-autocomplete-user-search","title":"2. Autocomplete User Search","text":"<pre><code>async function autocompleteUsers(query, limit = 5) {\n    if (query.length &lt; 2) return [];\n\n    const users = await searchUsers(query);\n    return users.slice(0, limit).map(user =&gt; ({\n        label: user.nick,\n        value: user.id\n    }));\n}\n\n// Usage in input field\n// const suggestions = await autocompleteUsers(inputValue);\n</code></pre>"},{"location":"profiles/#3-check-if-user-exists","title":"3. Check If User Exists","text":"<pre><code>async function userExists(username) {\n    try {\n        const results = await searchUsers(username);\n        return results.some(user =&gt;\n            user.nick.toLowerCase() === username.toLowerCase()\n        );\n    } catch (error) {\n        console.error('Error checking user:', error);\n        return false;\n    }\n}\n\n// Usage\n// const exists = await userExists('brbw');\n</code></pre>"},{"location":"profiles/#testing","title":"Testing","text":"<p>See profiles-testing.md for console commands to test these endpoints.</p>"},{"location":"profiles/#notes-for-documentation-contributors","title":"Notes for Documentation Contributors","text":"<p>The following aspects need verification:</p> <ul> <li>[ ] Complete structure of profile response</li> <li>[ ] All available fields in user profile</li> <li>[ ] Profile visibility settings (public vs private)</li> <li>[ ] Search result limit and pagination</li> <li>[ ] Profile statistics included</li> <li>[ ] Map list structure</li> <li>[ ] Pin customization options</li> </ul>"},{"location":"social/","title":"Social &amp; Friends API","text":"<p>Endpoints for managing friends, badges, and social interactions.</p>"},{"location":"social/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Endpoints</li> <li>Implementation Examples</li> </ul>"},{"location":"social/#overview","title":"Overview","text":"<p>Social features include friends management, badge collection, and community events.</p> <p>\ud83d\ude80 Ready to use? Check out the social examples for ready-to-use scripts: - Get Friends List - View all your friends with statistics</p>"},{"location":"social/#endpoints","title":"Endpoints","text":""},{"location":"social/#friends-management","title":"Friends Management","text":""},{"location":"social/#get-friends-list","title":"Get Friends List","text":"<p>Returns array of all friends for the authenticated user.</p> <p>Endpoint: <pre><code>GET /v3/social/friends\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Array of friend objects (full user objects)</p> <p>Example Response: <pre><code>[\n  {\n    \"userId\": \"553c3b7df27d47b63064cf80\",\n    \"url\": \"/user/553c3b7df27d47b63064cf80\",\n    \"nick\": \"username\",\n    \"pin\": {\n      \"url\": \"pin/...\",\n      \"anchor\": \"center-center\",\n      \"isDefault\": false\n    },\n    \"isProUser\": true,\n    \"isVerified\": false,\n    \"progress\": {\n      \"xp\": 123456,\n      \"level\": 42,\n      \"levelXp\": 120000,\n      \"nextLevel\": 43,\n      \"nextLevelXp\": 130000\n    },\n    \"isOnline\": false,\n    \"activity\": null,\n    \"avatar\": {\n      \"fullBodyPath\": \"pin/...\"\n    },\n    \"countryCode\": \"us\",\n    \"flair\": 0\n  }\n]\n</code></pre></p> <p>Important Notes: - Returns complete array (no pagination) - Each friend object contains full user information - Use <code>userId</code> field for user ID (not <code>id</code>) - <code>isOnline</code> indicates current online status - <code>activity</code> contains current game activity if online</p>"},{"location":"social/#get-friend-requests-received","title":"Get Friend Requests Received","text":"<p>Returns array of pending friend requests received from other users.</p> <p>Endpoint: <pre><code>GET /v3/social/friends/received\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Array of friend request objects (same structure as friends list)</p> <p>Example Response: <pre><code>[\n  {\n    \"userId\": \"5ecb6f24282ad28b94fd3705\",\n    \"url\": \"/user/5ecb6f24282ad28b94fd3705\",\n    \"nick\": \"requesting_user\",\n    \"pin\": {\n      \"url\": \"pin/...\",\n      \"anchor\": \"center-center\",\n      \"isDefault\": false\n    },\n    \"isProUser\": true,\n    \"isVerified\": false,\n    \"progress\": {\n      \"xp\": 98765,\n      \"level\": 35\n    },\n    \"isOnline\": false,\n    \"activity\": null,\n    \"avatar\": {\n      \"fullBodyPath\": \"pin/...\"\n    },\n    \"countryCode\": \"gb\",\n    \"flair\": 0\n  }\n]\n</code></pre></p> <p>Important Notes: - Returns complete array of all pending requests - Same object structure as friends list - No timestamp field for when request was sent</p>"},{"location":"social/#get-friend-requests-sent","title":"Get Friend Requests Sent","text":"<p>Returns array of friend requests you have sent to other users.</p> <p>Endpoint: <pre><code>GET /v3/social/friends/sent\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Array of friend request objects (same structure as friends list)</p> <p>Important Notes: - Returns empty array if no pending outgoing requests - Same object structure as received friend requests</p>"},{"location":"social/#get-friend-suggestions","title":"Get Friend Suggestions","text":"<p>Returns array of suggested friends based on mutual friends, location, or other factors.</p> <p>Endpoint: <pre><code>GET /v3/social/friends/suggestions\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Array of user objects (same structure as friends list)</p> <p>Important Notes: - May return empty array if no suggestions available - Same object structure as friends list</p>"},{"location":"social/#badges-achievements","title":"Badges &amp; Achievements","text":""},{"location":"social/#get-unclaimed-badges","title":"Get Unclaimed Badges","text":"<p>Returns array of badges earned but not yet claimed by the user.</p> <p>Endpoint: <pre><code>GET /v3/social/badges/unclaimed\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Array of badge objects</p> <p>Example Response: <pre><code>[]\n</code></pre></p> <p>Important Notes: - Returns empty array if all badges are claimed - Badge structure includes: id, name, hint, description, imagePath (see claimed badges endpoint for structure)</p>"},{"location":"social/#get-claimed-badges","title":"Get Claimed Badges","text":"<p>Returns array of all badges that have been claimed by the user.</p> <p>Endpoint: <pre><code>GET /v3/social/badges/claimed\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Array of badge objects</p> <p>Example Response: <pre><code>[\n  {\n    \"id\": \"J6O8UdR14vIqZMkiTWrnFXCgCDxh0X4a\",\n    \"name\": \"Around the world\",\n    \"hint\": \"Complete a trip around the world in singleplayer\",\n    \"description\": null,\n    \"imagePath\": \"badge/005d244aaf428e671f70eaf3fd38ab7d.png\"\n  }\n]\n</code></pre></p> <p>Badge Object Fields: - <code>id</code> - Unique badge identifier - <code>name</code> - Display name of the badge - <code>hint</code> - Description of how to earn the badge - <code>description</code> - Additional description (may be null) - <code>imagePath</code> - Relative path to badge image</p>"},{"location":"social/#claim-badge","title":"Claim Badge","text":"<p>Claims an unclaimed badge. (Endpoint structure needs verification)</p> <p>Endpoint: <pre><code>POST /v3/social/badges/claim\n</code></pre></p> <p>Authentication: Required</p> <p>Request Body: (Structure needs verification) <pre><code>{\n  \"badgeId\": \"badge_id_here\"\n}\n</code></pre></p> <p>Expected Response: (Structure needs verification)</p>"},{"location":"social/#social-events","title":"Social Events","text":""},{"location":"social/#get-unfinished-games","title":"Get Unfinished Games","text":"<p>Returns paginated list of games started but not completed.</p> <p>Endpoint: <pre><code>GET /v3/social/events/unfinishedgames\n</code></pre></p> <p>Authentication: Required</p> <p>Parameters: - <code>offset</code> (optional) - Pagination offset (default: 0)</p> <p>Response: Object with games array and pagination token</p> <p>Example Response: <pre><code>{\n  \"games\": [\n    {\n      \"token\": \"22RJcUdUUwTswQVS\",\n      \"map\": \"United Kingdom\",\n      \"mapSlug\": \"uk\",\n      \"score\": {\n        \"amount\": \"695\",\n        \"unit\": \"points\",\n        \"percentage\": 2.78\n      },\n      \"dateTime\": \"2026-01-11T00:16:45.4500000Z\",\n      \"lastActivity\": \"2026-01-11T00:16:51.2820000Z\",\n      \"guesses\": [\n        {\n          \"score\": {\n            \"amount\": \"695\",\n            \"unit\": \"points\",\n            \"percentage\": 13.9\n          },\n          \"distance\": {\n            \"meters\": {\n              \"amount\": \"219.2\",\n              \"unit\": \"km\"\n            },\n            \"miles\": {\n              \"amount\": \"136.2\",\n              \"unit\": \"miles\"\n            }\n          }\n        }\n      ],\n      \"rounds\": 5,\n      \"round\": 2,\n      \"type\": 0,\n      \"mode\": 0,\n      \"locationThumbnail\": \"https://maps.googleapis.com/...\",\n      \"mapImage\": \"map/33519c07b513f9348cdcae06637ccdd2.jpg\",\n      \"mapAvatar\": {\n        \"background\": \"morning\",\n        \"decoration\": \"palmtrees\",\n        \"ground\": \"green\",\n        \"landscape\": \"snowmountains\"\n      }\n    }\n  ],\n  \"nextOffset\": \"10\"\n}\n</code></pre></p> <p>Unfinished Game Object Fields: - <code>token</code> - Game token to resume game - <code>map</code> - Map name - <code>mapSlug</code> - Map identifier - <code>score</code> - Current score with amount, unit, and percentage - <code>dateTime</code> - When game was started (ISO 8601) - <code>lastActivity</code> - Last interaction time (ISO 8601) - <code>guesses</code> - Array of completed round guesses - <code>rounds</code> - Total number of rounds - <code>round</code> - Current round number - <code>type</code> - Game type (0 = standard) - <code>mode</code> - Game mode (0 = normal, 1 = country streak, etc.) - <code>locationThumbnail</code> - Street View thumbnail URL - <code>mapImage</code> - Map image path (may be null) - <code>mapAvatar</code> - Map visual theme object (may be null)</p> <p>Important Notes: - Returns 10 games per page - Use <code>nextOffset</code> for pagination - Games are sorted by most recent activity</p>"},{"location":"social/#data-structures","title":"Data Structures","text":""},{"location":"social/#friend-object","title":"Friend Object","text":"<p>Complete friend/user object structure:</p> <pre><code>interface FriendObject {\n  userId: string;                // User ID (24-character hex)\n  url: string;                   // Profile URL path\n  nick: string;                  // Username\n  pin: {\n    url: string;\n    anchor: string;\n    isDefault: boolean;\n  };\n  isProUser: boolean;            // Has Pro subscription\n  isVerified: boolean;           // Verified account\n  progress: {\n    xp: number;\n    level: number;\n    levelXp: number;\n    nextLevel: number;\n    nextLevelXp: number;\n    title?: {\n      id: number;\n      tierId: number;\n    };\n  };\n  isOnline: boolean;             // Current online status\n  activity: any | null;          // Current game activity\n  avatar: {\n    fullBodyPath: string;\n  };\n  countryCode: string;           // 2-letter ISO country code\n  flair: number;                 // Flair level\n  customImage?: string;\n  fullBodyPin?: string;\n  borderUrl?: string;\n  color?: number;\n}\n</code></pre> <p>Important: Friends use <code>userId</code> field, not <code>id</code>.</p>"},{"location":"social/#badge-object","title":"Badge Object","text":"<pre><code>interface BadgeObject {\n  id: string;                    // Unique badge identifier\n  name: string;                  // Display name\n  hint: string;                  // How to earn description\n  description: string | null;    // Additional details\n  imagePath: string;             // Relative path to badge image\n}\n</code></pre>"},{"location":"social/#unfinished-game-object","title":"Unfinished Game Object","text":"<pre><code>interface UnfinishedGame {\n  token: string;                 // Game token to resume\n  map: string;                   // Map display name\n  mapSlug: string;               // Map identifier\n  score: {\n    amount: string;              // Current score as string\n    unit: \"points\";\n    percentage: number;          // Score percentage\n  };\n  dateTime: string;              // Game start time (ISO 8601)\n  lastActivity: string;          // Last interaction (ISO 8601)\n  guesses: Array&lt;{               // Completed round guesses\n    score: {\n      amount: string;\n      unit: \"points\";\n      percentage: number;\n    };\n    distance: {\n      meters: {\n        amount: string;\n        unit: \"km\";\n      };\n      miles: {\n        amount: string;\n        unit: \"miles\";\n      };\n    };\n  }&gt;;\n  rounds: number;                // Total rounds\n  round: number;                 // Current round\n  type: number;                  // Game type (0 = standard)\n  mode: number;                  // Game mode (0 = normal, 1 = streak, etc.)\n  locationThumbnail: string;     // Street View thumbnail URL\n  mapImage: string | null;       // Map image path\n  mapAvatar: {                   // Map visual theme\n    background: string;\n    decoration: string;\n    ground: string;\n    landscape: string;\n  } | null;\n}\n</code></pre>"},{"location":"social/#non-existent-endpoints","title":"Non-Existent Endpoints","text":"<p>The following endpoints do not exist and return HTTP 404:</p> <ul> <li><code>GET /v3/social/events</code> - Social events list</li> <li><code>GET /v3/social/events/recent</code> - Recent social events</li> <li><code>GET /v4/social/events</code> - Social events (v4)</li> <li><code>GET /v3/social/activity</code> - User activity feed</li> <li><code>GET /v3/social/notifications</code> - Notifications</li> <li><code>GET /v3/social/badges</code> - All badges endpoint</li> <li><code>GET /v3/social/leaderboard</code> - Social leaderboard</li> </ul> <p>If you need social events data, use the <code>/v3/social/events/unfinishedgames</code> endpoint which is available.</p>"},{"location":"social/#implementation-examples","title":"Implementation Examples","text":""},{"location":"social/#example-1-get-friends-list","title":"Example 1: Get Friends List","text":"<p>JavaScript: <pre><code>async function getFriends() {\n    const response = await fetch('https://www.geoguessr.com/api/v3/social/friends', {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const friends = await response.json();\n    console.log(`You have ${friends.length} friends`);\n\n    friends.forEach(friend =&gt; {\n        console.log(`- ${friend.nick} (${friend.countryCode})`);\n    });\n\n    return friends;\n}\n\n// Usage\nconst friends = await getFriends();\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_friends(cookie):\n    url = 'https://www.geoguessr.com/api/v3/social/friends'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    response.raise_for_status()\n\n    friends = response.json()\n    print(f'You have {len(friends)} friends')\n\n    for friend in friends:\n        print(f\"- {friend['nick']} ({friend['countryCode']})\")\n\n    return friends\n\n# Usage\n# friends = get_friends('YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"social/#example-2-check-for-unclaimed-badges","title":"Example 2: Check for Unclaimed Badges","text":"<p>JavaScript: <pre><code>async function checkUnclaimedBadges() {\n    const response = await fetch('https://www.geoguessr.com/api/v3/social/badges/unclaimed', {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const badges = await response.json();\n\n    if (badges.length &gt; 0) {\n        console.log(`You have ${badges.length} unclaimed badges!`);\n        return badges;\n    } else {\n        console.log('No unclaimed badges');\n        return [];\n    }\n}\n\n// Usage\nconst unclaimed = await checkUnclaimedBadges();\n</code></pre></p>"},{"location":"social/#example-3-get-friend-requests","title":"Example 3: Get Friend Requests","text":"<p>JavaScript: <pre><code>async function getFriendRequests() {\n    const response = await fetch('https://www.geoguessr.com/api/v3/social/friends/received', {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const requests = await response.json();\n    console.log(`You have ${requests.length} pending friend requests`);\n    return requests;\n}\n\n// Usage\nconst requests = await getFriendRequests();\n</code></pre></p>"},{"location":"social/#example-4-get-unfinished-games-with-pagination","title":"Example 4: Get Unfinished Games with Pagination","text":"<p>JavaScript: <pre><code>async function getUnfinishedGames(offset = 0) {\n    const url = `https://www.geoguessr.com/api/v3/social/events/unfinishedgames?offset=${offset}`;\n    const response = await fetch(url, { credentials: 'include' });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const data = await response.json();\n    console.log(`Found ${data.games.length} unfinished games`);\n\n    data.games.forEach(game =&gt; {\n        console.log(`- ${game.map} (Round ${game.round}/${game.rounds})`);\n    });\n\n    return data;\n}\n\n// Get all unfinished games with pagination\nasync function getAllUnfinishedGames() {\n    let allGames = [];\n    let offset = 0;\n\n    while (true) {\n        const data = await getUnfinishedGames(offset);\n        allGames.push(...data.games);\n\n        if (!data.nextOffset) break;\n        offset = parseInt(data.nextOffset);\n    }\n\n    console.log(`Total unfinished games: ${allGames.length}`);\n    return allGames;\n}\n\n// Usage\nconst unfinished = await getAllUnfinishedGames();\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_unfinished_games(cookie, offset=0):\n    url = f'https://www.geoguessr.com/api/v3/social/events/unfinishedgames?offset={offset}'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    response.raise_for_status()\n\n    data = response.json()\n    print(f\"Found {len(data['games'])} unfinished games\")\n\n    for game in data['games']:\n        print(f\"- {game['map']} (Round {game['round']}/{game['rounds']})\")\n\n    return data\n\n# Get all unfinished games with pagination\ndef get_all_unfinished_games(cookie):\n    all_games = []\n    offset = 0\n\n    while True:\n        data = get_unfinished_games(cookie, offset)\n        all_games.extend(data['games'])\n\n        if 'nextOffset' not in data:\n            break\n        offset = int(data['nextOffset'])\n\n    print(f\"Total unfinished games: {len(all_games)}\")\n    return all_games\n\n# Usage\n# unfinished = get_all_unfinished_games('YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"social/#common-use-cases","title":"Common Use Cases","text":""},{"location":"social/#1-display-friends-list","title":"1. Display Friends List","text":"<pre><code>async function displayFriendsList() {\n    const friends = await getFriends();\n\n    const html = `\n        &lt;ul class=\"friends-list\"&gt;\n            ${friends.map(friend =&gt; `\n                &lt;li&gt;\n                    &lt;span class=\"flag\"&gt;${friend.countryCode}&lt;/span&gt;\n                    &lt;span class=\"name\"&gt;${friend.nick}&lt;/span&gt;\n                    ${friend.isVerified ? '&lt;span class=\"verified\"&gt;\u2713&lt;/span&gt;' : ''}\n                &lt;/li&gt;\n            `).join('')}\n        &lt;/ul&gt;\n    `;\n\n    return html;\n}\n</code></pre>"},{"location":"social/#2-badge-notification-system","title":"2. Badge Notification System","text":"<pre><code>async function checkForNewBadges() {\n    const badges = await checkUnclaimedBadges();\n\n    if (badges.length &gt; 0) {\n        // Show notification\n        console.log(`\ud83c\udfc6 You earned ${badges.length} new badge(s)!`);\n\n        // Auto-claim badges\n        for (const badge of badges) {\n            await claimBadge(badge.id);\n        }\n    }\n}\n</code></pre>"},{"location":"social/#testing","title":"Testing","text":"<p>See social-testing.md for console commands to test these endpoints.</p>"},{"location":"social/#notes-for-documentation-contributors","title":"Notes for Documentation Contributors","text":"<p>Verified: - [x] Complete friends list structure (userId field confirmed) - [x] Friend requests received structure - [x] Badge structure (id, name, hint, description, imagePath) - [x] Unfinished games structure with pagination - [x] Friend requests sent endpoint exists - [x] Friend suggestions endpoint exists - [x] Claimed badges endpoint structure - [x] Non-existent endpoints documented</p> <p>Still needs verification: - [ ] Friend request acceptance endpoint (POST /v3/social/friends/accept) - [ ] Friend request rejection endpoint (POST /v3/social/friends/reject) - [ ] Send friend request endpoint (POST /v3/social/friends/send) - [ ] Remove friend endpoint (DELETE /v3/social/friends/{userId}) - [ ] Badge claiming process (POST /v3/social/badges/claim) - [ ] Request body structures for POST/DELETE endpoints</p>"},{"location":"subscriptions/","title":"Subscriptions API","text":"<p>Endpoints for managing GeoGuessr Pro subscriptions and plans.</p>"},{"location":"subscriptions/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Endpoints</li> <li>Implementation Examples</li> </ul>"},{"location":"subscriptions/#overview","title":"Overview","text":"<p>GeoGuessr offers Pro subscriptions with additional features. These endpoints allow checking subscription status, available plans, and payment methods.</p> <p>\ud83d\ude80 Ready to use? Check out the subscriptions examples for ready-to-use scripts: - Check Subscription - View your subscription status and billing - Compare Plans - Compare all available plans and find best value</p>"},{"location":"subscriptions/#endpoints","title":"Endpoints","text":""},{"location":"subscriptions/#get-subscription-status","title":"Get Subscription Status","text":"<p>Get the current user's subscription information including plan details, billing dates, and status.</p> <p>Endpoint: <pre><code>GET /v3/subscriptions\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Subscription object with 21 fields</p> <p>Example Response: <pre><code>{\n  \"id\": \"sub_01kats6ms4h08eaqyvw7tabp23\",\n  \"type\": 0,\n  \"payProvider\": 6,\n  \"created\": \"2021-07-10T13:07:49.0000000Z\",\n  \"plan\": \"GeoGuessr Unlimited Yearly\",\n  \"planId\": \"pri_01jwb1q8brvfyr398bzsqxnh7e\",\n  \"cost\": 35.88,\n  \"currency\": \"USD\",\n  \"started\": \"2021-07-10\",\n  \"startedAt\": \"2021-07-10T13:07:49.0000000Z\",\n  \"trialEnd\": \"2021-07-20\",\n  \"trialEndingAt\": \"2021-07-20T13:07:51.0000000Z\",\n  \"periodEndsAt\": \"2026-07-20\",\n  \"periodEndingAt\": \"2026-07-20T06:12:56.0000000Z\",\n  \"canceled\": false,\n  \"interval\": 2,\n  \"memberLimit\": 0,\n  \"product\": 3,\n  \"isActive\": true,\n  \"isInTrialPeriod\": false,\n  \"isReferralReceiver\": false\n}\n</code></pre></p> <p>Important Notes: - Use <code>isActive</code> field to determine if user has Pro features - <code>plan</code> contains human-readable plan name - <code>planId</code> is the plan identifier for API calls - <code>periodEndingAt</code> shows when subscription renews - <code>interval</code>: 1 = monthly, 2 = yearly</p>"},{"location":"subscriptions/#get-subscription-plans","title":"Get Subscription Plans","text":"<p>Returns array of all available subscription plans with pricing information. Returns 14 plans covering different subscription types and billing periods.</p> <p>Endpoint: <pre><code>GET /v3/subscriptions/plans\n</code></pre></p> <p>Authentication: Not required</p> <p>Response: Array of 14 plan objects</p> <p>Example Response: <pre><code>[\n  {\n    \"id\": \"832300\",\n    \"type\": 0,\n    \"interval\": 1,\n    \"trialDays\": 0,\n    \"members\": 0,\n    \"product\": 2,\n    \"currency\": \"GBP\",\n    \"price\": 3.19,\n    \"pricePerMonth\": 3.19,\n    \"discount\": null,\n    \"payProvider\": 5,\n    \"checkoutUrl\": null\n  },\n  {\n    \"id\": \"pri_01jwb1q8brvfyr398bzsqxnh7e\",\n    \"type\": 0,\n    \"interval\": 2,\n    \"trialDays\": 0,\n    \"members\": 0,\n    \"product\": 3,\n    \"currency\": \"USD\",\n    \"price\": 35.88,\n    \"pricePerMonth\": 2.99,\n    \"discount\": null,\n    \"payProvider\": 6,\n    \"checkoutUrl\": null\n  }\n]\n</code></pre></p> <p>Plan Object Fields: - <code>id</code> - Plan identifier (used in subscriptions) - <code>type</code> - Plan type (0 = standard) - <code>interval</code> - Billing interval (1 = monthly, 2 = yearly) - <code>trialDays</code> - Number of trial days - <code>members</code> - Member limit (0 = no limit) - <code>product</code> - Product tier (2 = Pro, 3 = Unlimited, etc.) - <code>currency</code> - Currency code (USD, GBP, EUR, etc.) - <code>price</code> - Total price for billing period - <code>pricePerMonth</code> - Effective monthly cost - <code>discount</code> - Discount information (may be null) - <code>payProvider</code> - Payment provider ID - <code>checkoutUrl</code> - Checkout URL (may be null)</p> <p>Important Notes: - No authentication required - can be called anonymously - Returns 14 plans covering different subscription tiers - Use <code>interval</code> to distinguish monthly vs yearly plans - <code>pricePerMonth</code> is pre-calculated for comparison</p>"},{"location":"subscriptions/#get-subscription-invoices","title":"Get Subscription Invoices","text":"<p>Returns billing history and invoices for the authenticated user.</p> <p>Endpoint: <pre><code>GET /v3/subscriptions/invoices\n</code></pre></p> <p>Authentication: Required</p> <p>Response: Array of invoice objects</p> <p>Example Response: <pre><code>[\n  {\n    \"id\": \"40996693-116711856\",\n    \"date\": \"01/01/0001\",\n    \"total\": \"3.99\",\n    \"paid\": true,\n    \"invoiceUrl\": \"https://my.paddle.com/receipt/...\"\n  }\n]\n</code></pre></p> <p>Invoice Object Fields: - <code>id</code> - Invoice identifier - <code>date</code> - Invoice date - <code>total</code> - Total amount charged - <code>paid</code> - Payment status - <code>invoiceUrl</code> - URL to view/download invoice</p>"},{"location":"subscriptions/#google-play-subscriptions","title":"Google Play Subscriptions","text":"<p>Manage subscriptions through Google Play Store.</p> <p>Endpoint: <pre><code>POST /v3/subscriptions/google\n</code></pre></p> <p>Authentication: Required</p> <p>Status: Returns 405 Method Not Allowed on GET (requires POST)</p> <p>Request Body: (Structure needs verification) Likely contains Google Play purchase token or receipt.</p> <p>Expected Response: (Structure needs verification)</p> <p>Note: This endpoint is primarily used by the Android app for subscription verification.</p>"},{"location":"subscriptions/#data-structures","title":"Data Structures","text":""},{"location":"subscriptions/#subscription-object","title":"Subscription Object","text":"<p>Complete subscription object with all 21 fields:</p> <pre><code>interface Subscription {\n  id: string;                  // Subscription ID\n  type: number;                // Subscription type\n  payProvider: number;         // Payment provider ID (5 = Paddle, 6 = Stripe, etc.)\n  created: string;             // Creation timestamp (ISO 8601)\n  plan: string;                // Human-readable plan name\n  planId: string;              // Plan identifier for API calls\n  cost: number;                // Total cost for billing period\n  currency: string;            // Currency code (USD, GBP, EUR, etc.)\n  started: string;             // Start date (YYYY-MM-DD)\n  startedAt: string;           // Start timestamp (ISO 8601)\n  trialEnd: string;            // Trial end date (YYYY-MM-DD)\n  trialEndingAt: string;       // Trial end timestamp (ISO 8601)\n  periodEndsAt: string;        // Period end date (YYYY-MM-DD)\n  periodEndingAt: string;      // Period end timestamp (ISO 8601)\n  canceled: boolean;           // Whether subscription is canceled\n  interval: number;            // Billing interval (1 = monthly, 2 = yearly)\n  memberLimit: number;         // Member limit (0 = no limit)\n  product: number;             // Product tier (2 = Pro, 3 = Unlimited, etc.)\n  isActive: boolean;           // Whether subscription is active (USE THIS FOR PRO STATUS)\n  isInTrialPeriod: boolean;    // Whether currently in trial period\n  isReferralReceiver: boolean; // Whether subscription is from referral\n}\n</code></pre> <p>Key Fields for Pro Status: - <code>isActive</code> - Primary field to check if user has Pro access - <code>canceled</code> - If true, subscription won't renew - <code>periodEndingAt</code> - When current period ends</p>"},{"location":"subscriptions/#plan-object","title":"Plan Object","text":"<p>Complete plan object structure:</p> <pre><code>interface Plan {\n  id: string;                  // Plan identifier (use in subscription calls)\n  type: number;                // Plan type (0 = standard)\n  interval: number;            // Billing interval (1 = monthly, 2 = yearly)\n  trialDays: number;           // Number of trial days\n  members: number;             // Member limit (0 = no limit)\n  product: number;             // Product tier (2 = Pro, 3 = Unlimited, etc.)\n  currency: string;            // Currency code (USD, GBP, EUR, etc.)\n  price: number;               // Total price for billing period\n  pricePerMonth: number;       // Effective monthly cost\n  discount: any | null;        // Discount information\n  payProvider: number;         // Payment provider ID\n  checkoutUrl: string | null;  // Checkout URL (may be null)\n}\n</code></pre>"},{"location":"subscriptions/#invoice-object","title":"Invoice Object","text":"<pre><code>interface Invoice {\n  id: string;                  // Invoice identifier\n  date: string;                // Invoice date\n  total: string;               // Total amount (as string)\n  paid: boolean;               // Payment status\n  invoiceUrl: string;          // URL to view/download invoice\n}\n</code></pre>"},{"location":"subscriptions/#implementation-examples","title":"Implementation Examples","text":""},{"location":"subscriptions/#example-1-check-subscription-status","title":"Example 1: Check Subscription Status","text":"<p>JavaScript: <pre><code>async function checkSubscription() {\n    const response = await fetch('https://www.geoguessr.com/api/v3/subscriptions', {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const subscription = await response.json();\n\n    if (subscription.isActive) {\n        console.log('\u2705 Pro User');\n        console.log(`Plan: ${subscription.plan}`);\n        console.log(`Cost: ${subscription.cost} ${subscription.currency}`);\n        console.log(`Renews: ${subscription.periodEndingAt}`);\n        console.log(`Canceled: ${subscription.canceled}`);\n    } else {\n        console.log('\u274c Free User or Expired Subscription');\n    }\n\n    return subscription;\n}\n\n// Usage\nconst subscription = await checkSubscription();\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef check_subscription(cookie):\n    url = 'https://www.geoguessr.com/api/v3/subscriptions'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    response.raise_for_status()\n\n    subscription = response.json()\n\n    if subscription.get('isActive'):\n        print('\u2705 Pro User')\n        print(f\"Plan: {subscription.get('plan')}\")\n        print(f\"Cost: {subscription.get('cost')} {subscription.get('currency')}\")\n        print(f\"Renews: {subscription.get('periodEndingAt')}\")\n        print(f\"Canceled: {subscription.get('canceled')}\")\n    else:\n        print('\u274c Free User or Expired Subscription')\n\n    return subscription\n\n# Usage\n# subscription = check_subscription('YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"subscriptions/#example-2-get-available-plans","title":"Example 2: Get Available Plans","text":"<p>JavaScript: <pre><code>async function getSubscriptionPlans() {\n    const response = await fetch('https://www.geoguessr.com/api/v3/subscriptions/plans');\n    // No credentials needed - endpoint is public\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const plans = await response.json();\n\n    console.log(`Found ${plans.length} subscription plans:`);\n    plans.forEach(plan =&gt; {\n        const period = plan.interval === 1 ? 'monthly' : 'yearly';\n        const price = `${plan.price} ${plan.currency}`;\n        const perMonth = `(${plan.pricePerMonth}/month)`;\n        console.log(`- Plan ${plan.id}: ${price}/${period} ${perMonth}`);\n    });\n\n    return plans;\n}\n\n// Usage\nconst plans = await getSubscriptionPlans();\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_subscription_plans():\n    url = 'https://www.geoguessr.com/api/v3/subscriptions/plans'\n    # No authentication needed\n    response = requests.get(url)\n    response.raise_for_status()\n\n    plans = response.json()\n\n    print(f'Found {len(plans)} subscription plans:')\n    for plan in plans:\n        period = 'monthly' if plan['interval'] == 1 else 'yearly'\n        price = f\"{plan['price']} {plan['currency']}\"\n        per_month = f\"({plan['pricePerMonth']}/month)\"\n        print(f\"- Plan {plan['id']}: {price}/{period} {per_month}\")\n\n    return plans\n\n# Usage\n# plans = get_subscription_plans()\n</code></pre></p>"},{"location":"subscriptions/#example-3-check-if-user-is-pro","title":"Example 3: Check if User is Pro","text":"<p>JavaScript: <pre><code>async function isProUser() {\n    try {\n        const subscription = await checkSubscription();\n        return subscription.isActive === true;\n    } catch (error) {\n        console.error('Error checking Pro status:', error);\n        return false;\n    }\n}\n\n// Usage\nif (await isProUser()) {\n    console.log('User has Pro features');\n} else {\n    console.log('User has limited features');\n}\n</code></pre></p>"},{"location":"subscriptions/#example-4-get-billing-history","title":"Example 4: Get Billing History","text":"<p>JavaScript: <pre><code>async function getBillingHistory() {\n    const response = await fetch('https://www.geoguessr.com/api/v3/subscriptions/invoices', {\n        credentials: 'include'\n    });\n\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n    }\n\n    const invoices = await response.json();\n\n    console.log(`Found ${invoices.length} invoices:`);\n    invoices.forEach(invoice =&gt; {\n        const status = invoice.paid ? '\u2705 Paid' : '\u274c Unpaid';\n        console.log(`- ${invoice.date}: ${invoice.total} ${status}`);\n        console.log(`  URL: ${invoice.invoiceUrl}`);\n    });\n\n    return invoices;\n}\n\n// Usage\nconst invoices = await getBillingHistory();\n</code></pre></p> <p>Python: <pre><code>import requests\n\ndef get_billing_history(cookie):\n    url = 'https://www.geoguessr.com/api/v3/subscriptions/invoices'\n    response = requests.get(url, cookies={'_ncfa': cookie})\n    response.raise_for_status()\n\n    invoices = response.json()\n\n    print(f'Found {len(invoices)} invoices:')\n    for invoice in invoices:\n        status = '\u2705 Paid' if invoice['paid'] else '\u274c Unpaid'\n        print(f\"- {invoice['date']}: {invoice['total']} {status}\")\n        print(f\"  URL: {invoice['invoiceUrl']}\")\n\n    return invoices\n\n# Usage\n# invoices = get_billing_history('YOUR_NCFA_COOKIE')\n</code></pre></p>"},{"location":"subscriptions/#common-use-cases","title":"Common Use Cases","text":""},{"location":"subscriptions/#1-display-subscription-status","title":"1. Display Subscription Status","text":"<pre><code>async function displaySubscriptionStatus() {\n    const subscription = await checkSubscription();\n\n    if (subscription.isActive) {\n        const expiryDate = new Date(subscription.periodEndingAt);\n        const daysRemaining = Math.ceil((expiryDate - new Date()) / (1000 * 60 * 60 * 24));\n        const isCanceled = subscription.canceled ? ' (Canceling)' : '';\n\n        return `\n            &lt;div class=\"subscription-status pro\"&gt;\n                &lt;h3&gt;GeoGuessr Pro \u2b50${isCanceled}&lt;/h3&gt;\n                &lt;p&gt;Plan: ${subscription.plan}&lt;/p&gt;\n                &lt;p&gt;Cost: ${subscription.cost} ${subscription.currency}&lt;/p&gt;\n                &lt;p&gt;Renews: ${expiryDate.toLocaleDateString()}&lt;/p&gt;\n                &lt;p&gt;Days remaining: ${daysRemaining}&lt;/p&gt;\n                ${subscription.isInTrialPeriod ? '&lt;p class=\"trial\"&gt;\ud83c\udf81 In Trial Period&lt;/p&gt;' : ''}\n            &lt;/div&gt;\n        `;\n    } else {\n        return `\n            &lt;div class=\"subscription-status free\"&gt;\n                &lt;h3&gt;Free Account&lt;/h3&gt;\n                &lt;button onclick=\"upgradeToPro()\"&gt;Upgrade to Pro&lt;/button&gt;\n            &lt;/div&gt;\n        `;\n    }\n}\n</code></pre>"},{"location":"subscriptions/#2-feature-gating","title":"2. Feature Gating","text":"<pre><code>async function checkFeatureAccess(feature) {\n    const proFeatures = [\n        'unlimited_games',\n        'custom_maps',\n        'no_ads',\n        'party_mode'\n    ];\n\n    if (proFeatures.includes(feature)) {\n        const isPro = await isProUser();\n        if (!isPro) {\n            throw new Error('This feature requires GeoGuessr Pro');\n        }\n    }\n\n    return true;\n}\n\n// Usage\n// try {\n//     await checkFeatureAccess('custom_maps');\n//     // Allow access to feature\n// } catch (error) {\n//     // Show upgrade prompt\n// }\n</code></pre>"},{"location":"subscriptions/#3-compare-plans","title":"3. Compare Plans","text":"<pre><code>async function comparePlans() {\n    const plans = await getSubscriptionPlans();\n\n    // Group by product tier\n    const comparison = plans.map(plan =&gt; {\n        const period = plan.interval === 1 ? 'Monthly' : 'Yearly';\n\n        // Find corresponding monthly plan for savings calculation\n        const monthlyPlan = plans.find(p =&gt;\n            p.product === plan.product &amp;&amp;\n            p.interval === 1 &amp;&amp;\n            p.currency === plan.currency\n        );\n\n        const yearlyCost = plan.interval === 2 ? plan.price : null;\n        const monthlyCost = monthlyPlan ? monthlyPlan.price : null;\n        const savings = (yearlyCost &amp;&amp; monthlyCost)\n            ? ((monthlyCost * 12) - yearlyCost).toFixed(2)\n            : null;\n\n        return {\n            id: plan.id,\n            product: plan.product,\n            period: period,\n            price: `${plan.price} ${plan.currency}`,\n            perMonth: `${plan.pricePerMonth} ${plan.currency}`,\n            savings: savings ? `${savings} ${plan.currency}` : 'N/A'\n        };\n    });\n\n    console.table(comparison);\n    return comparison;\n}\n</code></pre>"},{"location":"subscriptions/#non-working-endpoints","title":"Non-Working Endpoints","text":"<p>The following endpoints exist but return 405 Method Not Allowed on GET requests. They likely require POST with specific request bodies:</p> <ul> <li><code>POST /v3/subscriptions/status</code> - Subscription status update (405 on GET)</li> <li><code>POST /v3/subscriptions/history</code> - Subscription history (405 on GET)</li> <li><code>POST /v3/subscriptions/cancel</code> - Cancel subscription (405 on GET)</li> <li><code>POST /v3/subscriptions/apple</code> - Apple App Store verification (405 on GET)</li> <li><code>POST /v3/subscriptions/stripe</code> - Stripe payment handling (405 on GET)</li> <li><code>POST /v3/subscriptions/upgrade</code> - Upgrade subscription (405 on GET)</li> </ul> <p>Non-existent endpoints (404): - <code>GET /v4/subscriptions</code> - v4 subscriptions endpoint doesn't exist</p> <p>Note: Most subscription management (upgrades, cancellations) is typically handled through payment providers (Paddle, Stripe) or the web UI rather than direct API calls.</p>"},{"location":"subscriptions/#testing","title":"Testing","text":"<p>See subscriptions-testing.md for console commands to test these endpoints.</p>"},{"location":"subscriptions/#notes-for-documentation-contributors","title":"Notes for Documentation Contributors","text":"<p>Verified: - [x] Complete subscription object structure (21 fields) - [x] All available plans structure (14 plans, 12 fields each) - [x] Plans endpoint doesn't require authentication - [x] Invoice/billing history endpoint - [x] Trial period information fields - [x] Google Play, Apple, Stripe endpoints exist (require POST) - [x] Payment provider IDs (5 = Paddle, 6 = Stripe, etc.)</p> <p>Still needs verification: - [ ] Request body structures for POST endpoints - [ ] Subscription cancel process - [ ] Subscription upgrade process - [ ] Promotional codes/discounts structure - [ ] Complete invoice object structure - [ ] Payment method management endpoints - [ ] Refund/chargeback handling</p>"},{"location":"subscriptions/#important-notes","title":"Important Notes","text":"<ol> <li> <p>Subscription Management: Most subscription changes (upgrades, cancellations) are likely handled through the web UI or payment providers (Stripe, Google Play, Apple App Store) rather than direct API calls.</p> </li> <li> <p>Pricing: Prices may vary by region and are subject to change.</p> </li> <li> <p>Free Tier: Free users have limited daily games and access to fewer features.</p> </li> <li> <p>Pro Features (typical):</p> </li> <li>Unlimited games</li> <li>Custom map creation</li> <li>No advertisements</li> <li>Party mode</li> <li>Advanced statistics</li> </ol>"},{"location":"websocket/","title":"GeoGuessr WebSocket API","text":"<p>The WebSocket API provides live updates for social features, friend presence, chat messages, and personal notifications.</p> <p>WebSocket URL: <code>wss://api.geoguessr.com/ws</code></p>"},{"location":"websocket/#overview","title":"Overview","text":"<p>The GeoGuessr WebSocket is used for receiving live notifications and social updates. It is NOT used for game state data (duels, challenges, etc.) - that data is retrieved via REST API endpoints.</p>"},{"location":"websocket/#what-the-websocket-is-used-for","title":"What the WebSocket Is Used For","text":"<ul> <li>Friend presence (online/offline status)</li> <li>Friend activity updates (what games they're playing)</li> <li>Chat messages</li> <li>Personal notifications</li> <li>Account updates (coins earned, level ups)</li> <li>Daily mission updates</li> <li>Friends list changes</li> </ul>"},{"location":"websocket/#what-the-websocket-is-not-used-for","title":"What the WebSocket Is NOT Used For","text":"<ul> <li>Duel game state (use Duels API REST endpoints)</li> <li>Challenge data (use REST API)</li> <li>Game progress/scores (use REST API)</li> <li>Profile data (use Profiles API)</li> </ul>"},{"location":"websocket/#connection-authentication","title":"Connection &amp; Authentication","text":""},{"location":"websocket/#connecting","title":"Connecting","text":"<p>The WebSocket requires cookie-based authentication via the <code>_ncfa</code> cookie.</p> <p>Connection URL: <pre><code>wss://api.geoguessr.com/ws\n</code></pre></p> <p>Required Headers: <pre><code>Cookie: _ncfa=YOUR_NCFA_COOKIE_VALUE\nOrigin: https://www.geoguessr.com\n</code></pre></p> <p>Example (JavaScript): <pre><code>const ws = new WebSocket('wss://api.geoguessr.com/ws');\n\nws.onopen = () =&gt; {\n    console.log('Connected to GeoGuessr WebSocket');\n};\n</code></pre></p> <p>Example (Python): <pre><code>import asyncio\nimport websockets\n\nasync def connect():\n    uri = \"wss://api.geoguessr.com/ws\"\n    headers = {\n        \"Cookie\": f\"_ncfa={COOKIE_VALUE}\",\n        \"Origin\": \"https://www.geoguessr.com\"\n    }\n\n    async with websockets.connect(uri, additional_headers=headers) as ws:\n        print(\"Connected!\")\n</code></pre></p>"},{"location":"websocket/#heartbeat-requirement","title":"Heartbeat Requirement","text":"<p>CRITICAL: You must send a heartbeat message every 15 seconds to keep the connection alive.</p> <p>Heartbeat Message: <pre><code>{\n  \"code\": \"HeartBeat\"\n}\n</code></pre></p> <p>Example: <pre><code>// Send heartbeat every 15 seconds\nsetInterval(() =&gt; {\n    ws.send(JSON.stringify({ code: 'HeartBeat' }));\n}, 15000);\n</code></pre></p> <p>Note: The server does not send acknowledgments for heartbeat messages.</p>"},{"location":"websocket/#connection-stability","title":"Connection Stability","text":"<p>The WebSocket connection may disconnect at random intervals. Implement reconnection logic to handle this:</p> <pre><code>function connectWithReconnect() {\n    const ws = new WebSocket('wss://api.geoguessr.com/ws');\n\n    ws.onclose = () =&gt; {\n        console.log('Disconnected, reconnecting in 5 seconds...');\n        setTimeout(connectWithReconnect, 5000);\n    };\n\n    // ... rest of setup\n}\n</code></pre>"},{"location":"websocket/#subscribing-to-topics","title":"Subscribing to Topics","text":"<p>After connecting, you must subscribe to topics to receive events.</p>"},{"location":"websocket/#subscribe-message-format","title":"Subscribe Message Format","text":"<pre><code>{\n  \"code\": \"Subscribe\",\n  \"topic\": \"TOPIC_PATTERN\",\n  \"client\": \"web\"\n}\n</code></pre>"},{"location":"websocket/#available-topics","title":"Available Topics","text":""},{"location":"websocket/#1-personal-notifications","title":"1. Personal Notifications","text":"<p>Topic: <code>self:{userId}</code></p> <p>Events Received: - Friend presence updates - Account updates - Notification pings - Mission updates - Friend activity changes</p> <p>Example: <pre><code>ws.send(JSON.stringify({\n    code: 'Subscribe',\n    topic: 'self:5db9f057dfa5102130eaf747',\n    client: 'web'\n}));\n</code></pre></p>"},{"location":"websocket/#2-friend-chat-messages","title":"2. Friend Chat Messages","text":"<p>Topic: <code>chat:Friend:TextMessages:{userId}</code></p> <p>Events Received: - Chat messages sent and received</p> <p>Example: <pre><code>ws.send(JSON.stringify({\n    code: 'Subscribe',\n    topic: 'chat:Friend:TextMessages:5db9f057dfa5102130eaf747',\n    client: 'web'\n}));\n</code></pre></p> <p>Note: The server does not send acknowledgments for subscribe messages.</p>"},{"location":"websocket/#event-types","title":"Event Types","text":"<p>All incoming messages follow this structure:</p> <pre><code>{\n  code: string;           // Event type\n  topic: string;          // Topic it was sent to\n  payload: string | null; // JSON-encoded payload (or null)\n  accessToken: null;      // Always null\n  client: \"Unknown\";      // Client identifier\n  timestamp: string;      // ISO 8601 server timestamp\n}\n</code></pre>"},{"location":"websocket/#1-friendcameonline","title":"1. FriendCameOnline","text":"<p>Sent when a friend comes online.</p> <p>Topic: <code>self:{userId}</code></p> <p>Payload Structure: <pre><code>{\n  friendId: string;\n}\n</code></pre></p> <p>Example: <pre><code>{\n  \"code\": \"FriendCameOnline\",\n  \"topic\": \"self:5db9f057dfa5102130eaf747\",\n  \"payload\": \"{\\\"friendId\\\":\\\"5e3f434a1e34a041f065b2f4\\\"}\",\n  \"accessToken\": null,\n  \"client\": \"Unknown\",\n  \"timestamp\": \"2026-01-12T01:02:54.2926573Z\"\n}\n</code></pre></p>"},{"location":"websocket/#2-friendwentoffline","title":"2. FriendWentOffline","text":"<p>Sent when a friend goes offline.</p> <p>Topic: <code>self:{userId}</code></p> <p>Payload Structure: <pre><code>{\n  friendId: string;\n}\n</code></pre></p> <p>Example: <pre><code>{\n  \"code\": \"FriendWentOffline\",\n  \"topic\": \"self:5db9f057dfa5102130eaf747\",\n  \"payload\": \"{\\\"friendId\\\":\\\"5e3f434a1e34a041f065b2f4\\\"}\",\n  \"accessToken\": null,\n  \"client\": \"Unknown\",\n  \"timestamp\": \"2026-01-12T01:02:52.5097228Z\"\n}\n</code></pre></p>"},{"location":"websocket/#3-statusactivitychanged","title":"3. StatusActivityChanged","text":"<p>Sent when a friend's activity status changes (starts playing a game, etc.).</p> <p>Topic: <code>self:{userId}</code></p> <p>Payload Structure: <pre><code>{\n  friendId: string;\n  activity: {\n    activityType: string;  // e.g., \"PlayingClassicDistance\"\n    timestamp: string;     // ISO 8601\n    data: {\n      map: string;         // Map name\n      platform: string;    // \"Web\", \"Mobile\", etc.\n    };\n  };\n}\n</code></pre></p> <p>Example: <pre><code>{\n  \"code\": \"StatusActivityChanged\",\n  \"topic\": \"self:5db9f057dfa5102130eaf747\",\n  \"payload\": \"{\\\"friendId\\\":\\\"5bbdcfab2c01735208565bce\\\",\\\"activity\\\":{\\\"activityType\\\":\\\"PlayingClassicDistance\\\",\\\"timestamp\\\":\\\"2026-01-12T01:08:04.8781141Z\\\",\\\"data\\\":{\\\"map\\\":\\\"A Learnable Meta Brazil - Vegetation\\\",\\\"platform\\\":\\\"Web\\\"}}}\",\n  \"accessToken\": null,\n  \"client\": \"Unknown\",\n  \"timestamp\": \"2026-01-12T01:08:04.8852497Z\"\n}\n</code></pre></p> <p>Known Activity Types: - <code>PlayingClassicDistance</code> - Playing classic distance mode</p>"},{"location":"websocket/#4-chatmessage","title":"4. ChatMessage","text":"<p>Sent when you send or receive a friend chat message.</p> <p>Topic: <code>chat:Friend:TextMessages:{userId}</code></p> <p>Payload Structure: <pre><code>{\n  id: string;                    // Message ID\n  payloadType: \"Text\";           // Message type\n  textPayload: string;           // Actual message content\n  invitePayload: null | object;  // Game invite data (if applicable)\n  recipientType: \"User\";\n  recipientId: string;           // Recipient user ID\n  sourceType: \"User\";\n  sourceId: string;              // Sender user ID\n  sentAt: string;                // ISO 8601 timestamp\n  roomId: string;                // Format: \"userId1:userId2\"\n  context: \"Friend\";\n  channel: null | string;\n  clubPayload: null | object;\n}\n</code></pre></p> <p>Example: <pre><code>{\n  \"code\": \"ChatMessage\",\n  \"topic\": \"chat:Friend:TextMessages:5db9f057dfa5102130eaf747\",\n  \"payload\": \"{\\\"id\\\":\\\"FKXjLFR1U0\\\",\\\"payloadType\\\":\\\"Text\\\",\\\"textPayload\\\":\\\"test (ignore this)\\\",\\\"invitePayload\\\":null,\\\"recipientType\\\":\\\"User\\\",\\\"recipientId\\\":\\\"67928098295f7b13ef8f810f\\\",\\\"sourceType\\\":\\\"User\\\",\\\"sourceId\\\":\\\"5db9f057dfa5102130eaf747\\\",\\\"sentAt\\\":\\\"2026-01-12T01:00:10.4201917Z\\\",\\\"roomId\\\":\\\"5db9f057dfa5102130eaf747:67928098295f7b13ef8f810f\\\",\\\"context\\\":\\\"Friend\\\",\\\"channel\\\":null,\\\"clubPayload\\\":null}\",\n  \"accessToken\": null,\n  \"client\": \"Unknown\",\n  \"timestamp\": \"2026-01-12T01:00:10.4201975Z\"\n}\n</code></pre></p>"},{"location":"websocket/#5-friendsupdated","title":"5. FriendsUpdated","text":"<p>Sent when your friends list changes.</p> <p>Topic: <code>self:{userId}</code></p> <p>Payload: <code>null</code></p> <p>Example: <pre><code>{\n  \"code\": \"FriendsUpdated\",\n  \"topic\": \"self:5db9f057dfa5102130eaf747\",\n  \"payload\": null,\n  \"accessToken\": null,\n  \"client\": \"Unknown\",\n  \"timestamp\": \"2026-01-12T00:59:14.9872957Z\"\n}\n</code></pre></p> <p>Important: Payload is null. This is a signal to refetch friends list via REST API.</p>"},{"location":"websocket/#6-notificationupdate","title":"6. NotificationUpdate","text":"<p>Sent when you have new notifications.</p> <p>Topic: <code>self:{userId}</code></p> <p>Payload: <code>null</code></p> <p>Example: <pre><code>{\n  \"code\": \"NotificationUpdate\",\n  \"topic\": \"self:5db9f057dfa5102130eaf747\",\n  \"payload\": null,\n  \"accessToken\": null,\n  \"client\": \"Unknown\",\n  \"timestamp\": \"2026-01-12T00:59:15.0110082Z\"\n}\n</code></pre></p> <p>Important: Payload is null. This is a signal to refetch notifications via REST API.</p>"},{"location":"websocket/#7-accountupdate","title":"7. AccountUpdate","text":"<p>Sent when account data changes (coins earned, XP gained, level up, etc.).</p> <p>Topic: <code>self:{userId}</code></p> <p>Payload: <code>null</code></p> <p>Example: <pre><code>{\n  \"code\": \"AccountUpdate\",\n  \"topic\": \"self:5db9f057dfa5102130eaf747\",\n  \"payload\": null,\n  \"accessToken\": null,\n  \"client\": \"Unknown\",\n  \"timestamp\": \"2026-01-12T01:01:43.0524278Z\"\n}\n</code></pre></p> <p>Important: Payload is null. This is a signal to refetch account/profile data via REST API.</p>"},{"location":"websocket/#8-missionsupdated","title":"8. MissionsUpdated","text":"<p>Sent when daily missions update or progress changes.</p> <p>Topic: <code>self:{userId}</code></p> <p>Payload Structure: <pre><code>{\n  missions: Array&lt;{\n    id: string;              // Mission ID (UUID)\n    type: string;            // e.g., \"Score\"\n    gameMode: string;        // e.g., \"Classic\"\n    currentProgress: number; // Current progress\n    targetProgress: number;  // Target to complete\n    completed: boolean;\n    endDate: string;         // ISO 8601\n    rewardAmount: number;\n    rewardType: string;      // e.g., \"Coins\"\n    mapName: string;\n    mapSlug: string;\n  }&gt;;\n  nextMissionDate: string;   // ISO 8601\n}\n</code></pre></p> <p>Example: <pre><code>{\n  \"code\": \"MissionsUpdated\",\n  \"topic\": \"self:5db9f057dfa5102130eaf747\",\n  \"payload\": \"{\\\"missions\\\":[{\\\"id\\\":\\\"223df977-45a2-4f65-9f31-4c6f2423d4df\\\",\\\"type\\\":\\\"Score\\\",\\\"gameMode\\\":\\\"Classic\\\",\\\"currentProgress\\\":0,\\\"targetProgress\\\":30000,\\\"completed\\\":false,\\\"endDate\\\":\\\"2026-01-13T00:00:00Z\\\",\\\"rewardAmount\\\":90,\\\"rewardType\\\":\\\"Coins\\\",\\\"mapName\\\":\\\"Dominican Republic\\\",\\\"mapSlug\\\":\\\"dominican-republic\\\"}],\\\"nextMissionDate\\\":\\\"2026-01-13T00:00:00Z\\\"}\",\n  \"accessToken\": null,\n  \"client\": \"Unknown\",\n  \"timestamp\": \"2026-01-12T01:01:43.11182Z\"\n}\n</code></pre></p>"},{"location":"websocket/#complete-example-javascript","title":"Complete Example (JavaScript)","text":"<pre><code>// Connect to WebSocket\nconst ws = new WebSocket('wss://api.geoguessr.com/ws');\nconst userId = 'YOUR_USER_ID';\n\nws.onopen = () =&gt; {\n    console.log('Connected!');\n\n    // Subscribe to topics\n    ws.send(JSON.stringify({\n        code: 'Subscribe',\n        topic: `self:${userId}`,\n        client: 'web'\n    }));\n\n    ws.send(JSON.stringify({\n        code: 'Subscribe',\n        topic: `chat:Friend:TextMessages:${userId}`,\n        client: 'web'\n    }));\n\n    // Start heartbeat\n    setInterval(() =&gt; {\n        ws.send(JSON.stringify({ code: 'HeartBeat' }));\n    }, 15000);\n};\n\nws.onmessage = (event) =&gt; {\n    const message = JSON.parse(event.data);\n\n    switch (message.code) {\n        case 'FriendCameOnline':\n            const friendOnline = JSON.parse(message.payload);\n            console.log(`Friend ${friendOnline.friendId} came online`);\n            break;\n\n        case 'FriendWentOffline':\n            const friendOffline = JSON.parse(message.payload);\n            console.log(`Friend ${friendOffline.friendId} went offline`);\n            break;\n\n        case 'ChatMessage':\n            const chat = JSON.parse(message.payload);\n            console.log(`Message from ${chat.sourceId}: ${chat.textPayload}`);\n            break;\n\n        case 'StatusActivityChanged':\n            const activity = JSON.parse(message.payload);\n            console.log(`Friend ${activity.friendId} is now: ${activity.activity.activityType}`);\n            break;\n\n        case 'MissionsUpdated':\n            const missions = JSON.parse(message.payload);\n            console.log(`${missions.missions.length} missions available`);\n            break;\n\n        case 'AccountUpdate':\n            console.log('Account updated - refresh profile data');\n            break;\n\n        case 'FriendsUpdated':\n            console.log('Friends list updated - refresh friends');\n            break;\n\n        case 'NotificationUpdate':\n            console.log('New notifications - refresh notification data');\n            break;\n\n        default:\n            console.log('Unknown event:', message.code);\n    }\n};\n\nws.onclose = () =&gt; {\n    console.log('Disconnected');\n};\n\nws.onerror = (error) =&gt; {\n    console.error('WebSocket error:', error);\n};\n</code></pre>"},{"location":"websocket/#complete-example-python","title":"Complete Example (Python)","text":"<pre><code>import asyncio\nimport websockets\nimport json\nimport os\n\nUSER_ID = \"YOUR_USER_ID\"\nCOOKIE = os.getenv('GEOGUESSR_COOKIE')\n\nasync def handle_message(message_data):\n    \"\"\"Handle incoming WebSocket message\"\"\"\n    message = json.loads(message_data)\n    code = message.get('code')\n\n    if code == 'FriendCameOnline':\n        payload = json.loads(message['payload'])\n        print(f\"Friend {payload['friendId']} came online\")\n\n    elif code == 'FriendWentOffline':\n        payload = json.loads(message['payload'])\n        print(f\"Friend {payload['friendId']} went offline\")\n\n    elif code == 'ChatMessage':\n        payload = json.loads(message['payload'])\n        print(f\"Message from {payload['sourceId']}: {payload['textPayload']}\")\n\n    elif code == 'StatusActivityChanged':\n        payload = json.loads(message['payload'])\n        activity_type = payload['activity']['activityType']\n        print(f\"Friend {payload['friendId']} is now: {activity_type}\")\n\n    elif code == 'MissionsUpdated':\n        payload = json.loads(message['payload'])\n        print(f\"{len(payload['missions'])} missions available\")\n\n    elif code == 'AccountUpdate':\n        print(\"Account updated - refresh profile data\")\n\n    elif code == 'FriendsUpdated':\n        print(\"Friends list updated - refresh friends\")\n\n    elif code == 'NotificationUpdate':\n        print(\"New notifications - refresh notification data\")\n\n    else:\n        print(f\"Unknown event: {code}\")\n\n\nasync def heartbeat(websocket):\n    \"\"\"Send heartbeat every 15 seconds\"\"\"\n    while True:\n        await asyncio.sleep(15)\n        await websocket.send(json.dumps({'code': 'HeartBeat'}))\n\n\nasync def listen_to_websocket():\n    uri = \"wss://api.geoguessr.com/ws\"\n    headers = {\n        \"Cookie\": f\"_ncfa={COOKIE}\",\n        \"Origin\": \"https://www.geoguessr.com\"\n    }\n\n    async with websockets.connect(uri, additional_headers=headers) as ws:\n        print(\"Connected!\")\n\n        # Subscribe to topics\n        await ws.send(json.dumps({\n            \"code\": \"Subscribe\",\n            \"topic\": f\"self:{USER_ID}\",\n            \"client\": \"web\"\n        }))\n\n        await ws.send(json.dumps({\n            \"code\": \"Subscribe\",\n            \"topic\": f\"chat:Friend:TextMessages:{USER_ID}\",\n            \"client\": \"web\"\n        }))\n\n        # Start heartbeat task\n        heartbeat_task = asyncio.create_task(heartbeat(ws))\n\n        try:\n            # Listen for messages\n            async for message in ws:\n                await handle_message(message)\n        except KeyboardInterrupt:\n            print(\"Stopping...\")\n        finally:\n            heartbeat_task.cancel()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(listen_to_websocket())\n</code></pre>"},{"location":"websocket/#data-structures-typescript","title":"Data Structures (TypeScript)","text":""},{"location":"websocket/#base-message","title":"Base Message","text":"<pre><code>interface WebSocketMessage {\n  code: WebSocketEventCode;\n  topic: string;\n  payload: string | null;\n  accessToken: null;\n  client: \"Unknown\" | string;\n  timestamp: string;  // ISO 8601\n}\n\ntype WebSocketEventCode =\n  | \"FriendCameOnline\"\n  | \"FriendWentOffline\"\n  | \"StatusActivityChanged\"\n  | \"ChatMessage\"\n  | \"FriendsUpdated\"\n  | \"NotificationUpdate\"\n  | \"AccountUpdate\"\n  | \"MissionsUpdated\"\n  | string;\n</code></pre>"},{"location":"websocket/#outgoing-messages","title":"Outgoing Messages","text":"<pre><code>interface SubscribeMessage {\n  code: \"Subscribe\";\n  topic: string;\n  client: \"web\";\n}\n\ninterface HeartBeatMessage {\n  code: \"HeartBeat\";\n}\n</code></pre>"},{"location":"websocket/#event-payloads","title":"Event Payloads","text":"<pre><code>interface FriendPresencePayload {\n  friendId: string;\n}\n\ninterface StatusActivityPayload {\n  friendId: string;\n  activity: {\n    activityType: string;\n    timestamp: string;\n    data: {\n      map: string;\n      platform: string;\n    };\n  };\n}\n\ninterface ChatMessagePayload {\n  id: string;\n  payloadType: \"Text\";\n  textPayload: string;\n  invitePayload: null | object;\n  recipientType: \"User\";\n  recipientId: string;\n  sourceType: \"User\";\n  sourceId: string;\n  sentAt: string;\n  roomId: string;\n  context: \"Friend\";\n  channel: null | string;\n  clubPayload: null | object;\n}\n\ninterface MissionsUpdatedPayload {\n  missions: Mission[];\n  nextMissionDate: string;\n}\n\ninterface Mission {\n  id: string;\n  type: string;\n  gameMode: string;\n  currentProgress: number;\n  targetProgress: number;\n  completed: boolean;\n  endDate: string;\n  rewardAmount: number;\n  rewardType: string;\n  mapName: string;\n  mapSlug: string;\n}\n</code></pre>"},{"location":"websocket/#notes","title":"Notes","text":""},{"location":"websocket/#payload-encoding","title":"Payload Encoding","text":"<p>When <code>payload</code> is not null, it contains a JSON-encoded string that must be parsed:</p> <pre><code>const message = JSON.parse(event.data);  // Parse outer message\nif (message.payload) {\n    const payload = JSON.parse(message.payload);  // Parse inner payload\n}\n</code></pre>"},{"location":"websocket/#null-payloads","title":"Null Payloads","text":"<p>Events with null payloads (<code>FriendsUpdated</code>, <code>NotificationUpdate</code>, <code>AccountUpdate</code>) are signals to refresh data via REST API endpoints. They don't contain the actual data.</p>"},{"location":"websocket/#connection-reliability","title":"Connection Reliability","text":"<p>The WebSocket connection may drop unexpectedly. Always implement: - Reconnection logic - Heartbeat monitoring - Event buffering (if needed)</p>"},{"location":"websocket/#no-server-acknowledgments","title":"No Server Acknowledgments","text":"<p>The server does not send responses for: - <code>Subscribe</code> messages - <code>HeartBeat</code> messages</p> <p>Assume they succeeded if the connection remains open.</p>"},{"location":"websocket/#topics-requiring-ids","title":"Topics Requiring IDs","text":"<p>Both topics require your user ID: - Get your user ID from <code>/api/v3/profiles</code> endpoint - User ID is found in the <code>id</code> field of your profile</p>"},{"location":"websocket/#related-endpoints","title":"Related Endpoints","text":"<p>For data retrieval when receiving null-payload events:</p> <ul> <li>Profiles API - Get account/profile data</li> <li>Social API - Get friends list and notifications</li> <li>Feed API - Get friend activity details</li> </ul> <p>For game state data:</p> <ul> <li>Duels API - Duel game state (uses REST API, not WebSocket)</li> <li>Games API - Game sessions and progress</li> <li>Challenges API - Challenge data</li> </ul>"},{"location":"examples/","title":"GeoGuessr API Examples","text":"<p>This directory contains practical, ready-to-use code examples for interacting with the GeoGuessr API in both JavaScript and Python.</p> <p>\ud83d\udca1 To view and download the source code files, visit the examples directory on GitHub.</p>"},{"location":"examples/#directory-structure","title":"Directory Structure","text":"<pre><code>examples/\n\u251c\u2500\u2500 javascript/          # Browser console examples\n\u2502   \u251c\u2500\u2500 challenges/      # Challenge leaderboards and info\n\u2502   \u251c\u2500\u2500 profiles/        # User profiles and search\n\u2502   \u251c\u2500\u2500 social/          # Friends and social features\n\u2502   \u251c\u2500\u2500 maps/            # Map browsing\n\u2502   \u251c\u2500\u2500 feed/            # Activity feeds\n\u2502   \u251c\u2500\u2500 games/           # Game sessions\n\u2502   \u251c\u2500\u2500 duels/           # Duels state and replays\n\u2502   \u251c\u2500\u2500 subscriptions/   # Subscription info\n\u2502   \u2514\u2500\u2500 authentication/  # Login and auth\n\u2502\n\u2514\u2500\u2500 python/              # Python script examples\n    \u251c\u2500\u2500 challenges/      # Challenge leaderboards and info\n    \u251c\u2500\u2500 profiles/        # User profiles and search\n    \u251c\u2500\u2500 social/          # Friends and social features\n    \u251c\u2500\u2500 maps/            # Map browsing\n    \u251c\u2500\u2500 feed/            # Activity feeds\n    \u251c\u2500\u2500 games/           # Game sessions\n    \u251c\u2500\u2500 duels/           # Duels state and replays\n    \u251c\u2500\u2500 subscriptions/   # Subscription info\n    \u2514\u2500\u2500 authentication/  # Login and auth\n</code></pre>"},{"location":"examples/#quick-start","title":"Quick Start","text":""},{"location":"examples/#javascript-examples-browser-console","title":"JavaScript Examples (Browser Console)","text":"<p>JavaScript examples are designed to run in your browser's developer console:</p> <ol> <li>Navigate to https://www.geoguessr.com (must be logged in for most endpoints)</li> <li>Open Developer Tools (F12 or Cmd+Option+I)</li> <li>Go to the Console tab</li> <li>Copy and paste the example code</li> <li>Call the function with appropriate parameters</li> </ol> <p>Example: <pre><code>// Copy the entire contents of get-leaderboard.js\n// Then call:\ngetChallengeLeaderboard('6G9h2UPctmUmUtaa');\n</code></pre></p>"},{"location":"examples/#python-examples","title":"Python Examples","text":"<p>Python examples require the <code>requests</code> library and use environment variables for authentication:</p> <ol> <li> <p>Install requirements:    <pre><code>pip install requests\n</code></pre></p> </li> <li> <p>Set your cookie as an environment variable:    <pre><code>export GEOGUESSR_COOKIE='your_ncfa_cookie_value'\n</code></pre></p> </li> <li> <p>Run the example:    <pre><code>python examples/python/challenges/get_leaderboard.py\n</code></pre></p> </li> </ol>"},{"location":"examples/#available-examples","title":"Available Examples","text":""},{"location":"examples/#challenges","title":"Challenges","text":"<p>JavaScript: - <code>get-leaderboard.js</code> - Get and display challenge leaderboard with statistics - <code>get-challenge-info.js</code> - View challenge settings and map information - <code>analyze-performance.js</code> - Compare your score to the leaderboard</p> <p>Python: - <code>get_leaderboard.py</code> - Get and display challenge leaderboard with statistics - <code>get_challenge_info.py</code> - View challenge settings and map information - <code>analyze_performance.py</code> - Compare your score to the leaderboard</p> <p>What you can do: - View top players and their scores - Analyze your ranking and percentile - Compare your performance to average/median - See nearby players on the leaderboard</p>"},{"location":"examples/#profiles","title":"Profiles","text":"<p>JavaScript: - <code>get-my-profile.js</code> - View your complete profile information - <code>search-users.js</code> - Search for users by username - <code>compare-users.js</code> - Compare statistics between two users</p> <p>Python: - <code>get_my_profile.py</code> - View your complete profile information - <code>search_users.py</code> - Search for users by username</p> <p>What you can do: - Check your level, XP, and progress - View competitive rating and division - Find other players - Compare stats between players</p>"},{"location":"examples/#social-friends","title":"Social &amp; Friends","text":"<p>JavaScript: - <code>get-friends-list.js</code> - View all your friends with statistics</p> <p>Python: - <code>get_friends_list.py</code> - View all your friends with statistics</p> <p>What you can do: - See who's online - View friends by country - Check average friend level - See Pro user percentage</p>"},{"location":"examples/#feed-activity","title":"Feed &amp; Activity","text":"<p>JavaScript: - <code>get-friends-activity.js</code> - View recent activity from friends with analytics</p> <p>Python: - <code>get_friends_activity.py</code> - View recent activity from friends with analytics and export options</p> <p>What you can do: - See what your friends are playing - Track most active friends - View activity type breakdown - Monitor recent games - Analyze peak activity hours - Export activity data to JSON</p>"},{"location":"examples/#maps","title":"Maps","text":"<p>JavaScript: - <code>browse-popular-maps.js</code> - Browse popular maps with statistics - <code>search-maps.js</code> - Search for maps by name or keywords</p> <p>Python: - <code>browse_popular_maps.py</code> - Browse popular, featured, new, or hot maps with statistics - <code>search_maps.py</code> - Search for maps by name or keywords</p> <p>What you can do: - Discover popular maps - Find maps by difficulty - See map creators - View location counts and likes - Search for specific maps - Browse different map categories</p>"},{"location":"examples/#games-gameplay","title":"Games &amp; Gameplay","text":"<p>JavaScript: - <code>get-game-state.js</code> - View current game state and progress - <code>create-streak-game.js</code> - Create custom streak games with presets</p> <p>Python: - <code>get_game_state.py</code> - View current game state and progress - <code>create_streak_game.py</code> - Create custom streak games with interactive setup</p> <p>What you can do: - Check game progress and statistics - View round details and guesses - Create streak games with custom settings - Use difficulty presets (easy, medium, hard, NMPZ) - Monitor game state and progress</p>"},{"location":"examples/#duels","title":"Duels","text":"<p>JavaScript: - <code>get-duel-state.js</code> - View complete duel game state with teams, health, and damage - <code>get-duel-replay.js</code> - Analyze player actions and behavior from replay data</p> <p>Python: - <code>get_duel_state.py</code> - View complete duel game state with detailed analysis - <code>get_duel_replay.py</code> - Analyze player actions and export replay data</p> <p>What you can do: - View duel game state - Track team health and multipliers - Analyze damage dealt per round - View player performance statistics - Get complete replay of player actions - Compare multiple players' strategies - Export replay data to CSV/JSON - Monitor ongoing duels - Analyze timing and behavior patterns</p>"},{"location":"examples/#subscriptions","title":"Subscriptions","text":"<p>JavaScript: - <code>check-subscription.js</code> - View your subscription status and billing info - <code>compare-plans.js</code> - Compare all available subscription plans</p> <p>Python: - <code>check_subscription.py</code> - View your subscription status and billing info - <code>compare_plans.py</code> - Compare all available subscription plans with analysis</p> <p>What you can do: - Check if you have Pro features - View subscription end date and renewal info - Compare plan pricing across currencies - Calculate savings between monthly/yearly plans - Find best value subscriptions - No authentication needed for viewing plans</p>"},{"location":"examples/#authentication","title":"Authentication","text":"<p>JavaScript: - <code>check-auth-status.js</code> - Verify you're logged in and view account details - <code>sign-in-example.js</code> - Sign in programmatically (educational purposes only)</p> <p>Python: - <code>check_auth_status.py</code> - Verify you're logged in and view account details - <code>sign_in_example.py</code> - Sign in programmatically (educational purposes only)</p> <p>What you can do: - Check authentication status - Verify if cookies are valid - View account age and creation date - Educational sign-in examples</p> <p>\u26a0\ufe0f  Important Notes: - Sign-in examples are for educational purposes only - Programmatic login may violate Terms of Service - Use proper OAuth flows in production - Never hardcode or commit credentials - Always use environment variables for sensitive data</p>"},{"location":"examples/#getting-your-cookie","title":"Getting Your Cookie","text":"<p>To use these examples, you need your <code>_ncfa</code> cookie:</p> <ol> <li>Log in to https://www.geoguessr.com</li> <li>Open Developer Tools (F12)</li> <li>Go to Application/Storage \u2192 Cookies \u2192 https://www.geoguessr.com</li> <li>Find the <code>_ncfa</code> cookie</li> <li>Copy its value</li> </ol> <p>Security Warning: Never share your cookie publicly. Treat it like a password.</p>"},{"location":"examples/#setting-cookie-in-python","title":"Setting Cookie in Python","text":"<p>Option 1: Environment Variable (Recommended) <pre><code>export GEOGUESSR_COOKIE='your_cookie_value'\n</code></pre></p> <p>Option 2: .env File Create a <code>.env</code> file: <pre><code>GEOGUESSR_COOKIE=your_cookie_value\n</code></pre></p> <p>Load it in your script: <pre><code>from dotenv import load_dotenv\nload_dotenv()\n</code></pre></p>"},{"location":"examples/#common-usage-patterns","title":"Common Usage Patterns","text":""},{"location":"examples/#extract-ids-from-urls","title":"Extract IDs from URLs","text":"<p>Challenge Token: <pre><code>const url = \"https://www.geoguessr.com/challenge/6G9h2UPctmUmUtaa\";\nconst token = url.split('/').pop();\n// Result: \"6G9h2UPctmUmUtaa\"\n</code></pre></p> <p>User ID: <pre><code>const url = \"https://www.geoguessr.com/user/5db9f057dfa5102130eaf747\";\nconst userId = url.split('/').pop();\n// Result: \"5db9f057dfa5102130eaf747\"\n</code></pre></p>"},{"location":"examples/#error-handling","title":"Error Handling","text":"<p>All examples include error handling for common issues:</p> <ul> <li>401 Unauthorized - Invalid or expired cookie</li> <li>403 Forbidden - Haven't played the challenge yet</li> <li>404 Not Found - Resource doesn't exist</li> <li>429 Too Many Requests - Rate limited</li> </ul>"},{"location":"examples/#rate-limiting","title":"Rate Limiting","text":"<p>Be respectful of the API: - Don't make excessive requests - Add delays between bulk operations - Cache results when possible - Implement exponential backoff on errors</p> <p>Example Rate Limiting (JavaScript): <pre><code>async function sleep(ms) {\n    return new Promise(resolve =&gt; setTimeout(resolve, ms));\n}\n\nfor (const token of challengeTokens) {\n    await getChallengeLeaderboard(token);\n    await sleep(100); // 100ms delay between requests\n}\n</code></pre></p> <p>Example Rate Limiting (Python): <pre><code>import time\n\nfor token in challenge_tokens:\n    get_challenge_leaderboard(token, cookie)\n    time.sleep(0.1)  # 100ms delay\n</code></pre></p>"},{"location":"examples/#modifying-examples","title":"Modifying Examples","text":"<p>All examples are designed to be easy to modify and extend:</p> <ol> <li>Change output format - Modify the display sections</li> <li>Add filtering - Filter results by criteria</li> <li>Export data - Save results to JSON/CSV</li> <li>Combine examples - Mix functionality from multiple examples</li> </ol> <p>Example: Export to JSON (JavaScript) <pre><code>const data = await getChallengeLeaderboard('token');\nconst json = JSON.stringify(data, null, 2);\nconsole.log(json);\n// Or save to file in Node.js:\n// require('fs').writeFileSync('leaderboard.json', json);\n</code></pre></p> <p>Example: Export to CSV (Python) <pre><code>import csv\n\nleaderboard = get_challenge_leaderboard(token, cookie)\nwith open('leaderboard.csv', 'w', newline='') as f:\n    writer = csv.DictWriter(f, fieldnames=['rank', 'username', 'score'])\n    writer.writeheader()\n    writer.writerows(leaderboard)\n</code></pre></p>"},{"location":"examples/#contributing-examples","title":"Contributing Examples","text":"<p>Want to add more examples? Follow these guidelines:</p> <ol> <li>Use clear, descriptive names - Function and file names should explain what they do</li> <li>Include comprehensive comments - Explain parameters and return values</li> <li>Add error handling - Handle common error cases gracefully</li> <li>Follow the existing format - Match the style of current examples</li> <li>Test thoroughly - Verify examples work with real data</li> <li>Document requirements - List any dependencies or prerequisites</li> </ol>"},{"location":"examples/#need-help","title":"Need Help?","text":"<ul> <li>Check the main documentation for API endpoint details</li> <li>Review specific endpoint docs in the root directory (challenges.md, profiles.md, etc.)</li> <li>Look at similar examples for patterns and best practices</li> </ul>"},{"location":"examples/#license","title":"License","text":"<p>These examples are provided as-is for educational purposes. Always respect GeoGuessr's Terms of Service when using the API.</p>"}]}